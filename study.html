<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Guide - Electron Towers</title>
    <style>
        :root {
            --primary: #1e293b;
            --secondary: #334155;
            --accent: #06b6d4;
            --warning: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --light: #f1f5f9;
            --border: #475569;
            --bg: #0f172a;
            --card: #1e293b;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gradient-warning: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --gradient-success: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --gradient-danger: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--light);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ======= Custom Logo-Based Emojis ======= */
        .custom-emoji {
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            vertical-align: middle;
            position: relative;
        }

        .emoji-scientist {
            background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 100%);
            border-radius: 50%;
            border: 2px solid #8b5cf6;
        }

        .emoji-scientist::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 6px;
            background: #8b5cf6;
            border-radius: 4px 4px 2px 2px;
        }

        .emoji-scientist::after {
            content: '';
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 4px;
            background: #fbbf24;
            border-radius: 3px;
        }

        .emoji-atom {
            background: white;
            border: 2px solid #8b5cf6;
            border-radius: 50%;
        }

        .emoji-atom::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 3px;
            height: 3px;
            background: #8b5cf6;
            border-radius: 50%;
        }

        .emoji-beaker {
            background: #8b5cf6;
            border: 1px solid white;
            border-radius: 2px 2px 0 0;
            width: 8px;
            height: 10px;
        }

        .emoji-beaker::after {
            content: '';
            position: absolute;
            top: -1px;
            right: 1px;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
        }

        .emoji-syringe {
            background: white;
            border: 1px solid #8b5cf6;
            border-radius: 1px;
            width: 4px;
            height: 12px;
        }

        .emoji-syringe::before {
            content: '';
            position: absolute;
            top: -2px;
            left: 1px;
            width: 2px;
            height: 2px;
            background: #8b5cf6;
            border-radius: 50%;
        }

        .emoji-star {
            background: white;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            width: 10px;
            height: 10px;
        }

        .emoji-electron {
            background: #06b6d4;
            border-radius: 50%;
            width: 8px;
            height: 8px;
            box-shadow: 0 0 4px #06b6d4;
        }

        .emoji-nucleus {
            background: #ef4444;
            border-radius: 50%;
            width: 10px;
            height: 10px;
            box-shadow: 0 0 4px #ef4444;
        }

        .emoji-energy {
            background: #f59e0b;
            border-radius: 50%;
            width: 8px;
            height: 8px;
            box-shadow: 0 0 4px #f59e0b;
        }

        .emoji-study {
            background: #10b981;
            border-radius: 50%;
            width: 10px;
            height: 10px;
            box-shadow: 0 0 4px #10b981;
        }

        .emoji-game {
            background: #8b5cf6;
            border-radius: 50%;
            width: 10px;
            height: 10px;
            box-shadow: 0 0 4px #8b5cf6;
        }

        /* ======= Header Styles (Consistent with main app) ======= */
        .app-header {
            background: var(--card);
            border-bottom: 2px solid var(--border);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-logo {
            position: relative;
            width: 60px;
            height: 60px;
            flex-shrink: 0;
            background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 100%);
            border-radius: 15px;
            padding: 6px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        .logo-image {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .logo-placeholder {
            width: 100%;
            height: 100%;
            position: relative;
            background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 100%);
            border-radius: 10px;
        }

        /* Scientist elements */
        .logo-scientist {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .logo-hair-purple {
            position: absolute;
            top: 8px;
            left: 20px;
            width: 20px;
            height: 12px;
            background: #8b5cf6;
            border-radius: 10px 10px 8px 8px;
        }

        .logo-face-skin {
            position: absolute;
            top: 18px;
            left: 22px;
            width: 16px;
            height: 12px;
            background: #fbbf24;
            border-radius: 8px;
        }

        .logo-eyes-blue {
            position: absolute;
            top: 20px;
            left: 24px;
            width: 12px;
            height: 8px;
            display: flex;
            gap: 4px;
        }

        .logo-eyes-blue::before,
        .logo-eyes-blue::after {
            content: '';
            width: 4px;
            height: 4px;
            background: #1e40af;
            border-radius: 50%;
        }

        .logo-glasses-round {
            position: absolute;
            top: 19px;
            left: 21px;
            width: 18px;
            height: 6px;
            border: 2px solid #1e293b;
            border-radius: 6px;
        }

        .logo-smile-friendly {
            position: absolute;
            top: 26px;
            left: 25px;
            width: 8px;
            height: 4px;
            border: 1px solid #dc2626;
            border-top: none;
            border-radius: 0 0 8px 8px;
        }

        .logo-labcoat-white {
            position: absolute;
            top: 30px;
            left: 18px;
            width: 24px;
            height: 14px;
            background: white;
            border-radius: 4px 4px 0 0;
        }

        .logo-tie-purple {
            position: absolute;
            top: 32px;
            left: 26px;
            width: 4px;
            height: 10px;
            background: #8b5cf6;
            border-radius: 2px;
        }

        /* Science elements */
        .logo-science-elements {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .logo-atom-white {
            position: absolute;
            width: 8px;
            height: 8px;
            border: 1px solid white;
            border-radius: 50%;
        }

        .logo-atom-white:nth-child(1) {
            top: 5px;
            left: 5px;
        }

        .logo-atom-white:nth-child(2) {
            top: 5px;
            right: 5px;
        }

        .logo-beaker-purple {
            position: absolute;
            width: 6px;
            height: 8px;
            background: #8b5cf6;
            border-radius: 3px 3px 0 0;
        }

        .logo-beaker-purple:nth-child(3) {
            bottom: 5px;
            left: 5px;
        }

        .logo-beaker-purple:nth-child(4) {
            bottom: 5px;
            right: 5px;
        }

        .logo-syringe-white {
            position: absolute;
            width: 3px;
            height: 10px;
            background: white;
            border: 1px solid #8b5cf6;
            border-radius: 1px;
        }

        .logo-syringe-white:nth-child(5) {
            bottom: 8px;
            left: 15px;
        }

        .logo-syringe-white:nth-child(6) {
            bottom: 8px;
            right: 15px;
        }

        .logo-star-white {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }

        .logo-star-white:nth-child(7) {
            top: 12px;
            left: 12px;
        }

        .logo-star-white:nth-child(8) {
            top: 18px;
            right: 10px;
        }

        .logo-star-white:nth-child(9) {
            bottom: 15px;
            left: 10px;
        }

        .logo-star-white:nth-child(10) {
            bottom: 22px;
            right: 8px;
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-text h1 {
            color: var(--light);
            font-size: 24px;
            font-weight: 700;
            margin: 0;
        }

        .brand-text .subtitle {
            color: var(--accent);
            font-size: 14px;
            margin: 5px 0 0 0;
            opacity: 0.8;
        }

        .right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn.ghost {
            background: transparent;
            color: var(--light);
            border: 2px solid var(--border);
        }

        .btn.ghost:hover {
            background: var(--border);
            border-color: var(--accent);
        }

        .btn.primary {
            background: var(--accent);
            color: white;
        }

        .btn.primary:hover {
            background: #0891b2;
            transform: translateY(-2px);
        }

        /* ======= Main Content ======= */
        .main {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .page-title {
            text-align: center;
            margin-bottom: 50px;
        }

        .page-title h1 {
            font-size: 48px;
            color: var(--accent);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
        }

        .page-title p {
            font-size: 20px;
            color: var(--light);
            opacity: 0.8;
        }

        /* ======= Big Tile Design ======= */
        .study-tiles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .study-tile {
            background: var(--card);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 40px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .study-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-primary);
        }

        .study-tile.overview::before {
            background: var(--gradient-primary);
        }

        .study-tile.rules::before {
            background: var(--gradient-accent);
        }

        .study-tile.exceptions::before {
            background: var(--gradient-warning);
        }

        .study-tile.ions::before {
            background: var(--gradient-secondary);
        }

        .study-tile.practice::before {
            background: var(--gradient-success);
        }

        .study-tile.assessment::before {
            background: var(--gradient-danger);
        }

        .study-tile:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--accent);
            box-shadow: 0 20px 40px rgba(6, 182, 212, 0.3);
        }

        .tile-header {
            margin-bottom: 25px;
        }

        .tile-header h2 {
            color: var(--light);
            font-size: 28px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .tile-header p {
            color: var(--light);
            opacity: 0.8;
            font-size: 16px;
            line-height: 1.6;
        }

        .tile-content {
            flex-grow: 1;
        }

        .tile-features {
            list-style: none;
            margin: 20px 0;
        }

        .tile-features li {
            color: var(--light);
            margin-bottom: 12px;
            padding-left: 30px;
            position: relative;
            font-size: 15px;
        }

        .tile-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
            font-size: 18px;
        }

        .tile-actions {
            margin-top: 25px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }

        .tile-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 140px;
            flex-shrink: 0;
            justify-content: center;
        }

        .tile-btn:hover {
            background: #0891b2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }

        .tile-btn.secondary {
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
        }

        .tile-btn.secondary:hover {
            background: var(--accent);
            color: white;
        }

        /* ======= Interactive Elements ======= */
        .interactive-demo {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        /* ======= Core Rules Interactive Styles ======= */
        .rule-definitions {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }

        .rule-definition {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
        }

        .rule-definition h4 {
            margin: 0 0 8px 0;
            font-size: 18px;
        }

        .rule-definition p {
            margin: 0;
            line-height: 1.5;
        }

        .aufbau-demo, .hund-demo, .pauli-demo {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }

        /* ===== Main App Style Building Structure ===== */
        .building {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .floor {
            margin-bottom: 8px;
        }

        .floor-label {
            font-weight: 900;
            color: var(--warning);
            margin-bottom: 4px;
            font-size: 13px;
        }

        .wings {
            display: grid;
            grid-template-columns: 1fr;
            grid-auto-rows: minmax(50px, auto);
            gap: 6px;
            align-items: stretch;
        }

        .wing {
            background: rgba(30, 41, 59, 0.8);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 8px;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .wing-title {
            color: #fff;
            font-size: 12px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .degenerate-label {
            background: var(--warning);
            color: var(--dark);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            margin-left: 8px;
        }

        .units {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .unit {
            width: 120px;
            min-height: 70px;
            background: rgba(30, 41, 59, 0.9);
            border: 2px solid var(--secondary);
            border-radius: 12px;
            padding: 6px;
            position: relative;
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .unit:hover {
            border-color: var(--accent);
            transform: scale(1.02);
        }

        .unit-label {
            position: absolute;
            top: 4px;
            right: 6px;
            font-size: 10px;
            color: var(--warning);
        }

        .slots {
            display: flex;
            gap: 6px;
            margin-top: 18px;
            flex-wrap: wrap;
        }

        .slot {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            background: rgba(15, 23, 42, 0.9);
            border: 2px solid var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-weight: 900;
            font-size: 16px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            min-width: 44px;
            min-height: 44px;
            transition: all 0.3s ease;
        }

        .slot:hover {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .slot.filled {
            background: var(--success);
            border-color: var(--success);
        }

        .slot.half-filled {
            background: var(--warning);
            border-color: var(--warning);
        }

        .slot.paired {
            background: var(--danger);
            border-color: var(--danger);
        }

        /* Energy ordering: f (highest) → d → p → s (lowest) */
        .floor[data-n="2"] .wing-p { grid-row: 1; }
        .floor[data-n="2"] .wing-s { grid-row: 2; }
        .floor[data-n="3"] .wing-f, .floor[data-n="4"] .wing-f, .floor[data-n="5"] .wing-f, .floor[data-n="6"] .wing-f, .floor[data-n="7"] .wing-f { grid-row: 1; }
        .floor[data-n="3"] .wing-d, .floor[data-n="4"] .wing-d, .floor[data-n="5"] .wing-d, .floor[data-n="6"] .wing-d, .floor[data-n="7"] .wing-d { grid-row: 2; }
        .floor[data-n="3"] .wing-p, .floor[data-n="4"] .wing-p, .floor[data-n="5"] .wing-p, .floor[data-n="6"] .wing-p, .floor[data-n="7"] .wing-p { grid-row: 3; }
        .floor[data-n="3"] .wing-s, .floor[data-n="4"] .wing-s, .floor[data-n="5"] .wing-s, .floor[data-n="6"] .wing-s, .floor[data-n="7"] .wing-s { grid-row: 4; }

        .demo-controls {
            display: flex;
            gap: 12px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        /* ===== Ion Formation Specific Styles ===== */
        .ion-formation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        /* ======= Assessment Specific Styles ===== */
        .mark-scheme {
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .mark-scheme strong {
            color: var(--success);
            font-weight: 600;
        }

        .mark-scheme p {
            margin: 8px 0;
            color: var(--light);
        }

        .assessment-paper-card {
            background: rgba(15, 23, 42, 0.4);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .assessment-paper-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .paper-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .paper-title {
            color: var(--accent);
            font-size: 24px;
            font-weight: 600;
        }

        .paper-meta {
            color: var(--light);
            font-size: 14px;
        }

        .question-number {
            background: var(--accent);
            color: var(--dark);
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        /* ======= Paper Assessment Styles ===== */
        .paper-timer {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid var(--danger);
            border-radius: 12px;
            padding: 15px 20px;
            margin: 20px 0;
            text-align: center;
        }

        .timer-label {
            color: var(--light);
            font-weight: 600;
            margin-right: 10px;
        }

        .timer-display {
            color: var(--danger);
            font-size: 24px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
        }

        .instructions-box {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .instructions-box ul {
            margin: 0;
            padding-left: 20px;
        }

        .instructions-box li {
            margin: 8px 0;
            color: var(--light);
        }

        .question-container {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
        }

        .question-part {
            margin: 20px 0;
            padding: 20px;
            background: rgba(15, 23, 42, 0.2);
            border-radius: 12px;
            border-left: 4px solid var(--accent);
        }

        .question-part h4 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .answer-space {
            margin: 15px 0;
        }

        .answer-space textarea,
        .answer-space input {
            width: 100%;
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            color: var(--light);
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
        }

        .answer-space textarea:focus,
        .answer-space input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .config-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 8px;
            overflow: hidden;
        }

        .config-table th,
        .config-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .config-table th {
            background: var(--accent);
            color: var(--dark);
            font-weight: 600;
        }

        .config-table td {
            color: var(--light);
        }

        .config-table input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--light);
            font-size: 14px;
        }

        .config-table input:focus {
            outline: none;
            background: rgba(59, 130, 246, 0.1);
        }

        .paper-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 40px 0;
            padding: 20px;
            background: rgba(15, 23, 42, 0.2);
            border-radius: 12px;
        }

        .paper-controls .btn {
            min-width: 150px;
        }

        .formation-card {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .formation-card:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.2);
        }

        .formation-card h4 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .example-box {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid var(--primary);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .example-box strong {
            color: var(--primary);
            display: block;
            margin-bottom: 8px;
        }

        .example-box p {
            margin: 5px 0;
            font-family: 'Courier New', monospace;
            color: var(--light);
        }

        .ion-demo {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            transition: all 0.3s ease;
        }

        .ion-demo:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.2);
        }

        .ion-demo h4 {
            color: var(--accent);
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .ion-demo .building {
            max-width: 800px;
            margin: 0 auto;
        }

        .p-orbitals {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 20px;
        }

        .p-orbital-set {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .set-label {
            font-weight: bold;
            color: var(--success);
            min-width: 80px;
            font-size: 16px;
        }

        .orbital-test {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .test-orbital {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .orbital-label {
            font-weight: bold;
            color: var(--danger);
            margin-bottom: 12px;
            font-size: 16px;
        }

        .electron-count {
            margin-top: 12px;
            color: var(--light);
            font-size: 14px;
        }

        .pauli-feedback {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: bold;
        }

        .pauli-feedback.success {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .pauli-feedback.error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--danger);
            color: var(--danger);
        }

        .understanding-quiz {
            margin: 20px 0;
        }

        .quiz-question {
            margin-bottom: 30px;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .quiz-question h4 {
            margin-bottom: 20px;
            color: var(--accent);
            font-size: 18px;
            line-height: 1.4;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
            width: 100%;
        }

        .quiz-option {
            padding: 15px 20px;
            background: var(--dark);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 15px;
            width: 100%;
            box-sizing: border-box;
            min-height: 50px;
            display: flex;
            align-items: center;
        }

        .quiz-option:hover {
            background: var(--accent);
            border-color: var(--accent);
        }

        .quiz-option.correct {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .quiz-option.incorrect {
            background: var(--danger);
            border-color: var(--danger);
            color: white;
        }

        .quiz-results {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-top: 20px;
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .quiz-controls .tile-btn {
            min-width: 140px;
            flex: 0 0 auto;
        }

        /* ======= Exceptions Content Styles ======= */
        .exceptions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .exception-item {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .exception-item:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .exception-item h4 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .config-comparison {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 20px 0;
        }

        .config-standard {
            background: rgba(239, 68, 68, 0.15);
            border: 2px solid var(--danger);
            border-radius: 12px;
            padding: 15px;
            color: var(--danger);
            font-weight: 500;
        }

        .config-actual {
            background: rgba(16, 185, 129, 0.15);
            border: 2px solid var(--success);
            border-radius: 12px;
            padding: 15px;
            color: var(--success);
            font-weight: 500;
        }

        .exception-demo {
            margin: 25px 0;
            background: rgba(15, 23, 42, 0.2);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 20px;
        }

        .exception-demo .building {
            margin: 20px 0;
            max-width: 800px;
        }

        .exception-demo .units {
            display: flex;
            flex-direction: row;
            gap: 8px;
            flex-wrap: nowrap;
        }

        .exception-demo .unit {
            min-width: 60px;
        }

        .exception-demo .demo-layout {
            display: flex;
            gap: 20px;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .exception-demo .building {
            flex: 1;
        }

        .config-display {
            flex: 0 0 150px;
            padding: 10px;
            margin-top: 20px;
            background: none;
            border: none;
        }

        .config-display h5 {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .config-text {
            color: var(--light);
            font-size: 0.9rem;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .config-standard {
            color: var(--danger) !important;
            background: none !important;
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
            border-radius: 0 !important;
            display: inline !important;
        }

        .config-actual {
            color: var(--success) !important;
            background: none !important;
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
            border-radius: 0 !important;
            display: inline !important;
        }

        .exception-demo h4 {
            color: var(--accent);
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .exception-demo p {
            color: var(--light);
            margin-bottom: 20px;
            font-style: italic;
        }

        /* ======= Objectives Section Styles ======= */
        .objectives-section {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .objectives-section h3 {
            color: var(--accent);
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .objectives-section p {
            color: var(--light);
            margin-bottom: 20px;
            font-style: italic;
        }

        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .objective-card {
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .objective-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .objective-card h4 {
            color: var(--accent);
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .objective-card p {
            color: var(--light);
            font-size: 0.95rem;
            line-height: 1.5;
            margin: 0;
        }

        .objective-card ul {
            color: var(--light);
            margin: 0;
            padding-left: 20px;
        }

        .objective-card li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        /* ======= Vocabulary Section Styles ======= */
        .vocabulary-section {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .vocabulary-section h3 {
            color: var(--accent);
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .vocab-card {
            background: rgba(15, 23, 42, 0.5);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .vocab-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .vocab-card h4 {
            color: var(--accent);
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .vocab-item {
            margin-bottom: 12px;
            color: var(--light);
            line-height: 1.5;
        }

        .vocab-item strong {
            color: var(--accent);
            font-weight: 600;
        }

        /* ======= Vocabulary Quiz Section Styles ======= */
        .vocab-quiz-section {
            background: rgba(15, 23, 42, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .vocab-quiz-section h3 {
            color: var(--accent);
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .orbital.filled, .orbital.half-filled, .orbital.paired {
            animation: pulse 0.5s ease-in-out;
        }

        .interactive-demo h4 {
            color: var(--warning);
            margin-bottom: 15px;
            font-size: 18px;
        }

        .orbital-diagram {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .orbital {
            width: 60px;
            height: 60px;
            border: 2px solid var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            background: var(--card);
            color: var(--light);
            font-weight: bold;
        }

        .orbital:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.4);
        }

        .orbital.filled {
            background: var(--accent);
            color: white;
        }

        .orbital.half-filled {
            background: linear-gradient(90deg, var(--accent) 50%, transparent 50%);
            color: var(--accent);
        }

        /* ======= Footer (Consistent with main app) ======= */
        .app-footer {
            background: var(--card);
            border-top: 2px solid var(--border);
            padding: 30px 20px;
            text-align: center;
            color: var(--light);
            opacity: 0.7;
        }

        /* ======= Responsive Design ======= */
        @media (max-width: 768px) {
            .study-tiles {
                grid-template-columns: 1fr;
            }
            
            .page-title h1 {
                font-size: 36px;
                flex-direction: column;
                gap: 10px;
            }
            
            .study-tile {
                padding: 30px;
                min-height: 250px;
            }
            
            .tile-header h2 {
                font-size: 24px;
            }
            
            .tile-actions {
                flex-direction: column;
            }
            
            .tile-btn {
                width: 100%;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .main {
                padding: 20px 15px;
            }
            
            .study-tile {
                padding: 25px;
            }
            
            .page-title h1 {
                font-size: 28px;
            }
        }

        /* ======= Detailed Content Styles ======= */
        .content-section {
            margin-bottom: 50px;
        }

        .content-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 20px;
            border: 1px solid var(--border);
        }

        .content-card {
            background: var(--card);
            border: 2px solid var(--border);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .content-card:hover {
            border-color: var(--accent);
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(6, 182, 212, 0.2);
        }

        /* Core Concepts Overview */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .concept-item {
            background: rgba(30, 41, 59, 0.4);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .concept-item:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.15);
        }

        .concept-icon {
            background: var(--accent);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 18px;
            flex-shrink: 0;
        }

        .concept-content h4 {
            color: var(--warning);
            margin-bottom: 8px;
            font-size: 16px;
        }

        .concept-content p {
            color: var(--light);
            margin: 0 0 8px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .concept-preview {
            background: var(--bg);
            color: var(--accent);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            border: 1px solid var(--accent);
        }

        /* Interactive Learning Progress */
        .learning-progress {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        .progress-visual {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .atom-progress {
            position: relative;
            width: 200px;
            height: 200px;
        }

        .nucleus {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, var(--warning), var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border: 3px solid var(--border);
        }

        .nucleus-text {
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .electron-shells {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .shell {
            position: absolute;
            border: 2px solid var(--border);
            border-radius: 50%;
            transition: all 0.5s ease;
        }

        .shell-1 {
            top: 20px;
            left: 20px;
            width: 160px;
            height: 160px;
        }

        .shell-2 {
            top: 40px;
            left: 40px;
            width: 120px;
            height: 120px;
        }

        .shell-3 {
            top: 60px;
            left: 60px;
            width: 80px;
            height: 80px;
        }

        .shell.active {
            border-color: var(--accent);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
            }
            50% {
                box-shadow: 0 0 30px rgba(6, 182, 212, 0.6);
            }
        }

        .nucleus.celebrating {
            animation: celebrate 0.6s ease-in-out;
        }

        @keyframes celebrate {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        .progress-stats {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .stat-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .stat-content h4 {
            color: var(--light);
            margin: 0 0 5px 0;
            font-size: 14px;
        }

        .stat-value {
            color: var(--accent);
            font-weight: bold;
            font-size: 16px;
        }

        .achievement-unlock {
            margin-top: 30px;
        }

        .achievements-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .achievement-item.locked {
            opacity: 0.6;
        }

        .achievement-item.unlocked {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
        }

        .achievement-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .achievement-content h5 {
            color: var(--light);
            margin: 0 0 5px 0;
            font-size: 14px;
        }

        .achievement-content p {
            color: var(--light);
            margin: 0;
            font-size: 12px;
            opacity: 0.8;
        }

        /* Button spacing improvements */
        .button-container {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            flex-wrap: wrap;
            align-items: center;
        }

        .button-container .tile-btn {
            margin: 0;
        }

        /* Single button centering */
        .single-button {
            text-align: center;
            margin-top: 25px;
        }

        .single-button .tile-btn {
            margin: 0 auto;
        }

        /* Content card button spacing */
        .content-card .button-container {
            margin-top: 30px;
        }

        /* Achievement section button spacing */
        .achievement-unlock + .button-container {
            margin-top: 20px;
        }

        /* Responsive button adjustments */
        @media (max-width: 768px) {
            .tile-actions {
                flex-direction: column;
                align-items: stretch;
            }
            
            .tile-btn {
                min-width: 100%;
                margin: 5px 0;
            }
            
            .button-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .button-container .tile-btn {
                min-width: 100%;
                margin: 5px 0;
            }
            
            .journey-intro {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .journey-path {
                flex-direction: column;
                gap: 10px;
            }
            
            .path-line {
                width: 2px;
                height: 20px;
            }
        }

        @media (max-width: 480px) {
            .tile-btn {
                padding: 10px 20px;
                font-size: 13px;
            }
            
            .concepts-grid,
            .specs-grid,
            .vocabulary-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Specifications Grid */
        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .spec-category {
            background: rgba(30, 41, 59, 0.3);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .spec-category:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.15);
        }

        .spec-category h4 {
            margin-bottom: 20px;
            font-weight: 600;
        }

        .spec-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .spec-list li {
            color: var(--light);
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            line-height: 1.5;
        }

        .spec-list li::before {
            content: '•';
            color: var(--accent);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Vocabulary Grid */
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .vocab-item {
            background: rgba(30, 41, 59, 0.4);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vocab-item:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(6, 182, 212, 0.2);
        }

        .vocab-term {
            color: var(--warning);
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .vocab-preview {
            color: var(--light);
            font-size: 14px;
            line-height: 1.4;
        }

        /* Learning Journey Path */
        .journey-intro {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 25px 0;
        }

        .journey-visual {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .journey-path {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .path-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            opacity: 0.5;
            transition: all 0.3s ease;
        }

        .path-step.active {
            opacity: 1;
        }

        .step-icon {
            width: 50px;
            height: 50px;
            background: var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .path-step.active .step-icon {
            background: var(--accent);
            color: white;
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        .step-label {
            color: var(--light);
            font-size: 12px;
            text-align: center;
            font-weight: 500;
        }

        .path-line {
            width: 40px;
            height: 2px;
            background: var(--border);
            transition: all 0.3s ease;
        }

        .path-step.active + .path-line {
            background: var(--accent);
        }

        .journey-description {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .journey-description h4 {
            margin-bottom: 15px;
            font-weight: 600;
        }

        .journey-description p {
            margin-bottom: 25px;
        }






    </style>
</head>
<body>
    <!-- ======= Header (Consistent with main app) ======= -->
    <header class="app-header">
        <div class="brand">
            <div class="header-logo">
                <div class="logo-image">
                    <div class="logo-placeholder">
                        <div class="logo-scientist">
                            <div class="logo-hair-purple"></div>
                            <div class="logo-face-skin"></div>
                            <div class="logo-eyes-blue"></div>
                            <div class="logo-glasses-round"></div>
                            <div class="logo-smile-friendly"></div>
                            <div class="logo-labcoat-white"></div>
                            <div class="logo-tie-purple"></div>
                        </div>
                        <div class="logo-science-elements">
                            <div class="logo-atom-white"></div>
                            <div class="logo-atom-white"></div>
                            <div class="logo-beaker-purple"></div>
                            <div class="logo-beaker-purple"></div>
                            <div class="logo-syringe-white"></div>
                            <div class="logo-syringe-white"></div>
                            <div class="logo-star-white"></div>
                            <div class="logo-star-white"></div>
                            <div class="logo-star-white"></div>
                            <div class="logo-star-white"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="brand-text">
                <h1>Electron Towers</h1>
                <p class="subtitle">v0.16r8 — Study Guide & Learning Resources</p>
            </div>
        </div>
        <div class="right">
            <a href="index.html" class="btn ghost"><span class="custom-emoji emoji-atom"></span> Back to App</a>
            <a href="progress.html" class="btn ghost"><span class="custom-emoji emoji-star"></span> Progress</a>
            <button class="btn primary"><span class="custom-emoji emoji-study"></span> Start Learning</button>
        </div>
    </header>

    <!-- ======= Main Content ======= -->
    <main class="main">
        <div class="page-title">
            <h1>
                <span class="custom-emoji emoji-study"></span>
                Master Electron Configuration
                <span class="custom-emoji emoji-atom"></span>
            </h1>
            <p>Comprehensive study guide for understanding atomic structure and electron behavior</p>
            <div style="text-align: center; margin-top: 20px;">
                <a href="progress.html" class="tile-btn" style="display: inline-block; text-decoration: none;">
                    📊 View Progress Dashboard
                </a>
            </div>
        </div>

        <!-- ======= Big Study Tiles ======= -->
        <div class="study-tiles">
            <!-- Overview Tile -->
            <div class="study-tile overview">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-study"></span>
                        Overview
                    </h2>
                    <p>Master the fundamental principles of electron arrangement in atoms</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Aufbau principle:</strong> Electrons occupy the lowest-energy available subshells first.</li>
                        <li><strong>Hund's rule:</strong> In a set of degenerate orbitals (p, d, f), place one electron in each with the <b>same spin</b> before pairing.</li>
                        <li><strong>Pauli exclusion principle:</strong> Each orbital holds at most two electrons and they must have <b>opposite spins</b> (↑↓).</li>
                        <li><strong>Exceptions:</strong> Special cases like Chromium (Cr) and Copper (Cu)</li>
                        <li><strong>Ion Formation:</strong> How atoms gain or lose electrons to form ions</li>
                        <li><strong>Octet Rule:</strong> Why atoms seek 8 valence electrons for stability</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showOverviewContent()">Learn More</button>
                    <button class="tile-btn secondary" onclick="startOverview()">Begin Journey</button>
                </div>
            </div>

            <!-- Core Rules Tile -->
            <div class="study-tile rules">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-atom"></span>
                        Core Rules
                    </h2>
                    <p>The three fundamental principles that govern electron behavior</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Aufbau principle:</strong> Electrons occupy the lowest-energy available subshells first.</li>
                        <li><strong>Hund's rule:</strong> In a set of degenerate orbitals (p, d, f), place one electron in each with the <b>same spin</b> before pairing.</li>
                        <li><strong>Pauli exclusion principle:</strong> Each orbital holds at most two electrons and they must have <b>opposite spins</b> (↑↓).</li>
                        <li><strong>Energy Order:</strong> 1s → 2s → 2p → 3s → 3p → 4s → 3d → 4p...</li>
                        <li><strong>Diagonal Pattern:</strong> Follow the energy level progression</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showCoreRulesContent()">Learn More</button>
                </div>
            </div>

            <!-- Exceptions Tile -->
            <div class="study-tile exceptions">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-star"></span>
                        Exceptions
                    </h2>
                    <p>Special cases where elements break the standard rules for stability</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Chromium (Cr):</strong> [Ar] 4s¹ 3d⁵ instead of [Ar] 4s² 3d⁴</li>
                        <li><strong>Copper (Cu):</strong> [Ar] 4s¹ 3d¹⁰ instead of [Ar] 4s² 3d⁹</li>
                        <li><strong>Molybdenum (Mo):</strong> [Kr] 5s¹ 4d⁵ (half-filled d-subshell)</li>
                        <li><strong>Silver (Ag):</strong> [Kr] 5s¹ 4d¹⁰ (filled d-subshell)</li>
                        <li><strong>Why Exceptions:</strong> Half-filled and filled subshells provide extra stability</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showExceptionsContent()">Learn More</button>
                </div>
            </div>

            <!-- Ion Formation Tile -->
            <div class="study-tile ions">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-beaker"></span>
                        Ion Formation
                    </h2>
                    <p>Understanding how atoms gain and lose electrons to form ions</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Cations:</strong> Positively charged ions formed by losing electrons</li>
                        <li><strong>Anions:</strong> Negatively charged ions formed by gaining electrons</li>
                        <li><strong>Main Group Metals:</strong> Lose electrons from outermost shell</li>
                        <li><strong>Transition Metals:</strong> Lose s electrons first, then d electrons</li>
                        <li><strong>Non-metals:</strong> Gain electrons to achieve noble gas configuration</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showIonFormationContent()">Learn More</button>
                </div>
            </div>

            <!-- Practice Tile -->
            <div class="study-tile practice">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-syringe"></span>
                        Practice
                    </h2>
                    <p>Interactive exercises to master electron configuration</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Cations:</strong> Atoms lose electrons to form positive ions</li>
                        <li><strong>Anions:</strong> Atoms gain electrons to form negative ions</li>
                        <li><strong>Electron Loss Priority:</strong> Highest n value first, then highest l value</li>
                        <li><strong>Octet Rule:</strong> Atoms seek 8 valence electrons for stability</li>
                        <li><strong>Examples:</strong> Na⁺, Ca²⁺, Cl⁻, O²⁻</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showSection('ions')">Study Ions</button>
                    <button class="tile-btn secondary" onclick="ionExamples()">See Examples</button>
                </div>
            </div>


            <!-- Assessment Tile -->
            <div class="study-tile assessment">
                <div class="tile-header">
                    <h2>
                        <span class="custom-emoji emoji-nucleus"></span>
                        Assessment
                    </h2>
                    <p>Electron configuration focused examinations</p>
                </div>
                <div class="tile-content">
                    <ul class="tile-features">
                        <li><strong>Paper 1:</strong> Core Principles & Rules (50 marks)</li>
                        <li><strong>Paper 2:</strong> Exceptions & Complex Cases (50 marks)</li>
                        <li><strong>Paper 3:</strong> Ion Formation & Applications (60 marks)</li>
                        <li><strong>Mark Schemes:</strong> Detailed Edexcel-style marking criteria</li>
                        <li><strong>Timed Exams:</strong> Focused electron configuration assessments</li>
                    </ul>
                </div>
                <div class="tile-actions">
                    <button class="tile-btn" onclick="showAssessmentContent()">View Papers</button>
                    <button class="tile-btn secondary" onclick="startPaper1()">Start Paper 1</button>
                </div>
            </div>
        </div>

        <!-- ======= Detailed Content Sections ======= -->
        <div id="detailedContent" style="display: none;">
            <!-- Overview Section -->
            <div id="overviewContent" class="content-section">
                <div class="content-header">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <button class="btn ghost" onclick="hideDetailedContent()" style="display: flex; align-items: center; gap: 8px;">
                            <span class="custom-emoji emoji-atom"></span>
                            ← Back to Tiles
                        </button>
                        <div style="flex: 1; text-align: center;">
                            <h2 style="color: var(--accent); font-size: 36px; margin: 0; display: flex; align-items: center; gap: 15px; justify-content: center;">
                                <span class="custom-emoji emoji-study"></span>
                                Overview - Master Electron Configuration
                            </h2>
                        </div>
                        <div style="width: 120px;"></div> <!-- Spacer for centering -->
                    </div>
                    <p style="color: var(--light); font-size: 18px; margin-bottom: 30px; opacity: 0.8;">
                        Welcome to your comprehensive journey into the world of electron configurations. This overview will introduce you to the fundamental concepts that govern how electrons arrange themselves in atoms.
                    </p>
                </div>

                <!-- Core Concepts Overview -->
                <div class="content-card">
                    <h3 style="color: var(--warning); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-atom"></span>
                        Core Concepts Overview
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px; font-style: italic;">
                        Essential principles that govern how electrons arrange themselves in atoms. These are the exact same definitions used in the main app's study and game modes.
                    </p>
                    
                    <div class="concepts-grid">
                        <div class="concept-item" onclick="showConceptDetails('aufbau')">
                            <div class="concept-icon">1</div>
                            <div class="concept-content">
                                <h4>Aufbau principle</h4>
                                <p>Electrons occupy the lowest-energy available subshells first.</p>
                                <div class="concept-preview">1s → 2s → 2p → 3s → 3p → 4s → 3d</div>
                            </div>
                        </div>
                        <div class="concept-item" onclick="showConceptDetails('hund')">
                            <div class="concept-icon">2</div>
                            <div class="concept-content">
                                <h4>Hund's rule</h4>
                                <p>In a set of degenerate orbitals (p, d, f), place one electron in each with the <b>same spin</b> before pairing.</p>
                                <div class="concept-preview">↑ ↑ ↑ (not ↑↓)</div>
                            </div>
                        </div>
                        <div class="concept-item" onclick="showConceptDetails('pauli')">
                            <div class="concept-icon">3</div>
                            <div class="concept-content">
                                <h4>Pauli exclusion principle</h4>
                                <p>Each orbital holds at most two electrons and they must have <b>opposite spins</b> (↑↓).</p>
                                <div class="concept-preview">↑↓ (2 electrons max per orbital)</div>
                            </div>
                        </div>
                        <div class="concept-item" onclick="showConceptDetails('exceptions')">
                            <div class="concept-icon">4</div>
                            <div class="concept-content">
                                <h4>Exceptions</h4>
                                <p>Special cases like Chromium and Copper</p>
                                <div class="concept-preview">Cr: [Ar] 4s¹ 3d⁵</div>
                            </div>
                        </div>
                        <div class="concept-item" onclick="showConceptDetails('ions')">
                            <div class="concept-icon">5</div>
                            <div class="concept-content">
                                <h4>Ion Formation</h4>
                                <p>How atoms gain or lose electrons</p>
                                <div class="concept-preview">Na → Na⁺ + e⁻</div>
                            </div>
                        </div>
                        <div class="concept-item" onclick="showConceptDetails('octet')">
                            <div class="concept-icon">6</div>
                            <div class="concept-content">
                                <h4>Octet Rule</h4>
                                <p>Atoms seek 8 valence electrons for stability</p>
                                <div class="concept-preview">Ne: 1s² 2s² 2p⁶</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Your Learning Journey -->
                <div class="content-card">
                    <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-energy"></span>
                        Your Learning Journey
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px;">
                        Start your journey through electron configuration concepts and track your progress!
                    </p>
                    
                    <div class="journey-intro">
                        <div class="journey-visual">
                            <div class="journey-path">
                                <div class="path-step active" data-step="1">
                                    <div class="step-icon">1</div>
                                    <div class="step-label">Core Concepts</div>
                                </div>
                                <div class="path-line"></div>
                                <div class="path-step" data-step="2">
                                    <div class="step-icon">2</div>
                                    <div class="step-label">Advanced Rules</div>
                                </div>
                                <div class="path-line"></div>
                                <div class="path-step" data-step="3">
                                    <div class="step-icon">3</div>
                                    <div class="step-label">Exceptions</div>
                                </div>
                                <div class="path-line"></div>
                                <div class="path-step" data-step="4">
                                    <div class="step-icon">4</div>
                                    <div class="step-label">Applications</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="journey-description">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">Learning Path</h4>
                            <p style="color: var(--light); line-height: 1.6;">
                                Follow the structured learning path above. Click on concept tiles to learn more and track your progress. 
                                Each step builds upon the previous one, ensuring a solid foundation in electron configuration.
                            </p>
                            <div class="single-button">
                                <button class="tile-btn" onclick="startLearningJourney()">Begin Learning</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Learning Progress -->
                <div class="content-card">
                    <h3 style="color: var(--warning); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-star"></span>
                        Your Learning Progress
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px;">
                        Track your progress through the electron configuration concepts and unlock achievements as you learn!
                    </p>
                    
                    <div class="learning-progress">
                        <div class="progress-visual">
                            <div class="atom-progress">
                                <div class="nucleus" id="nucleusProgress">
                                    <span class="nucleus-text">0%</span>
                                </div>
                                <div class="electron-shells">
                                    <div class="shell shell-1" id="shell1"></div>
                                    <div class="shell shell-2" id="shell2"></div>
                                    <div class="shell shell-3" id="shell3"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="progress-stats">
                            <div class="stat-item">
                                <div class="stat-icon">🎯</div>
                                <div class="stat-content">
                                    <h4>Concepts Mastered</h4>
                                    <span class="stat-value" id="conceptsMastered">0/6</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">⭐</div>
                                <div class="stat-content">
                                    <h4>Current Streak</h4>
                                    <span class="stat-value" id="currentStreak">0 days</span>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon">🏆</div>
                                <div class="stat-content">
                                    <h4>Achievement Level</h4>
                                    <span class="stat-value" id="achievementLevel">Beginner</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="achievement-unlock">
                        <h4 style="color: var(--warning); margin-bottom: 15px;">Recent Achievements</h4>
                        <div class="achievements-list" id="achievementsList">
                            <div class="achievement-item locked">
                                <div class="achievement-icon">🔒</div>
                                <div class="achievement-content">
                                    <h5>First Steps</h5>
                                    <p>Complete your first concept</p>
                                </div>
                            </div>
                            <div class="achievement-item locked">
                                <div class="achievement-icon">🔒</div>
                                <div class="achievement-content">
                                    <h5>Halfway There</h5>
                                    <p>Master 3 concepts</p>
                                </div>
                            </div>
                            <div class="achievement-item locked">
                                <div class="achievement-icon">🔒</div>
                                <div class="achievement-content">
                                    <h5>Electron Master</h5>
                                    <p>Complete all concepts</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-container">
                        <button class="tile-btn" onclick="resetLearningProgress()">Reset Progress</button>
                        <button class="tile-btn secondary" onclick="exportLearningReport()">Export Report</button>
                    </div>
                </div>

                <!-- Electron Configuration Specifications -->
                <div class="content-card">
                    <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-electron"></span>
                        Electron Configuration Specifications
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px;">
                        Key learning objectives for mastering electron configuration principles
                    </p>
                    
                    <div class="specs-grid">
                        <div class="spec-category">
                            <h4 style="color: var(--warning); margin-bottom: 15px;">📚 Core Principles</h4>
                            <ul class="spec-list">
                                <li>Write electron configurations for elements up to Z=36</li>
                                <li>Understand the Aufbau principle and energy level order</li>
                                <li>Apply Hund's rule to degenerate orbitals</li>
                                <li>Explain the Pauli exclusion principle and opposite spins</li>
                            </ul>
                        </div>
                        
                        <div class="spec-category">
                            <h4 style="color: var(--success); margin-bottom: 15px;">🎯 Advanced Concepts</h4>
                            <ul class="spec-list">
                                <li>Explain exceptions like Cr and Cu configurations</li>
                                <li>Understand ion formation and oxidation states</li>
                                <li>Apply the octet rule to predict stability</li>
                                <li>Relate configuration to periodic trends</li>
                            </ul>
                        </div>
                        
                        <div class="spec-category">
                            <h4 style="color: var(--accent); margin-bottom: 15px;">🔬 Practical Skills</h4>
                            <ul class="spec-list">
                                <li>Use noble gas notation for configurations</li>
                                <li>Predict chemical properties from configurations</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Key Vocabulary -->
                <div class="content-card">
                    <h3 style="color: var(--warning); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-beaker"></span>
                        Key Vocabulary
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px;">
                        Essential terms and definitions for electron configuration
                    </p>
                    
                    <div class="vocabulary-grid">
                        <div class="vocab-item" onclick="showVocabDefinition('aufbau')">
                            <div class="vocab-term">Aufbau Principle</div>
                            <div class="vocab-preview">Electrons fill orbitals in order of increasing energy</div>
                        </div>
                        <div class="vocab-item" onclick="showVocabDefinition('hund')">
                            <div class="vocab-term">Hund's Rule</div>
                            <div class="vocab-preview">Electrons prefer parallel spins in degenerate orbitals</div>
                        </div>
                        <div class="vocab-item" onclick="showVocabDefinition('pauli')">
                            <div class="vocab-term">Pauli Exclusion</div>
                            <div class="vocab-preview">No two electrons can have identical quantum numbers; opposite spins required</div>
                        </div>
                        <div class="vocab-item" onclick="showVocabDefinition('degenerate')">
                            <div class="vocab-term">Degenerate Orbitals</div>
                            <div class="vocab-preview">Orbitals with the same energy level</div>
                        </div>
                        <div class="vocab-item" onclick="showVocabDefinition('valence')">
                            <div class="vocab-term">Valence Electrons</div>
                            <div class="vocab-preview">Electrons in the outermost shell</div>
                        </div>
                        <div class="vocab-item" onclick="showVocabDefinition('octet')">
                            <div class="vocab-term">Octet Rule</div>
                            <div class="vocab-preview">Atoms seek 8 valence electrons for stability</div>
                        </div>
                    </div>
                </div>

                <!-- Why It Matters -->
                <div class="content-card">
                    <h3 style="color: var(--success); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-beaker"></span>
                        Why Electron Configurations Matter
                    </h3>
                    <p style="color: var(--light); margin-bottom: 20px;">
                        Electron configurations determine an element's chemical properties, reactivity, and bonding behavior. Understanding these principles is essential for:
                    </p>
                    <div class="importance-grid">
                        <div class="importance-item">
                            <div class="importance-icon">🧪</div>
                            <h4>Chemical Reactions</h4>
                            <p>Predict how elements will react with each other</p>
                        </div>
                        <div class="importance-item">
                            <div class="importance-icon">📊</div>
                            <h4>Periodic Trends</h4>
                            <p>Understand patterns across the periodic table</p>
                        </div>
                        <div class="importance-item">
                            <div class="importance-icon">🔗</div>
                            <h4>Bonding Patterns</h4>
                            <p>Explain how atoms form molecules</p>
                        </div>
                        <div class="importance-item">
                            <div class="importance-icon">🏗️</div>
                            <h4>Material Design</h4>
                            <p>Create new materials with desired properties</p>
                        </div>
                    </div>
                </div>

                <!-- Progress Tracker -->
                <div class="content-card">
                    <h3 style="color: var(--warning); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span class="custom-emoji emoji-energy"></span>
                        Your Learning Progress
                    </h3>
                    <div class="progress-tracker">
                        <div class="progress-item" data-completed="false">
                            <span class="progress-checkbox">☐</span>
                            <span class="progress-text">Complete Overview</span>
                        </div>
                        <div class="progress-item" data-completed="false">
                            <span class="progress-checkbox">☐</span>
                            <span class="progress-text">Build 3 different atoms</span>
                        </div>
                        <div class="progress-item" data-completed="false">
                            <span class="progress-checkbox">☐</span>
                            <span class="progress-text">Understand learning objectives</span>
                        </div>
                        <div class="progress-item" data-completed="false">
                            <span class="progress-checkbox">☐</span>
                            <span class="progress-text">Explore importance section</span>
                        </div>
                    </div>
                    <button class="tile-btn" onclick="markProgress()">Mark Progress</button>
                </div>
            </div>
        </div>

        <!-- ======= Ion Formation Detailed Content ======= -->
        <div id="ionFormationContent" class="content-section" style="display: none;">
            <div class="content-header">
                <button class="btn ghost" onclick="hideDetailedContent()" style="display: flex; align-items: center; gap: 8px;">
                    <span class="custom-emoji emoji-arrow-left"></span>
                    Back to Study Guide
                </button>
                <h1 class="content-title">
                    <span class="custom-emoji emoji-beaker"></span>
                    Ion Formation
                </h1>
                <p class="content-subtitle">Understanding how atoms gain and lose electrons to form ions</p>
            </div>

            <!-- Learning Objectives -->
            <div class="objectives-section">
                <h3>Learning Objectives</h3>
                <p>By the end of this section, you will be able to:</p>
                <div class="objectives-grid">
                    <div class="objective-card">
                        <h4>🎯 Cation Formation</h4>
                        <p>Explain how metals lose electrons to form positive ions</p>
                        <ul>
                            <li>Understand electron loss from s and d orbitals</li>
                            <li>Predict ion charges for main group metals</li>
                            <li>Explain transition metal ion formation</li>
                        </ul>
                    </div>
                    <div class="objective-card">
                        <h4>⚡ Anion Formation</h4>
                        <p>Describe how non-metals gain electrons to form negative ions</p>
                        <ul>
                            <li>Understand electron gain to achieve noble gas configuration</li>
                            <li>Predict ion charges for non-metals</li>
                            <li>Explain ionic radius changes</li>
                        </ul>
                    </div>
                    <div class="objective-card">
                        <h4>🔬 Transition Metals</h4>
                        <p>Analyze the complex ion formation of transition metals</p>
                        <ul>
                            <li>Understand s-orbital electron loss first</li>
                            <li>Explain variable oxidation states</li>
                            <li>Predict common ion charges</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Essential Vocabulary -->
            <div class="vocabulary-section">
                <h3>Essential Vocabulary</h3>
                <div class="vocabulary-grid">
                    <div class="vocab-item">
                        <strong>Ion</strong>
                        <p>An atom or molecule with a net electric charge due to the loss or gain of electrons</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Cation</strong>
                        <p>A positively charged ion formed when an atom loses electrons</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Anion</strong>
                        <p>A negatively charged ion formed when an atom gains electrons</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Ionic Radius</strong>
                        <p>The size of an ion, which changes when electrons are gained or lost</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Oxidation State</strong>
                        <p>The charge an atom would have if all bonds were ionic</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Noble Gas Configuration</strong>
                        <p>The stable electron configuration of noble gases (full outer shell)</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Isoelectronic</strong>
                        <p>Ions or atoms with the same number of electrons</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Variable Oxidation States</strong>
                        <p>Transition metals that can form ions with different charges</p>
                    </div>
                </div>
            </div>

            <!-- Cation Formation Overview -->
            <div class="concept-section">
                <h3>🔬 Cation Formation</h3>
                <p>Cations are formed when atoms <strong>lose electrons</strong>. This typically occurs with metals, which have relatively low ionization energies.</p>
                
                <div class="ion-formation-grid">
                    <div class="formation-card">
                        <h4>Main Group Metals</h4>
                        <p>Lose electrons from their outermost shell to achieve noble gas configuration</p>
                        <div class="example-box">
                            <strong>Example: Sodium (Na)</strong>
                            <p>Na: 1s² 2s² 2p⁶ 3s¹ → Na⁺: 1s² 2s² 2p⁶</p>
                            <p>Loses 1 electron from 3s orbital</p>
                        </div>
                    </div>
                    <div class="formation-card">
                        <h4>Transition Metals</h4>
                        <p>Lose electrons from s orbitals first, then d orbitals</p>
                        <div class="example-box">
                            <strong>Example: Iron (Fe)</strong>
                            <p>Fe: [Ar] 4s² 3d⁶ → Fe²⁺: [Ar] 3d⁶</p>
                            <p>Loses 2 electrons from 4s orbital</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Anion Formation Overview -->
            <div class="concept-section">
                <h3>⚡ Anion Formation</h3>
                <p>Anions are formed when atoms <strong>gain electrons</strong>. This typically occurs with non-metals, which have high electron affinities.</p>
                
                <div class="ion-formation-grid">
                    <div class="formation-card">
                        <h4>Halogens</h4>
                        <p>Gain 1 electron to achieve noble gas configuration</p>
                        <div class="example-box">
                            <strong>Example: Chlorine (Cl)</strong>
                            <p>Cl: [Ne] 3s² 3p⁵ → Cl⁻: [Ne] 3s² 3p⁶</p>
                            <p>Gains 1 electron in 3p orbital</p>
                        </div>
                    </div>
                    <div class="formation-card">
                        <h4>Chalcogens</h4>
                        <p>Gain 2 electrons to achieve noble gas configuration</p>
                        <div class="example-box">
                            <strong>Example: Oxygen (O)</strong>
                            <p>O: [He] 2s² 2p⁴ → O²⁻: [He] 2s² 2p⁶</p>
                            <p>Gains 2 electrons in 2p orbital</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Demonstrations -->
            <div class="interactive-section">
                <h3>🎮 Interactive Ion Formation Demonstrations</h3>
                <p>Explore how different elements form ions by gaining or losing electrons.</p>
                
                <!-- Cation Formation Demo -->
                <div class="ion-demo">
                    <h4>🔬 Cation Formation: Sodium (Na → Na⁺)</h4>
                    <div class="demo-layout">
                        <div class="building" id="sodiumBuilding">
                            <!-- Shell n=3 (Highest Energy - Top) -->
                            <div class="floor" data-n="3">
                                <div class="floor-label">Shell n=3 (Highest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="3s">
                                        <div class="wing-title">3s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3s" data-index="0">
                                                <div class="unit-label">3s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3s-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=2 -->
                            <div class="floor" data-n="2">
                                <div class="floor-label">Shell n=2</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="2s">
                                        <div class="wing-title">2s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2s" data-index="0">
                                                <div class="unit-label">2s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-p" data-sub="2p">
                                        <div class="wing-title">2p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2p" data-index="0">
                                                <div class="unit-label">2px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="1">
                                                <div class="unit-label">2py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="2">
                                                <div class="unit-label">2pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-6">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=1 (Lowest Energy - Bottom) -->
                            <div class="floor" data-n="1">
                                <div class="floor-label">Shell n=1 (Lowest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="1s">
                                        <div class="wing-title">1s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="1s" data-index="0">
                                                <div class="unit-label">1s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="1s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="1s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="config-display">
                            <h5>Electron Configuration</h5>
                            <div class="config-text">
                                <div class="config-standard" id="sodiumStandard">Na: 1s² 2s² 2p⁶ 3s¹</div>
                                <div class="config-actual" id="sodiumActual">Na⁺: 1s² 2s² 2p⁶</div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-controls">
                        <button class="btn primary" onclick="showSodiumCation()">Show Cation Formation</button>
                        <button class="btn secondary" onclick="resetSodiumDemo()">Reset</button>
                    </div>
                </div>

                <!-- Anion Formation Demo -->
                <div class="ion-demo">
                    <h4>⚡ Anion Formation: Chlorine (Cl → Cl⁻)</h4>
                    <div class="demo-layout">
                        <div class="building" id="chlorineBuilding">
                            <!-- Shell n=3 (Highest Energy - Top) -->
                            <div class="floor" data-n="3">
                                <div class="floor-label">Shell n=3 (Highest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="3s">
                                        <div class="wing-title">3s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3s" data-index="0">
                                                <div class="unit-label">3s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-p" data-sub="3p">
                                        <div class="wing-title">3p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3p" data-index="0">
                                                <div class="unit-label">3px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3p" data-index="1">
                                                <div class="unit-label">3py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3p" data-index="2">
                                                <div class="unit-label">3pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-6"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=2 -->
                            <div class="floor" data-n="2">
                                <div class="floor-label">Shell n=2</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="2s">
                                        <div class="wing-title">2s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2s" data-index="0">
                                                <div class="unit-label">2s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-p" data-sub="2p">
                                        <div class="wing-title">2p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2p" data-index="0">
                                                <div class="unit-label">2px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="1">
                                                <div class="unit-label">2py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="2">
                                                <div class="unit-label">2pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-6">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=1 (Lowest Energy - Bottom) -->
                            <div class="floor" data-n="1">
                                <div class="floor-label">Shell n=1 (Lowest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="1s">
                                        <div class="wing-title">1s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="1s" data-index="0">
                                                <div class="unit-label">1s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="1s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="1s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="config-display">
                            <h5>Electron Configuration</h5>
                            <div class="config-text">
                                <div class="config-standard" id="chlorineStandard">Cl: [Ne] 3s² 3p⁵</div>
                                <div class="config-actual" id="chlorineActual">Cl⁻: [Ne] 3s² 3p⁶</div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-controls">
                        <button class="btn primary" onclick="showChlorineAnion()">Show Anion Formation</button>
                        <button class="btn secondary" onclick="resetChlorineDemo()">Reset</button>
                    </div>
                </div>

                <!-- Transition Metal Demo -->
                <div class="ion-demo">
                    <h4>🔬 Transition Metal: Iron (Fe → Fe²⁺)</h4>
                    <div class="demo-layout">
                        <div class="building" id="ironBuilding">
                            <!-- Shell n=4 (Highest Energy - Top) -->
                            <div class="floor" data-n="4">
                                <div class="floor-label">Shell n=4 (Highest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="4s">
                                        <div class="wing-title">4s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="4s" data-index="0">
                                                <div class="unit-label">4s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="4s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="4s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=3 -->
                            <div class="floor" data-n="3">
                                <div class="floor-label">Shell n=3</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="3s">
                                        <div class="wing-title">3s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3s" data-index="0">
                                                <div class="unit-label">3s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-p" data-sub="3p">
                                        <div class="wing-title">3p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3p" data-index="0">
                                                <div class="unit-label">3px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3p" data-index="1">
                                                <div class="unit-label">3py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3p" data-index="2">
                                                <div class="unit-label">3pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3p-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3p-6">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-d" data-sub="3d">
                                        <div class="wing-title">3d wing — <span class="mini">ℓ=2 (d)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="3d" data-index="0">
                                                <div class="unit-label">3dxy</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3d-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3d-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3d" data-index="1">
                                                <div class="unit-label">3dxz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3d-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3d-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="3d" data-index="2">
                                                <div class="unit-label">3dyz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="3d-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="3d-6">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=2 -->
                            <div class="floor" data-n="2">
                                <div class="floor-label">Shell n=2</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="2s">
                                        <div class="wing-title">2s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2s" data-index="0">
                                                <div class="unit-label">2s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-p" data-sub="2p">
                                        <div class="wing-title">2p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2p" data-index="0">
                                                <div class="unit-label">2px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-2">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="1">
                                                <div class="unit-label">2py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-3">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-4">↓</div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="2">
                                                <div class="unit-label">2pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-5">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-6">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Shell n=1 (Lowest Energy - Bottom) -->
                            <div class="floor" data-n="1">
                                <div class="floor-label">Shell n=1 (Lowest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="1s">
                                        <div class="wing-title">1s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="1s" data-index="0">
                                                <div class="unit-label">1s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="1s-1">↑</div>
                                                    <div class="slot" data-slot="1" data-orbital="1s-2">↓</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="config-display">
                            <h5>Electron Configuration</h5>
                            <div class="config-text">
                                <div class="config-standard" id="ironStandard">Fe: [Ar] 4s² 3d⁶</div>
                                <div class="config-actual" id="ironActual">Fe²⁺: [Ar] 3d⁶</div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-controls">
                        <button class="btn primary" onclick="showIronCation()">Show Fe²⁺ Formation</button>
                        <button class="btn secondary" onclick="resetIronDemo()">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Vocabulary Quiz -->
            <div class="quiz-section">
                <h3>📝 Vocabulary Quiz</h3>
                <p>Test your understanding of ion formation terminology.</p>
                <div class="quiz-container" id="ionVocabQuiz">
                    <div class="quiz-question">
                        <h4>Question 1: What is a cation?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q1" value="a"> A negatively charged ion</label>
                            <label><input type="radio" name="q1" value="b"> A positively charged ion</label>
                            <label><input type="radio" name="q1" value="c"> A neutral atom</label>
                            <label><input type="radio" name="q1" value="d"> A noble gas</label>
                        </div>
                    </div>
                    <div class="quiz-question">
                        <h4>Question 2: How do transition metals typically lose electrons?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q2" value="a"> From d orbitals first</label>
                            <label><input type="radio" name="q2" value="b"> From s orbitals first, then d orbitals</label>
                            <label><input type="radio" name="q2" value="c"> From p orbitals first</label>
                            <label><input type="radio" name="q2" value="d"> Randomly from any orbital</label>
                        </div>
                    </div>
                    <div class="quiz-question">
                        <h4>Question 3: What happens to ionic radius when an atom becomes a cation?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q3" value="a"> It increases</label>
                            <label><input type="radio" name="q3" value="b"> It decreases</label>
                            <label><input type="radio" name="q3" value="c"> It stays the same</label>
                            <label><input type="radio" name="q3" value="d"> It becomes zero</label>
                        </div>
                    </div>
                    <div class="quiz-question">
                        <h4>Question 4: Which element forms a -2 anion?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q4" value="a"> Fluorine</label>
                            <label><input type="radio" name="q4" value="b"> Oxygen</label>
                            <label><input type="radio" name="q4" value="c"> Nitrogen</label>
                            <label><input type="radio" name="q4" value="d"> Carbon</label>
                        </div>
                    </div>
                    <div class="quiz-question">
                        <h4>Question 5: What is the electron configuration of Na⁺?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="q5" value="a"> 1s² 2s² 2p⁶ 3s¹</label>
                            <label><input type="radio" name="q5" value="b"> 1s² 2s² 2p⁶</label>
                            <label><input type="radio" name="q5" value="c"> 1s² 2s² 2p⁶ 3s²</label>
                            <label><input type="radio" name="q5" value="d"> 1s² 2s² 2p⁵</label>
                        </div>
                    </div>
                    <div class="quiz-actions">
                        <button class="btn primary" onclick="checkIonVocabQuiz()">Submit Quiz</button>
                        <button class="btn secondary" onclick="resetIonVocabQuiz()">Reset</button>
                    </div>
                    <div class="quiz-results" id="ionVocabResults" style="display: none;"></div>
                </div>
            </div>

            <!-- Quick Understanding Check -->
            <div class="understanding-section">
                <h3>🧠 Quick Understanding Check</h3>
                <p>Apply your knowledge of ion formation to solve these problems.</p>
                <div class="understanding-container" id="ionUnderstandingCheck">
                    <div class="understanding-question">
                        <h4>Question 1: Predict the ion formed by magnesium (Mg)</h4>
                        <p><strong>Given:</strong> Mg has electron configuration [Ne] 3s²</p>
                        <div class="understanding-options">
                            <label><input type="radio" name="uq1" value="a"> Mg⁺ (loses 1 electron)</label>
                            <label><input type="radio" name="uq1" value="b"> Mg²⁺ (loses 2 electrons)</label>
                            <label><input type="radio" name="uq1" value="c"> Mg⁻ (gains 1 electron)</label>
                            <label><input type="radio" name="uq1" value="d"> Mg²⁻ (gains 2 electrons)</label>
                        </div>
                    </div>
                    <div class="understanding-question">
                        <h4>Question 2: Which ion has the same electron configuration as Argon?</h4>
                        <div class="understanding-options">
                            <label><input type="radio" name="uq2" value="a"> Cl⁻</label>
                            <label><input type="radio" name="uq2" value="b"> K⁺</label>
                            <label><input type="radio" name="uq2" value="c"> Both Cl⁻ and K⁺</label>
                            <label><input type="radio" name="uq2" value="d"> Neither</label>
                        </div>
                    </div>
                    <div class="understanding-question">
                        <h4>Question 3: What is the electron configuration of Fe³⁺?</h4>
                        <p><strong>Given:</strong> Fe has electron configuration [Ar] 4s² 3d⁶</p>
                        <div class="understanding-options">
                            <label><input type="radio" name="uq3" value="a"> [Ar] 4s² 3d³</label>
                            <label><input type="radio" name="uq3" value="b"> [Ar] 3d⁵</label>
                            <label><input type="radio" name="uq3" value="c"> [Ar] 4s¹ 3d⁶</label>
                            <label><input type="radio" name="uq3" value="d"> [Ar] 4s² 3d⁶</label>
                        </div>
                    </div>
                    <div class="understanding-actions">
                        <button class="btn primary" onclick="checkIonUnderstanding()">Submit Answers</button>
                        <button class="btn secondary" onclick="resetIonUnderstanding()">Reset</button>
                    </div>
                    <div class="understanding-results" id="ionUnderstandingResults" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- ======= Exceptions Detailed Content ======= -->
        <div id="exceptionsContent" class="content-section" style="display: none;">
            <div class="content-header">
                <button class="btn ghost" onclick="hideDetailedContent()" style="display: flex; align-items: center; gap: 8px;">
                    <span>←</span> Back to Study Tiles
                </button>
                <h2>⚠️ Electron Configuration Exceptions</h2>
                <p>Understanding special cases where elements break standard rules for enhanced stability</p>
            </div>

            <!-- Learning Objectives -->
            <div class="objectives-section">
                <h3>🎯 Learning Objectives</h3>
                <div class="objectives-grid">
                    <div class="objective-card">
                        <h4>Exception Recognition</h4>
                        <p>Identify which elements have electron configuration exceptions</p>
                    </div>
                    <div class="objective-card">
                        <h4>Stability Principles</h4>
                        <p>Understand why half-filled and filled subshells provide extra stability</p>
                    </div>
                    <div class="objective-card">
                        <h4>Pattern Recognition</h4>
                        <p>Recognize the patterns in d-block exceptions (Cr, Cu, Mo, Ag, etc.)</p>
                    </div>
                    <div class="objective-card">
                        <h4>Configuration Writing</h4>
                        <p>Write correct electron configurations for exception elements</p>
                    </div>
                </div>
            </div>

            <!-- Essential Vocabulary -->
            <div class="vocabulary-section">
                <h3>📚 Essential Vocabulary</h3>
                <div class="vocabulary-grid">
                    <div class="vocab-card">
                        <h4>Exception Terms</h4>
                        <div class="vocab-item">
                            <strong>Exception:</strong> Element that doesn't follow standard Aufbau principle
                        </div>
                        <div class="vocab-item">
                            <strong>Half-filled subshell:</strong> Subshell with exactly half its maximum electrons
                        </div>
                        <div class="vocab-item">
                            <strong>Filled subshell:</strong> Subshell with its maximum number of electrons
                        </div>
                    </div>
                    <div class="vocab-card">
                        <h4>Stability Terms</h4>
                        <div class="vocab-item">
                            <strong>Extra stability:</strong> Additional energy stabilization from special configurations
                        </div>
                        <div class="vocab-item">
                            <strong>d-block elements:</strong> Transition metals with partially filled d orbitals
                        </div>
                        <div class="vocab-item">
                            <strong>Stability detour:</strong> Deviation from standard filling for greater stability
                        </div>
                    </div>
                    <div class="vocab-card">
                        <h4>Configuration Terms</h4>
                        <div class="vocab-item">
                            <strong>Standard configuration:</strong> What Aufbau principle predicts
                        </div>
                        <div class="vocab-item">
                            <strong>Actual configuration:</strong> What the element actually has
                        </div>
                        <div class="vocab-item">
                            <strong>Noble gas core:</strong> [Noble gas] notation for inner electrons
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exception Elements Overview -->
            <div class="content-card">
                <h3>🔍 Exception Elements Overview</h3>
                <p>These elements break the standard Aufbau principle to achieve greater stability through half-filled or filled subshells:</p>
                
                <div class="exceptions-grid">
                    <div class="exception-item">
                        <h4>Chromium (Cr) - Z=24</h4>
                        <div class="config-comparison">
                            <div class="config-standard">
                                <strong>Standard:</strong> [Ar] 4s² 3d⁴
                            </div>
                            <div class="config-actual">
                                <strong>Actual:</strong> [Ar] 4s¹ 3d⁵
                            </div>
                        </div>
                        <p><strong>Why:</strong> Half-filled 3d subshell (5 electrons) provides extra stability</p>
                    </div>

                    <div class="exception-item">
                        <h4>Copper (Cu) - Z=29</h4>
                        <div class="config-comparison">
                            <div class="config-standard">
                                <strong>Standard:</strong> [Ar] 4s² 3d⁹
                            </div>
                            <div class="config-actual">
                                <strong>Actual:</strong> [Ar] 4s¹ 3d¹⁰
                            </div>
                        </div>
                        <p><strong>Why:</strong> Filled 3d subshell (10 electrons) provides maximum stability</p>
                    </div>

                    <div class="exception-item">
                        <h4>Molybdenum (Mo) - Z=42</h4>
                        <div class="config-comparison">
                            <div class="config-standard">
                                <strong>Standard:</strong> [Kr] 5s² 4d⁴
                            </div>
                            <div class="config-actual">
                                <strong>Actual:</strong> [Kr] 5s¹ 4d⁵
                            </div>
                        </div>
                        <p><strong>Why:</strong> Half-filled 4d subshell provides extra stability</p>
                    </div>

                    <div class="exception-item">
                        <h4>Silver (Ag) - Z=47</h4>
                        <div class="config-comparison">
                            <div class="config-standard">
                                <strong>Standard:</strong> [Kr] 5s² 4d⁹
                            </div>
                            <div class="config-actual">
                                <strong>Actual:</strong> [Kr] 5s¹ 4d¹⁰
                            </div>
                        </div>
                        <p><strong>Why:</strong> Filled 4d subshell provides maximum stability</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Exception Demonstrations -->
            <div class="content-card">
                <h3>🎮 Interactive Exception Demonstrations</h3>
                
                <!-- Chromium Exception Demo -->
                <div class="interactive-section">
                    <h4>Chromium (Cr) Exception</h4>
                    <p>Watch how Chromium achieves stability by moving one electron from 4s to 3d:</p>
                    
                    <div class="exception-demo">
                        <div class="demo-layout">
                            <div class="building" id="chromiumBuilding">
                                <div class="floor">
                                    <div class="floor-label">Shell n=3</div>
                                    <div class="wings">
                                        <div class="wing">
                                            <div class="wing-title">3d orbitals <span class="degenerate-label">DEGENERATE</span></div>
                                            <div class="units">
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d1"></div>
                                                        <div class="slot" data-orbital="3d2"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d3"></div>
                                                        <div class="slot" data-orbital="3d4"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d5"></div>
                                                        <div class="slot" data-orbital="3d6"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d7"></div>
                                                        <div class="slot" data-orbital="3d8"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d9"></div>
                                                        <div class="slot" data-orbital="3d10"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="floor">
                                    <div class="floor-label">Shell n=4</div>
                                    <div class="wings">
                                        <div class="wing">
                                            <div class="wing-title">4s orbital</div>
                                            <div class="units">
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="4s1"></div>
                                                        <div class="slot" data-orbital="4s2"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="config-display">
                                <h5>Configuration</h5>
                                <div class="config-text">
                                    Standard: <span class="config-standard" id="chromiumStandard">4s² 3d⁴</span>
                                </div>
                                <div class="config-text">
                                    Actual: <span class="config-actual" id="chromiumActual">4s¹ 3d⁵</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="demo-controls">
                            <button class="tile-btn" onclick="showChromiumException()">Show Cr Exception</button>
                            <button class="tile-btn secondary" onclick="resetChromiumDemo()">Reset</button>
                        </div>
                    </div>
                </div>

                <!-- Copper Exception Demo -->
                <div class="interactive-section">
                    <h4>Copper (Cu) Exception</h4>
                    <p>Watch how Copper achieves stability by moving one electron from 4s to 3d:</p>
                    
                    <div class="exception-demo">
                        <div class="demo-layout">
                            <div class="building" id="copperBuilding">
                                <div class="floor">
                                    <div class="floor-label">Shell n=3</div>
                                    <div class="wings">
                                        <div class="wing">
                                            <div class="wing-title">3d orbitals <span class="degenerate-label">DEGENERATE</span></div>
                                            <div class="units">
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d1"></div>
                                                        <div class="slot" data-orbital="3d2"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d3"></div>
                                                        <div class="slot" data-orbital="3d4"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d5"></div>
                                                        <div class="slot" data-orbital="3d6"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d7"></div>
                                                        <div class="slot" data-orbital="3d8"></div>
                                                    </div>
                                                </div>
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="3d9"></div>
                                                        <div class="slot" data-orbital="3d10"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="floor">
                                    <div class="floor-label">Shell n=4</div>
                                    <div class="wings">
                                        <div class="wing">
                                            <div class="wing-title">4s orbital</div>
                                            <div class="units">
                                                <div class="unit">
                                                    <div class="slots">
                                                        <div class="slot" data-orbital="4s1"></div>
                                                        <div class="slot" data-orbital="4s2"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="config-display">
                                <h5>Configuration</h5>
                                <div class="config-text">
                                    Standard: <span class="config-standard" id="copperStandard">4s² 3d⁹</span>
                                </div>
                                <div class="config-text">
                                    Actual: <span class="config-actual" id="copperActual">4s¹ 3d¹⁰</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="demo-controls">
                            <button class="tile-btn" onclick="showCopperException()">Show Cu Exception</button>
                            <button class="tile-btn secondary" onclick="resetCopperDemo()">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vocabulary Quiz -->
            <div class="vocab-quiz-section">
                <h3>🧠 Vocabulary Quiz</h3>
                <div class="quiz-container">
                    <div class="quiz-question">
                        <h4>Question 1: What is an electron configuration exception?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="exceptions1" value="a"> A) An element that follows Aufbau principle perfectly</label>
                            <label><input type="radio" name="exceptions1" value="b"> B) An element that breaks standard rules for greater stability</label>
                            <label><input type="radio" name="exceptions1" value="c"> C) An element with no d electrons</label>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 2: Why does Chromium have the configuration [Ar] 4s¹ 3d⁵?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="exceptions2" value="a"> A) It follows the standard Aufbau principle</label>
                            <label><input type="radio" name="exceptions2" value="b"> B) Half-filled 3d subshell provides extra stability</label>
                            <label><input type="radio" name="exceptions2" value="c"> C) It has too many electrons</label>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 3: What configuration does Copper (Cu) actually have?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="exceptions3" value="a"> A) [Ar] 4s² 3d⁹</label>
                            <label><input type="radio" name="exceptions3" value="b"> B) [Ar] 4s¹ 3d¹⁰</label>
                            <label><input type="radio" name="exceptions3" value="c"> C) [Ar] 4s² 3d⁸</label>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 4: What provides extra stability in exception elements?</h4>
                        <div class="quiz-options">
                            <label><input type="radio" name="exceptions4" value="a"> A) Empty subshells</label>
                            <label><input type="radio" name="exceptions4" value="b"> B) Half-filled and filled subshells</label>
                            <label><input type="radio" name="exceptions4" value="c"> C) Random electron arrangements</label>
                        </div>
                    </div>

                    <div class="quiz-controls">
                        <button class="tile-btn" onclick="checkExceptionsQuiz()">Check Answers</button>
                        <button class="tile-btn secondary" onclick="resetExceptionsQuiz()">Reset Quiz</button>
                    </div>

                    <div class="pauli-feedback" id="exceptionsResults" style="display: none;"></div>
                </div>
            </div>

            <!-- Quick Understanding Check -->
            <div class="content-card">
                <h3>⚡ Quick Understanding Check</h3>
                <div class="understanding-quiz">
                    <div class="quiz-question">
                        <h4>Question 1: Which element has the exception configuration [Ar] 4s¹ 3d⁵?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkExceptionAnswer(1, 'a')">A) Manganese (Mn)</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(1, 'b')">B) Chromium (Cr)</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(1, 'c')">C) Iron (Fe)</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 2: Why do exception elements break the Aufbau principle?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkExceptionAnswer(2, 'a')">A) They have too many electrons</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(2, 'b')">B) Half-filled and filled subshells provide extra stability</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(2, 'c')">C) They follow different rules</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 3: What is the actual configuration of Silver (Ag)?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkExceptionAnswer(3, 'a')">A) [Kr] 5s² 4d⁹</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(3, 'b')">B) [Kr] 5s¹ 4d¹⁰</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(3, 'c')">C) [Kr] 5s² 4d⁸</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 4: How many electrons are in a half-filled d subshell?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkExceptionAnswer(4, 'a')">A) 3 electrons</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(4, 'b')">B) 5 electrons</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(4, 'c')">C) 7 electrons</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 5: Which of these is NOT an exception element?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkExceptionAnswer(5, 'a')">A) Chromium (Cr)</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(5, 'b')">B) Copper (Cu)</button>
                            <button class="quiz-option" onclick="checkExceptionAnswer(5, 'c')">C) Calcium (Ca)</button>
                        </div>
                    </div>
                </div>

                <div class="quiz-results" id="exceptionQuizResults" style="display: none;">
                    <h4 style="color: var(--success);">Quiz Results</h4>
                    <p>Score: <span id="exceptionQuizScore">0</span>/5</p>
                    <p id="exceptionQuizFeedback"></p>
                </div>

                <div class="quiz-controls">
                    <button class="tile-btn" onclick="showExceptionQuizResults()">Show Results</button>
                    <button class="tile-btn secondary" onclick="resetExceptionQuiz()">Reset Quiz</button>
                </div>
            </div>
        </div>

        <!-- ======= Assessment Detailed Content ======= -->
        <div id="assessmentContent" class="content-section" style="display: none;">
            <div class="content-header">
                <button class="btn ghost" onclick="hideDetailedContent()" style="display: flex; align-items: center; gap: 8px;">
                    <span class="custom-emoji emoji-arrow-left"></span>
                    Back to Study Guide
                </button>
                <h1 class="content-title">
                    <span class="custom-emoji emoji-nucleus"></span>
                    A-Level Edexcel Pearson Assessment
                </h1>
                <p class="content-subtitle">Comprehensive examination-style assessments with detailed mark schemes</p>
            </div>

            <!-- Assessment Overview -->
            <div class="objectives-section">
                <h3>📋 Electron Configuration Assessment Structure</h3>
                <p>Comprehensive assessments focused specifically on electron configuration topics:</p>
                <div class="objectives-grid">
                    <div class="objective-card">
                        <h4>📄 Paper 1: Core Principles & Rules</h4>
                        <p><strong>Duration:</strong> 45 minutes | <strong>Marks:</strong> 50</p>
                        <ul>
                            <li>Aufbau Principle & Orbital Filling</li>
                            <li>Hund's Rule & Electron Spin</li>
                            <li>Pauli Exclusion Principle</li>
                            <li>Orbital Diagrams & Notation</li>
                            <li>Energy Level Ordering</li>
                        </ul>
                    </div>
                    <div class="objective-card">
                        <h4>🧪 Paper 2: Exceptions & Complex Cases</h4>
                        <p><strong>Duration:</strong> 45 minutes | <strong>Marks:</strong> 50</p>
                        <ul>
                            <li>Transition Metal Exceptions (Cr, Cu, Mo, Ag)</li>
                            <li>Half-filled & Filled Subshell Stability</li>
                            <li>d-block Configuration Patterns</li>
                            <li>Exception Recognition & Explanation</li>
                            <li>Stability Factors</li>
                        </ul>
                    </div>
                    <div class="objective-card">
                        <h4>🔬 Paper 3: Ion Formation & Applications</h4>
                        <p><strong>Duration:</strong> 60 minutes | <strong>Marks:</strong> 60</p>
                        <ul>
                            <li>Cation Formation (Main Group & Transition Metals)</li>
                            <li>Anion Formation & Noble Gas Configuration</li>
                            <li>Isoelectronic Species</li>
                            <li>Ionic Radius Changes</li>
                            <li>Magnetic Properties Prediction</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Question Types Overview -->
            <div class="vocabulary-section">
                <h3>📝 Electron Configuration Question Types</h3>
                <div class="vocabulary-grid">
                    <div class="vocab-item">
                        <strong>Configuration Writing Questions</strong>
                        <p>2-4 marks each - Write electron configurations for given elements, including exceptions.</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Orbital Diagram Questions</strong>
                        <p>3-6 marks each - Draw orbital diagrams showing electron arrangement and spin.</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Exception Explanation Questions</strong>
                        <p>4-8 marks each - Explain why certain elements have unusual configurations.</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Ion Formation Questions</strong>
                        <p>3-6 marks each - Predict and write configurations for ions formed from neutral atoms.</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Comparison & Analysis Questions</strong>
                        <p>5-10 marks each - Compare configurations, identify patterns, and analyze trends.</p>
                    </div>
                    <div class="vocab-item">
                        <strong>Application Questions</strong>
                        <p>4-8 marks each - Apply configuration knowledge to predict properties and behavior.</p>
                    </div>
                </div>
            </div>

            <!-- Paper Selection -->
            <div class="interactive-section">
                <h3>🎯 Select Your Assessment</h3>
                <p>Choose a paper to begin your Edexcel-style examination practice:</p>
                
                <div class="ion-formation-grid">
                    <div class="formation-card">
                        <h4>📄 Paper 1: Core Principles & Rules</h4>
                        <p>Master the fundamental principles of electron configuration</p>
                        <div class="example-box">
                            <strong>Key Topics:</strong>
                            <p>• Aufbau principle application<br>
                            • Hund's rule & electron spin<br>
                            • Pauli exclusion principle<br>
                            • Orbital diagrams & notation</p>
                        </div>
                        <div class="demo-controls">
                            <button class="btn primary" onclick="startPaper1()">Start Paper 1</button>
                            <button class="btn secondary" onclick="viewPaper1MarkScheme()">View Mark Scheme</button>
                        </div>
                    </div>
                    <div class="formation-card">
                        <h4>🧪 Paper 2: Exceptions & Complex Cases</h4>
                        <p>Understand and explain electron configuration exceptions</p>
                        <div class="example-box">
                            <strong>Key Topics:</strong>
                            <p>• Transition metal exceptions (Cr, Cu)<br>
                            • Half-filled & filled subshell stability<br>
                            • d-block configuration patterns<br>
                            • Exception recognition & explanation</p>
                        </div>
                        <div class="demo-controls">
                            <button class="btn primary" onclick="startPaper2()">Start Paper 2</button>
                            <button class="btn secondary" onclick="viewPaper2MarkScheme()">View Mark Scheme</button>
                        </div>
                    </div>
                    <div class="formation-card">
                        <h4>🔬 Paper 3: Ion Formation & Applications</h4>
                        <p>Apply electron configuration knowledge to ion formation</p>
                        <div class="example-box">
                            <strong>Key Topics:</strong>
                            <p>• Cation & anion formation<br>
                            • Noble gas configuration<br>
                            • Isoelectronic species<br>
                            • Magnetic properties prediction</p>
                        </div>
                        <div class="demo-controls">
                            <button class="btn primary" onclick="startPaper3()">Start Paper 3</button>
                            <button class="btn secondary" onclick="viewPaper3MarkScheme()">View Mark Scheme</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sample Questions Preview -->
            <div class="quiz-section">
                <h3>📚 Sample Questions Preview</h3>
                <p>Here are examples of the question types you'll encounter in each paper:</p>
                
                <!-- Paper 1 Sample -->
                <div class="quiz-container">
                    <h4>📄 Paper 1 Sample Question</h4>
                    <div class="quiz-question">
                        <h4>Question 1 (a) [2 marks]</h4>
                        <p>Write the electron configuration of chromium (Cr) and explain why it differs from the expected configuration based on the Aufbau principle.</p>
                        <div class="mark-scheme">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> [Ar] 4s¹ 3d⁵ (1 mark)</p>
                            <p><strong>M2:</strong> Half-filled 3d subshell provides extra stability (1 mark)</p>
                        </div>
                    </div>
                </div>

                <!-- Paper 2 Sample -->
                <div class="quiz-container">
                    <h4>🧪 Paper 2 Sample Question</h4>
                    <div class="quiz-question">
                        <h4>Question 2 (b) [4 marks]</h4>
                        <p>Explain why copper (Cu) has the electron configuration [Ar] 4s¹ 3d¹⁰ instead of the expected [Ar] 4s² 3d⁹ configuration.</p>
                        <div class="mark-scheme">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Filled 3d subshell provides extra stability (1 mark)</p>
                            <p><strong>M2:</strong> Energy difference between 4s and 3d orbitals is small (1 mark)</p>
                            <p><strong>M3:</strong> Filled subshells have lower energy than partially filled ones (1 mark)</p>
                            <p><strong>M4:</strong> This is an exception to the Aufbau principle (1 mark)</p>
                        </div>
                    </div>
                </div>

                <!-- Paper 3 Sample -->
                <div class="quiz-container">
                    <h4>🔬 Paper 3 Sample Question</h4>
                    <div class="quiz-question">
                        <h4>Question 3 (c) [5 marks]</h4>
                        <p>Iron (Fe) has the electron configuration [Ar] 4s² 3d⁶. Write the electron configuration for Fe²⁺ and Fe³⁺ ions, explaining the order of electron loss.</p>
                        <div class="mark-scheme">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Fe²⁺: [Ar] 3d⁶ (1 mark)</p>
                            <p><strong>M2:</strong> Fe³⁺: [Ar] 3d⁵ (1 mark)</p>
                            <p><strong>M3:</strong> 4s electrons are lost first (1 mark)</p>
                            <p><strong>M4:</strong> 4s orbitals are higher in energy than 3d orbitals (1 mark)</p>
                            <p><strong>M5:</strong> Then 3d electrons are lost to form Fe³⁺ (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assessment Instructions -->
            <div class="understanding-section">
                <h3>📋 Assessment Instructions</h3>
                <div class="understanding-container">
                    <div class="understanding-question">
                        <h4>Before You Begin:</h4>
                        <ul>
                            <li><strong>Time Management:</strong> Allocate time based on mark allocation (1 mark ≈ 1.5 minutes)</li>
                            <li><strong>Answer Format:</strong> Follow Edexcel conventions for showing working and explanations</li>
                            <li><strong>Marking:</strong> Use the provided mark schemes to self-assess your responses</li>
                            <li><strong>Practice:</strong> Complete papers under timed conditions for realistic exam experience</li>
                        </ul>
                    </div>
                    <div class="understanding-question">
                        <h4>Marking Guidelines:</h4>
                        <ul>
                            <li><strong>Accuracy:</strong> Correct answers earn full marks</li>
                            <li><strong>Working:</strong> Show all steps in calculations for partial credit</li>
                            <li><strong>Explanations:</strong> Use precise scientific terminology</li>
                            <li><strong>Units:</strong> Always include appropriate units in numerical answers</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- ======= Paper 1: Core Principles & Rules ======= -->
        <div id="paper1Content" class="content-section" style="display: none;">
            <div class="content-header">
                <button class="btn ghost" onclick="hidePaperContent()" style="display: flex; align-items: center; gap: 8px;">
                    <span class="custom-emoji emoji-arrow-left"></span>
                    Back to Assessment
                </button>
                <h1 class="content-title">
                    <span class="custom-emoji emoji-nucleus"></span>
                    Paper 1: Core Principles & Rules
                </h1>
                <p class="content-subtitle">Duration: 45 minutes | Total Marks: 50</p>
                <div class="paper-timer" id="paper1Timer">
                    <span class="timer-label">Time Remaining:</span>
                    <span class="timer-display" id="paper1TimeDisplay">45:00</span>
                </div>
            </div>

            <!-- Paper Instructions -->
            <div class="objectives-section">
                <h3>📋 Instructions</h3>
                <div class="instructions-box">
                    <ul>
                        <li>Answer <strong>ALL</strong> questions in this paper</li>
                        <li>Write your answers in the spaces provided</li>
                        <li>Show all working for calculation questions</li>
                        <li>Use appropriate scientific terminology</li>
                        <li>Total marks for this paper: <strong>50</strong></li>
                    </ul>
                </div>
            </div>

            <!-- Question 1 -->
            <div class="quiz-section">
                <div class="question-container">
                    <h3>Question 1</h3>
                    <div class="question-part">
                        <h4>(a) [2 marks]</h4>
                        <p>Write the electron configuration for the following elements:</p>
                        <p><strong>(i)</strong> Sodium (Na) - atomic number 11</p>
                        <p><strong>(ii)</strong> Chlorine (Cl) - atomic number 17</p>
                        <div class="answer-space">
                            <textarea id="q1a" placeholder="Write your answers here..." rows="3"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q1a')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q1a-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Na: 1s² 2s² 2p⁶ 3s¹ (1 mark)</p>
                            <p><strong>M2:</strong> Cl: 1s² 2s² 2p⁶ 3s² 3p⁵ (1 mark)</p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(b) [3 marks]</h4>
                        <p>Draw the orbital diagram for nitrogen (N) showing the arrangement of electrons in the 2p subshell. Use arrows to represent electrons and indicate their spin.</p>
                        <div class="answer-space">
                            <textarea id="q1b" placeholder="Draw orbital diagram here..." rows="4"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q1b')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q1b-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Three separate 2p orbitals shown (1 mark)</p>
                            <p><strong>M2:</strong> One electron in each orbital (1 mark)</p>
                            <p><strong>M3:</strong> All electrons with same spin (parallel spins) (1 mark)</p>
                            <p><em>Accept: ↑ ↑ ↑ or ↓ ↓ ↓ in separate boxes</em></p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(c) [4 marks]</h4>
                        <p>Explain the three fundamental principles that govern electron configuration:</p>
                        <p><strong>(i)</strong> Aufbau principle</p>
                        <p><strong>(ii)</strong> Hund's rule</p>
                        <p><strong>(iii)</strong> Pauli exclusion principle</p>
                        <div class="answer-space">
                            <textarea id="q1c" placeholder="Explain each principle..." rows="6"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q1c')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q1c-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Aufbau: Electrons occupy lowest energy orbitals first (1 mark)</p>
                            <p><strong>M2:</strong> Hund's: In degenerate orbitals, electrons occupy separate orbitals with same spin before pairing (1 mark)</p>
                            <p><strong>M3:</strong> Pauli: Maximum 2 electrons per orbital with opposite spins (1 mark)</p>
                            <p><strong>M4:</strong> All three principles correctly explained (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="quiz-section">
                <div class="question-container">
                    <h3>Question 2</h3>
                    <div class="question-part">
                        <h4>(a) [3 marks]</h4>
                        <p>Write the electron configuration for the following transition metals:</p>
                        <p><strong>(i)</strong> Scandium (Sc) - atomic number 21</p>
                        <p><strong>(ii)</strong> Titanium (Ti) - atomic number 22</p>
                        <p><strong>(iii)</strong> Vanadium (V) - atomic number 23</p>
                        <div class="answer-space">
                            <textarea id="q2a" placeholder="Write configurations here..." rows="4"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q2a')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q2a-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Sc: [Ar] 4s² 3d¹ (1 mark)</p>
                            <p><strong>M2:</strong> Ti: [Ar] 4s² 3d² (1 mark)</p>
                            <p><strong>M3:</strong> V: [Ar] 4s² 3d³ (1 mark)</p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(b) [4 marks]</h4>
                        <p>Explain why the 4s orbital is filled before the 3d orbital in transition metals, despite 3d having a lower principal quantum number.</p>
                        <div class="answer-space">
                            <textarea id="q2b" placeholder="Explain the energy ordering..." rows="5"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q2b')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q2b-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> 4s orbital has lower energy than 3d orbital (1 mark)</p>
                            <p><strong>M2:</strong> Due to penetration effect of s orbitals (1 mark)</p>
                            <p><strong>M3:</strong> s orbitals experience less shielding from inner electrons (1 mark)</p>
                            <p><strong>M4:</strong> This follows the Aufbau principle (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="quiz-section">
                <div class="question-container">
                    <h3>Question 3</h3>
                    <div class="question-part">
                        <h4>(a) [5 marks]</h4>
                        <p>Complete the following table by writing the electron configuration for each element:</p>
                        <div class="table-container">
                            <table class="config-table">
                                <thead>
                                    <tr>
                                        <th>Element</th>
                                        <th>Atomic Number</th>
                                        <th>Electron Configuration</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Magnesium (Mg)</td>
                                        <td>12</td>
                                        <td><input type="text" id="q3a-mg" placeholder="Enter configuration"></td>
                                    </tr>
                                    <tr>
                                        <td>Aluminum (Al)</td>
                                        <td>13</td>
                                        <td><input type="text" id="q3a-al" placeholder="Enter configuration"></td>
                                    </tr>
                                    <tr>
                                        <td>Silicon (Si)</td>
                                        <td>14</td>
                                        <td><input type="text" id="q3a-si" placeholder="Enter configuration"></td>
                                    </tr>
                                    <tr>
                                        <td>Phosphorus (P)</td>
                                        <td>15</td>
                                        <td><input type="text" id="q3a-p" placeholder="Enter configuration"></td>
                                    </tr>
                                    <tr>
                                        <td>Sulfur (S)</td>
                                        <td>16</td>
                                        <td><input type="text" id="q3a-s" placeholder="Enter configuration"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q3a')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q3a-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Mg: 1s² 2s² 2p⁶ 3s² (1 mark)</p>
                            <p><strong>M2:</strong> Al: 1s² 2s² 2p⁶ 3s² 3p¹ (1 mark)</p>
                            <p><strong>M3:</strong> Si: 1s² 2s² 2p⁶ 3s² 3p² (1 mark)</p>
                            <p><strong>M4:</strong> P: 1s² 2s² 2p⁶ 3s² 3p³ (1 mark)</p>
                            <p><strong>M5:</strong> S: 1s² 2s² 2p⁶ 3s² 3p⁴ (1 mark)</p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(b) [3 marks]</h4>
                        <p>Identify which element from the table above has the highest first ionization energy and explain your reasoning.</p>
                        <div class="answer-space">
                            <textarea id="q3b" placeholder="Identify element and explain..." rows="4"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q3b')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q3b-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Phosphorus (P) (1 mark)</p>
                            <p><strong>M2:</strong> Has half-filled 3p subshell (1 mark)</p>
                            <p><strong>M3:</strong> Half-filled subshell provides extra stability (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="quiz-section">
                <div class="question-container">
                    <h3>Question 4</h3>
                    <div class="question-part">
                        <h4>(a) [4 marks]</h4>
                        <p>Draw the orbital diagram for oxygen (O) and explain how Hund's rule applies to the 2p subshell.</p>
                        <div class="answer-space">
                            <textarea id="q4a" placeholder="Draw diagram and explain Hund's rule..." rows="5"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q4a')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q4a-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Three 2p orbitals shown (1 mark)</p>
                            <p><strong>M2:</strong> Two electrons in separate orbitals with same spin (1 mark)</p>
                            <p><strong>M3:</strong> Hund's rule: electrons occupy separate orbitals first (1 mark)</p>
                            <p><strong>M4:</strong> Electrons have same spin before pairing (1 mark)</p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(b) [3 marks]</h4>
                        <p>Compare the electron configurations of oxygen (O) and fluorine (F). Explain why fluorine has a higher electronegativity.</p>
                        <div class="answer-space">
                            <textarea id="q4b" placeholder="Compare and explain..." rows="4"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q4b')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q4b-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> O: [He] 2s² 2p⁴, F: [He] 2s² 2p⁵ (1 mark)</p>
                            <p><strong>M2:</strong> F has higher nuclear charge (1 mark)</p>
                            <p><strong>M3:</strong> F is closer to noble gas configuration (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="quiz-section">
                <div class="question-container">
                    <h3>Question 5</h3>
                    <div class="question-part">
                        <h4>(a) [6 marks]</h4>
                        <p>Write the electron configuration for the following ions and explain the process of ion formation:</p>
                        <p><strong>(i)</strong> Na⁺ (from sodium)</p>
                        <p><strong>(ii)</strong> Cl⁻ (from chlorine)</p>
                        <p><strong>(iii)</strong> Mg²⁺ (from magnesium)</p>
                        <div class="answer-space">
                            <textarea id="q5a" placeholder="Write configurations and explain ion formation..." rows="6"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q5a')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q5a-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Na⁺: 1s² 2s² 2p⁶ (1 mark)</p>
                            <p><strong>M2:</strong> Cl⁻: 1s² 2s² 2p⁶ 3s² 3p⁶ (1 mark)</p>
                            <p><strong>M3:</strong> Mg²⁺: 1s² 2s² 2p⁶ (1 mark)</p>
                            <p><strong>M4:</strong> Na loses 1 electron from 3s orbital (1 mark)</p>
                            <p><strong>M5:</strong> Cl gains 1 electron in 3p orbital (1 mark)</p>
                            <p><strong>M6:</strong> Mg loses 2 electrons from 3s orbital (1 mark)</p>
                        </div>
                    </div>

                    <div class="question-part">
                        <h4>(b) [4 marks]</h4>
                        <p>Explain why the ionic radius of Na⁺ is smaller than the atomic radius of Na, while the ionic radius of Cl⁻ is larger than the atomic radius of Cl.</p>
                        <div class="answer-space">
                            <textarea id="q5b" placeholder="Explain ionic radius changes..." rows="4"></textarea>
                        </div>
                        <button class="btn secondary" onclick="showMarkScheme('q5b')">Show Mark Scheme</button>
                        <div class="mark-scheme" id="q5b-scheme" style="display: none;">
                            <strong>Mark Scheme:</strong>
                            <p><strong>M1:</strong> Na⁺ smaller: electron lost, less electron-electron repulsion (1 mark)</p>
                            <p><strong>M2:</strong> Na⁺: same nuclear charge, fewer electrons (1 mark)</p>
                            <p><strong>M3:</strong> Cl⁻ larger: electron gained, more electron-electron repulsion (1 mark)</p>
                            <p><strong>M4:</strong> Cl⁻: same nuclear charge, more electrons (1 mark)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Paper 1 Controls -->
            <div class="paper-controls">
                <button class="btn primary" onclick="submitPaper1()">Submit Paper 1</button>
                <button class="btn secondary" onclick="savePaper1()">Save Progress</button>
                <button class="btn ghost" onclick="resetPaper1()">Reset Paper</button>
            </div>
        </div>

        <!-- ======= Call to Action ======= -->
        <div style="text-align: center; margin: 50px 0;">
            <h2 style="color: var(--accent); margin-bottom: 20px; font-size: 32px;">
                <span class="custom-emoji emoji-game"></span>
                Ready to Practice?
                <span class="custom-emoji emoji-study"></span>
            </h2>
            <p style="color: var(--light); font-size: 18px; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto;">
                Put your knowledge to the test with interactive electron configuration challenges. Build atoms step by step and master the principles through hands-on experience.
            </p>
            <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                <a href="index.html" class="btn primary" style="font-size: 16px; padding: 15px 30px;">
                    <span class="custom-emoji emoji-game"></span>
                    Start Interactive App
                </a>
                <button class="btn ghost" style="font-size: 16px; padding: 15px 30px;">
                    <span class="custom-emoji emoji-study"></span>
                    Take Practice Quiz
                </button>
            </div>
        </div>

        <!-- Core Rules Section -->
        <div id="coreRulesContent" class="content-section" style="display: none;">
            <div class="content-header">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <button class="btn ghost" onclick="hideDetailedContent()" style="display: flex; align-items: center; gap: 8px;">
                        <span class="custom-emoji emoji-atom"></span>
                        ← Back to Tiles
                    </button>
                    <div style="flex: 1; text-align: center;">
                        <h2 style="color: var(--accent); font-size: 36px; margin: 0; display: flex; align-items: center; gap: 15px; justify-content: center;">
                            <span class="custom-emoji emoji-atom"></span>
                            Core Rules - Interactive Learning
                        </h2>
                    </div>
                    <div style="width: 120px;"></div> <!-- Spacer for centering -->
                </div>
                <p style="color: var(--light); font-size: 18px; margin-bottom: 30px; opacity: 0.8;">
                    Master the three fundamental principles through interactive demonstrations. These are the exact same rules used in the main app's study and game modes.
                </p>
            </div>

            <!-- Learning Objectives Section -->
            <div class="objectives-section">
                <h3>
                    <span class="custom-emoji emoji-target"></span>
                    Learning Objectives
                </h3>
                <p>
                    What you will learn and master in this Core Rules section
                </p>
                
                <div class="objectives-grid">
                    
                    <div class="objective-card">
                        <h4>🎯 Aufbau Principle</h4>
                        <ul>
                            <li>Understand that electrons fill lowest energy orbitals first</li>
                            <li>Learn the correct filling order: 1s → 2s → 2p → 3s → 3p → 4s → 3d...</li>
                            <li>Recognize energy levels from n=1 (bottom) to n=7 (top)</li>
                            <li>Apply the principle to predict electron configurations</li>
                        </ul>
                    </div>

                    <div class="objective-card">
                        <h4>🎯 Hund's Rule</h4>
                        <ul>
                            <li>Understand that electrons spread out in degenerate orbitals first</li>
                            <li>Learn that all unpaired electrons have the same spin (↑)</li>
                            <li>Recognize that pairing only occurs after all orbitals have one electron</li>
                            <li>Apply the rule to p, d, and f subshells</li>
                        </ul>
                    </div>

                    <div class="objective-card">
                        <h4>🎯 Pauli Exclusion Principle</h4>
                        <ul>
                            <li>Understand that each orbital can hold maximum 2 electrons</li>
                            <li>Learn that paired electrons must have opposite spins (↑↓)</li>
                            <li>Recognize the difference between filled and paired orbitals</li>
                            <li>Apply the principle to prevent orbital overcrowding</li>
                        </ul>
                    </div>

                    <div class="objective-card">
                        <h4>🎯 Interactive Application</h4>
                        <ul>
                            <li>Use interactive demonstrations to visualize each rule</li>
                            <li>Practice applying all three rules together</li>
                            <li>Test understanding through quizzes and assessments</li>
                            <li>Master the vocabulary and terminology</li>
                        </ul>
                    </div>

                </div>
            </div>

            <!-- Essential Vocabulary Section -->
            <div class="vocabulary-section" style="background: rgba(15, 23, 42, 0.3); border: 2px solid var(--border); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-book"></span>
                    Essential Vocabulary
                </h3>
                <p style="color: var(--light); margin-bottom: 20px; font-style: italic;">
                    Key terms used in the Core Rules demonstrations and quizzes
                </p>
                
                <div class="vocabulary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    
                    <!-- Core Rules Terms -->
                    <div class="vocab-card" style="background: rgba(30, 41, 59, 0.5); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                        <h4 style="color: var(--accent); margin-bottom: 15px; font-size: 18px;">🎯 Core Rules</h4>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--success);">Aufbau Principle:</strong> 
                            <span style="color: var(--light);">Electrons fill lowest energy orbitals first</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--warning);">Hund's Rule:</strong> 
                            <span style="color: var(--light);">Electrons spread out in degenerate orbitals before pairing</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--accent);">Pauli Exclusion:</strong> 
                            <span style="color: var(--light);">Maximum 2 electrons per orbital with opposite spins</span>
                        </div>
                        <div class="vocab-item">
                            <strong style="color: var(--danger);">Ground State:</strong> 
                            <span style="color: var(--light);">Lowest energy electron configuration</span>
                        </div>
                    </div>

                    <!-- Orbital Structure -->
                    <div class="vocab-card" style="background: rgba(30, 41, 59, 0.5); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                        <h4 style="color: var(--accent); margin-bottom: 15px; font-size: 18px;">🌌 Orbital Structure</h4>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--success);">Energy Level (n):</strong> 
                            <span style="color: var(--light);">Shell number (1, 2, 3, 4, 5, 6, 7)</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--warning);">Subshell:</strong> 
                            <span style="color: var(--light);">s, p, d, f regions within each shell</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--accent);">Orbital:</strong> 
                            <span style="color: var(--light);">Individual electron space (s=1, p=3, d=5, f=7)</span>
                        </div>
                        <div class="vocab-item">
                            <strong style="color: var(--danger);">Degenerate Orbitals:</strong> 
                            <span style="color: var(--light);">Orbitals with same energy (p, d, f sets)</span>
                        </div>
                    </div>

                    <!-- Electron Properties -->
                    <div class="vocab-card" style="background: rgba(30, 41, 59, 0.5); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                        <h4 style="color: var(--accent); margin-bottom: 15px; font-size: 18px;">⚡ Electron Properties</h4>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--success);">Electron Spin:</strong> 
                            <span style="color: var(--light);">↑ (up) or ↓ (down) - intrinsic property</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--warning);">Paired Electrons:</strong> 
                            <span style="color: var(--light);">Two electrons with opposite spins in same orbital</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--accent);">Unpaired Electrons:</strong> 
                            <span style="color: var(--light);">Single electrons in orbitals (same spin)</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--danger);">Lone Pair:</strong> 
                            <span style="color: var(--light);">Pair of electrons not involved in bonding</span>
                        </div>
                        <div class="vocab-item">
                            <strong style="color: var(--success);">Filling Order:</strong> 
                            <span style="color: var(--light);">Sequence: 1s→2s→2p→3s→3p→4s→3d→4p→5s...</span>
                        </div>
                    </div>

                    <!-- Interactive Terms -->
                    <div class="vocab-card" style="background: rgba(30, 41, 59, 0.5); border: 2px solid var(--border); border-radius: 12px; padding: 20px;">
                        <h4 style="color: var(--accent); margin-bottom: 15px; font-size: 18px;">🎮 Interactive Terms</h4>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--success);">Filled Orbital:</strong> 
                            <span style="color: var(--light);">Orbital with 2 electrons (↑↓)</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--warning);">Half-Filled:</strong> 
                            <span style="color: var(--light);">Orbital with 1 electron (↑)</span>
                        </div>
                        <div class="vocab-item" style="margin-bottom: 12px;">
                            <strong style="color: var(--accent);">Empty Orbital:</strong> 
                            <span style="color: var(--light);">Orbital with 0 electrons</span>
                        </div>
                        <div class="vocab-item">
                            <strong style="color: var(--danger);">Electron Configuration:</strong> 
                            <span style="color: var(--light);">How electrons are arranged in orbitals</span>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Official Rule Definitions -->
            <div class="content-card">
                <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-study"></span>
                    Official Rule Definitions
                </h3>
                <p style="color: var(--light); margin-bottom: 20px; font-style: italic;">
                    These are the exact definitions used in the main app's study and game modes:
                </p>
                
                <div class="rule-definitions">
                    <div class="rule-definition">
                        <h4 style="color: var(--warning); margin-bottom: 10px;">1. Aufbau principle</h4>
                        <p style="color: var(--light); margin-bottom: 15px;">Electrons occupy the lowest-energy available subshells first.</p>
                    </div>
                    
                    <div class="rule-definition">
                        <h4 style="color: var(--success); margin-bottom: 10px;">2. Hund's rule</h4>
                        <p style="color: var(--light); margin-bottom: 15px;">In a set of degenerate orbitals (p, d, f), place one electron in each with the <b>same spin</b> before pairing.</p>
                    </div>
                    
                    <div class="rule-definition">
                        <h4 style="color: var(--danger); margin-bottom: 10px;">3. Pauli exclusion principle</h4>
                        <p style="color: var(--light); margin-bottom: 15px;">Each orbital holds at most two electrons and they must have <b>opposite spins</b> (↑↓).</p>
                    </div>
                </div>
            </div>

            <!-- Interactive Aufbau Sequence -->
            <div class="content-card">
                <h3 style="color: var(--warning); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-energy"></span>
                    Interactive Aufbau Sequence
                </h3>
                <p style="color: var(--light); margin-bottom: 20px;">
                    Watch electrons fill orbitals in order of increasing energy. Click the buttons to see the sequence in action!
                </p>
                
                                    <div class="aufbau-demo">
                        <div class="building" id="aufbauBuilding">
                                            <!-- Shell n=7 (Highest Energy - Top) -->
                <div class="floor" data-n="7">
                    <div class="floor-label">Shell n=7 (Highest Energy)</div>
                    <div class="wings">
                        <div class="wing wing-p" data-sub="7p">
                            <div class="wing-title">7p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="7p" data-index="0">
                                    <div class="unit-label">7px</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="7p-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="7p-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="7p" data-index="1">
                                    <div class="unit-label">7py</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="7p-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="7p-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="7p" data-index="2">
                                    <div class="unit-label">7pz</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="7p-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="7p-6"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-s" data-sub="7s">
                            <div class="wing-title">7s wing — <span class="mini">ℓ=0 (s)</span></div>
                            <div class="units">
                                <div class="unit" data-wing="7s" data-index="0">
                                    <div class="unit-label">7s</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="7s-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="7s-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                            
                                            <!-- Shell n=6 -->
                <div class="floor" data-n="6">
                    <div class="floor-label">Shell n=6</div>
                    <div class="wings">
                        <div class="wing wing-d" data-sub="6d">
                            <div class="wing-title">6d wing — <span class="mini">ℓ=2 (d)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="6d" data-index="0">
                                    <div class="unit-label">6d₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6d-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="6d-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6d" data-index="1">
                                    <div class="unit-label">6d₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6d-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="6d-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6d" data-index="2">
                                    <div class="unit-label">6d₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6d-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="6d-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6d" data-index="3">
                                    <div class="unit-label">6d₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6d-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="6d-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6d" data-index="4">
                                    <div class="unit-label">6d₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6d-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="6d-10"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-p" data-sub="6p">
                            <div class="wing-title">6p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="6p" data-index="0">
                                    <div class="unit-label">6px</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6p-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="6p-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6p" data-index="1">
                                    <div class="unit-label">6py</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6p-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="6p-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="6p" data-index="2">
                                    <div class="unit-label">6pz</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6p-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="6p-6"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-s" data-sub="6s">
                            <div class="wing-title">6s wing — <span class="mini">ℓ=0 (s)</span></div>
                            <div class="units">
                                <div class="unit" data-wing="6s" data-index="0">
                                    <div class="unit-label">6s</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="6s-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="6s-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                            
                                            <!-- Shell n=5 -->
                <div class="floor" data-n="5">
                    <div class="floor-label">Shell n=5</div>
                    <div class="wings">
                        <div class="wing wing-f" data-sub="5f">
                            <div class="wing-title">5f wing — <span class="mini">ℓ=3 (f)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="5f" data-index="0">
                                    <div class="unit-label">5f₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="1">
                                    <div class="unit-label">5f₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="2">
                                    <div class="unit-label">5f₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="3">
                                    <div class="unit-label">5f₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="4">
                                    <div class="unit-label">5f₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-10"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="5">
                                    <div class="unit-label">5f₆</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-11"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-12"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5f" data-index="6">
                                    <div class="unit-label">5f₇</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5f-13"></div>
                                        <div class="slot" data-slot="1" data-orbital="5f-14"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-d" data-sub="5d">
                            <div class="wing-title">5d wing — <span class="mini">ℓ=2 (d)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="5d" data-index="0">
                                    <div class="unit-label">5d₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5d-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="5d-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5d" data-index="1">
                                    <div class="unit-label">5d₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5d-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="5d-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5d" data-index="2">
                                    <div class="unit-label">5d₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5d-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="5d-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5d" data-index="3">
                                    <div class="unit-label">5d₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5d-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="5d-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5d" data-index="4">
                                    <div class="unit-label">5d₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5d-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="5d-10"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-p" data-sub="5p">
                            <div class="wing-title">5p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="5p" data-index="0">
                                    <div class="unit-label">5px</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5p-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="5p-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5p" data-index="1">
                                    <div class="unit-label">5py</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5p-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="5p-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="5p" data-index="2">
                                    <div class="unit-label">5pz</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5p-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="5p-6"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-s" data-sub="5s">
                            <div class="wing-title">5s wing — <span class="mini">ℓ=0 (s)</span></div>
                            <div class="units">
                                <div class="unit" data-wing="5s" data-index="0">
                                    <div class="unit-label">5s</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="5s-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="5s-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                            
                                            <!-- Shell n=4 -->
                <div class="floor" data-n="4">
                    <div class="floor-label">Shell n=4</div>
                    <div class="wings">
                        <div class="wing wing-f" data-sub="4f">
                            <div class="wing-title">4f wing — <span class="mini">ℓ=3 (f)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="4f" data-index="0">
                                    <div class="unit-label">4f₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="1">
                                    <div class="unit-label">4f₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="2">
                                    <div class="unit-label">4f₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="3">
                                    <div class="unit-label">4f₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="4">
                                    <div class="unit-label">4f₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-10"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="5">
                                    <div class="unit-label">4f₆</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-11"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-12"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4f" data-index="6">
                                    <div class="unit-label">4f₇</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4f-13"></div>
                                        <div class="slot" data-slot="1" data-orbital="4f-14"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-d" data-sub="4d">
                            <div class="wing-title">4d wing — <span class="mini">ℓ=2 (d)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="4d" data-index="0">
                                    <div class="unit-label">4d₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4d-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="4d-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4d" data-index="1">
                                    <div class="unit-label">4d₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4d-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="4d-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4d" data-index="2">
                                    <div class="unit-label">4d₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4d-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="4d-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4d" data-index="3">
                                    <div class="unit-label">4d₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4d-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="4d-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4d" data-index="4">
                                    <div class="unit-label">4d₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4d-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="4d-10"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-p" data-sub="4p">
                            <div class="wing-title">4p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="4p" data-index="0">
                                    <div class="unit-label">4px</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4p-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="4p-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4p" data-index="1">
                                    <div class="unit-label">4py</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4p-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="4p-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="4p" data-index="2">
                                    <div class="unit-label">4pz</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4p-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="4p-6"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-s" data-sub="4s">
                            <div class="wing-title">4s wing — <span class="mini">ℓ=0 (s)</span></div>
                            <div class="units">
                                <div class="unit" data-wing="4s" data-index="0">
                                    <div class="unit-label">4s</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="4s-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="4s-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                            
                                            <!-- Shell n=3 -->
                <div class="floor" data-n="3">
                    <div class="floor-label">Shell n=3</div>
                    <div class="wings">
                        <div class="wing wing-d" data-sub="3d">
                            <div class="wing-title">3d wing — <span class="mini">ℓ=2 (d)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="3d" data-index="0">
                                    <div class="unit-label">3d₁</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3d-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="3d-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3d" data-index="1">
                                    <div class="unit-label">3d₂</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3d-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="3d-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3d" data-index="2">
                                    <div class="unit-label">3d₃</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3d-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="3d-6"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3d" data-index="3">
                                    <div class="unit-label">3d₄</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3d-7"></div>
                                        <div class="slot" data-slot="1" data-orbital="3d-8"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3d" data-index="4">
                                    <div class="unit-label">3d₅</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3d-9"></div>
                                        <div class="slot" data-slot="1" data-orbital="3d-10"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-p" data-sub="3p">
                            <div class="wing-title">3p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                            <div class="units">
                                <div class="unit" data-wing="3p" data-index="0">
                                    <div class="unit-label">3px</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3p-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="3p-2"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3p" data-index="1">
                                    <div class="unit-label">3py</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3p-3"></div>
                                        <div class="slot" data-slot="1" data-orbital="3p-4"></div>
                                    </div>
                                </div>
                                <div class="unit" data-wing="3p" data-index="2">
                                    <div class="unit-label">3pz</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3p-5"></div>
                                        <div class="slot" data-slot="1" data-orbital="3p-6"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="wing wing-s" data-sub="3s">
                            <div class="wing-title">3s wing — <span class="mini">ℓ=0 (s)</span></div>
                            <div class="units">
                                <div class="unit" data-wing="3s" data-index="0">
                                    <div class="unit-label">3s</div>
                                    <div class="slots">
                                        <div class="slot" data-slot="0" data-orbital="3s-1"></div>
                                        <div class="slot" data-slot="1" data-orbital="3s-2"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                            
                            <!-- Shell n=2 -->
                            <div class="floor" data-n="2">
                                <div class="floor-label">Shell n=2</div>
                                <div class="wings">
                                    <div class="wing wing-p" data-sub="2p">
                                        <div class="wing-title">2p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2p" data-index="0">
                                                <div class="unit-label">2px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-1"></div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-2"></div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="1">
                                                <div class="unit-label">2py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-3"></div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-4"></div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="2">
                                                <div class="unit-label">2pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2p-5"></div>
                                                    <div class="slot" data-slot="1" data-orbital="2p-6"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="wing wing-s" data-sub="2s">
                                        <div class="wing-title">2s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2s" data-index="0">
                                                <div class="unit-label">2s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="2s-1"></div>
                                                    <div class="slot" data-slot="1" data-orbital="2s-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Shell n=1 (Lowest Energy - Bottom) -->
                            <div class="floor" data-n="1">
                                <div class="floor-label">Shell n=1 (Lowest Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="1s">
                                        <div class="wing-title">1s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="1s" data-index="0">
                                                <div class="unit-label">1s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="1s-1"></div>
                                                    <div class="slot" data-slot="1" data-orbital="1s-2"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                    <div class="demo-controls">
                        <button class="tile-btn" onclick="showFillingOrder()">Show Filling Order</button>
                        <button class="tile-btn secondary" onclick="resetAufbau()">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Hund's Rule Demonstration -->
            <div class="content-card">
                <h3 style="color: var(--success); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-star"></span>
                    Hund's Rule Demonstration
                </h3>
                <p style="color: var(--light); margin-bottom: 20px;">
                    See how electrons distribute themselves in degenerate orbitals. Click the orbitals to understand parallel vs. paired spins!
                </p>
                
                                    <div class="hund-demo">
                        <div class="building" id="hundBuilding">
                            <div class="floor" data-n="2">
                                <div class="floor-label">Shell n=2 - P Orbitals (Degenerate - Same Energy)</div>
                                <div class="wings">
                                    <div class="wing wing-p" data-sub="2p">
                                        <div class="wing-title">2p wing — <span class="mini">ℓ=1 (p)</span> <span class="degenerate-label">DEGENERATE</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="2p" data-index="0">
                                                <div class="unit-label">2px</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="p1-1" onclick="toggleElectron(this)"></div>
                                                    <div class="slot" data-slot="1" data-orbital="p1-2" onclick="toggleElectron(this)"></div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="1">
                                                <div class="unit-label">2py</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="p1-3" onclick="toggleElectron(this)"></div>
                                                    <div class="slot" data-slot="1" data-orbital="p1-4" onclick="toggleElectron(this)"></div>
                                                </div>
                                            </div>
                                            <div class="unit" data-wing="2p" data-index="2">
                                                <div class="unit-label">2pz</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" data-orbital="p1-5" onclick="toggleElectron(this)"></div>
                                                    <div class="slot" data-slot="1" data-orbital="p1-6" onclick="toggleElectron(this)"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                    <div class="demo-controls">
                        <button class="tile-btn" onclick="showElectronDistribution()">Show Distribution</button>
                        <button class="tile-btn secondary" onclick="resetHund()">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Pauli Exclusion Principle -->
            <div class="content-card">
                <h3 style="color: var(--danger); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-nucleus"></span>
                    Pauli Exclusion Principle
                </h3>
                <p style="color: var(--light); margin-bottom: 20px;">
                    Test the rule that no two electrons can have identical quantum numbers. Try to place electrons and see what happens!
                </p>
                
                                    <div class="pauli-demo">
                        <div class="building" id="pauliBuilding">
                            <div class="floor" data-n="1">
                                <div class="floor-label">Test Orbital - Pauli Exclusion Principle (Max 2 electrons per orbital)</div>
                                <div class="wings">
                                    <div class="wing wing-s" data-sub="1s">
                                        <div class="wing-title">1s wing — <span class="mini">ℓ=0 (s)</span></div>
                                        <div class="units">
                                            <div class="unit" data-wing="1s" data-index="0">
                                                <div class="unit-label">1s</div>
                                                <div class="slots">
                                                    <div class="slot" data-slot="0" id="testOrbital1" onclick="addElectron(this)"></div>
                                                    <div class="slot" data-slot="1" id="testOrbital2" onclick="addElectron(this)"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="electron-count" style="text-align: center; margin-top: 15px; color: var(--light);">
                            Electrons: <span id="electronCount">0</span>/2
                        </div>
                    
                    <div class="demo-controls">
                        <button class="tile-btn" onclick="testPauli()">Test Pauli Rule</button>
                        <button class="tile-btn secondary" onclick="resetPauli()">Reset</button>
                    </div>
                    
                    <div class="pauli-feedback" id="pauliFeedback"></div>
                </div>
            </div>

            <!-- Vocabulary Quiz Section -->
            <div class="vocab-quiz-section" style="background: rgba(15, 23, 42, 0.3); border: 2px solid var(--border); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-brain"></span>
                    Vocabulary Quiz
                </h3>
                <p style="color: var(--light); margin-bottom: 20px; font-style: italic;">
                    Test your understanding of the key chemistry terms before proceeding to the interactive concepts
                </p>
                
                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>1. What does Hund's Rule state?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab1" value="a" style="margin-right: 8px;">
                            Electrons fill orbitals in pairs first
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab1" value="b" style="margin-right: 8px;">
                            Electrons spread out in degenerate orbitals before pairing (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab1" value="c" style="margin-right: 8px;">
                            Each orbital can hold only 2 electrons
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>2. What are degenerate orbitals?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab2" value="a" style="margin-right: 8px;">
                            Orbitals with different energies
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab2" value="b" style="margin-right: 8px;">
                            Orbitals with the same energy (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab2" value="c" style="margin-right: 8px;">
                            Orbitals that are empty
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>3. What is the Pauli Exclusion Principle?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab3" value="a" style="margin-right: 8px;">
                            Electrons fill lowest energy orbitals first
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab3" value="b" style="margin-right: 8px;">
                            Maximum 2 electrons per orbital with opposite spins (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab3" value="c" style="margin-right: 8px;">
                            Electrons spread out before pairing
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>4. What are unpaired electrons?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab4" value="a" style="margin-right: 8px;">
                            Two electrons with opposite spins in same orbital
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab4" value="b" style="margin-right: 8px;">
                            Single electrons in orbitals with same spin (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab4" value="c" style="margin-right: 8px;">
                            Electrons in the highest energy level
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>5. What is a lone pair?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab5" value="a" style="margin-right: 8px;">
                            A single electron in an orbital
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab5" value="b" style="margin-right: 8px;">
                            Pair of electrons not involved in bonding (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab5" value="c" style="margin-right: 8px;">
                            Electrons in the outermost shell
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>6. What does the Aufbau Principle state?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab6" value="a" style="margin-right: 8px;">
                            Electrons spread out before pairing
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab6" value="b" style="margin-right: 8px;">
                            Electrons fill lowest energy orbitals first (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab6" value="c" style="margin-right: 8px;">
                            Maximum 2 electrons per orbital
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>7. How many orbitals are in a p subshell?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab7" value="a" style="margin-right: 8px;">
                            1 orbital
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab7" value="b" style="margin-right: 8px;">
                            3 orbitals (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab7" value="c" style="margin-right: 8px;">
                            5 orbitals
                        </label>
                    </div>
                </div>

                <div class="quiz-question" style="margin-bottom: 20px;">
                    <p style="color: var(--light); margin-bottom: 10px;"><strong>8. What is the ground state?</strong></p>
                    <div class="quiz-options" style="display: flex; flex-direction: column; gap: 8px;">
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab8" value="a" style="margin-right: 8px;">
                            The highest energy configuration
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab8" value="b" style="margin-right: 8px;">
                            The lowest energy electron configuration (correct)
                        </label>
                        <label style="color: var(--light); cursor: pointer; padding: 8px; border-radius: 8px; background: rgba(30, 41, 59, 0.5);">
                            <input type="radio" name="vocab8" value="c" style="margin-right: 8px;">
                            A temporary configuration
                        </label>
                    </div>
                </div>

                <div class="quiz-controls" style="margin-top: 20px;">
                    <button class="tile-btn" onclick="checkVocabQuiz()">Check Answers</button>
                    <button class="tile-btn secondary" onclick="resetVocabQuiz()">Reset Quiz</button>
                </div>

                <div id="vocabResults" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
            </div>

            <!-- Interactive Quiz -->
            <div class="content-card">
                <h3 style="color: var(--accent); font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span class="custom-emoji emoji-study"></span>
                    Quick Understanding Check
                </h3>
                <p style="color: var(--light); margin-bottom: 20px;">
                    Test your understanding of the core rules with these interactive questions!
                </p>
                
                <div class="understanding-quiz" id="understandingQuiz">
                    <div class="quiz-question">
                        <h4>Question 1: What is the correct order for filling orbitals?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(1, 'a')">A) 1s → 2s → 2p → 3s → 3p → 4s → 3d</button>
                            <button class="quiz-option" onclick="checkAnswer(1, 'b')">B) 1s → 2s → 3s → 2p → 3p → 4s → 3d</button>
                            <button class="quiz-option" onclick="checkAnswer(1, 'c')">C) 1s → 2s → 2p → 3s → 3d → 3p → 4s</button>
                        </div>
                    </div>
                    
                                                <div class="quiz-question">
                                <h4>Question 2: How should electrons be placed in degenerate orbitals?</h4>
                                <div class="quiz-options">
                                    <button class="quiz-option" onclick="checkAnswer(2, 'a')">A) Pair up immediately</button>
                                    <button class="quiz-option" onclick="checkAnswer(2, 'b')">B) Spread out with parallel spins first</button>
                                    <button class="quiz-option" onclick="checkAnswer(2, 'c')">C) Random placement</button>
                                </div>
                            </div>
                    
                    <div class="quiz-question">
                        <h4>Question 3: What is the maximum number of electrons per orbital?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(3, 'a')">A) 1</button>
                            <button class="quiz-option" onclick="checkAnswer(3, 'b')">B) 2</button>
                            <button class="quiz-option" onclick="checkAnswer(3, 'c')">C) 3</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 4: In a 2p subshell, how should 4 electrons be arranged?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(4, 'a')">A) All in one orbital (px: ↑↓, py: empty, pz: empty)</button>
                            <button class="quiz-option" onclick="checkAnswer(4, 'b')">B) Two orbitals with 2 electrons each (px: ↑↓, py: ↑↓, pz: empty)</button>
                            <button class="quiz-option" onclick="checkAnswer(4, 'c')">C) One electron in each orbital, then pair (px: ↑, py: ↑, pz: ↑↓)</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 5: What happens when electrons pair in an orbital?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(5, 'a')">A) They have the same spin (both ↑ or both ↓)</button>
                            <button class="quiz-option" onclick="checkAnswer(5, 'b')">B) They have opposite spins (one ↑ and one ↓)</button>
                            <button class="quiz-option" onclick="checkAnswer(5, 'c')">C) They can have any spin combination</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 6: Which element has the electron configuration 1s² 2s² 2p⁶?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(6, 'a')">A) Neon (Ne)</button>
                            <button class="quiz-option" onclick="checkAnswer(6, 'b')">B) Fluorine (F)</button>
                            <button class="quiz-option" onclick="checkAnswer(6, 'c')">C) Sodium (Na)</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 7: How many unpaired electrons does oxygen (O) have in its ground state?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(7, 'a')">A) 0 unpaired electrons</button>
                            <button class="quiz-option" onclick="checkAnswer(7, 'b')">B) 2 unpaired electrons</button>
                            <button class="quiz-option" onclick="checkAnswer(7, 'c')">C) 4 unpaired electrons</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 8: What is the correct electron configuration for carbon (C)?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(8, 'a')">A) 1s² 2s² 2p² (6 electrons total)</button>
                            <button class="quiz-option" onclick="checkAnswer(8, 'b')">B) 1s² 2s² 2p⁴ (8 electrons total)</button>
                            <button class="quiz-option" onclick="checkAnswer(8, 'c')">C) 1s² 2s⁴ (6 electrons total)</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 9: Which rule explains why electrons spread out before pairing?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(9, 'a')">A) Aufbau Principle</button>
                            <button class="quiz-option" onclick="checkAnswer(9, 'b')">B) Hund's Rule</button>
                            <button class="quiz-option" onclick="checkAnswer(9, 'c')">C) Pauli Exclusion Principle</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 10: How many orbitals are in a d subshell?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(10, 'a')">A) 3 orbitals</button>
                            <button class="quiz-option" onclick="checkAnswer(10, 'b')">B) 5 orbitals</button>
                            <button class="quiz-option" onclick="checkAnswer(10, 'c')">C) 7 orbitals</button>
                        </div>
                    </div>

                    <div class="quiz-question">
                        <h4>Question 11: How are the 2p electrons arranged in nitrogen (N)?</h4>
                        <div class="quiz-options">
                            <button class="quiz-option" onclick="checkAnswer(11, 'a')">A) px: ↑↓, py: ↑↓, pz: ↑↓ (all paired)</button>
                            <button class="quiz-option" onclick="checkAnswer(11, 'b')">B) px: ↑, py: ↑, pz: ↑ (all unpaired)</button>
                            <button class="quiz-option" onclick="checkAnswer(11, 'c')">C) px: ↑↓, py: ↑, pz: empty (mixed)</button>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-results" id="quizResults" style="display: none;">
                    <h4 style="color: var(--success);">Quiz Results</h4>
                    <p>Score: <span id="quizScore">0</span>/11</p>
                    <p id="quizFeedback"></p>
                </div>
            </div>
        </div>
    </main>

    <!-- ======= Footer (Consistent with main app) ======= -->
    <footer class="app-footer">
        <span><span class="custom-emoji emoji-scientist"></span> © 2025 Electron Towers APP • Mr.Sep Educational Services</span>
    </footer>

    <script>
        // Interactive functionality for the study tiles
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects and animations
            const studyTiles = document.querySelectorAll('.study-tile');
            studyTiles.forEach(tile => {
                tile.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-12px) scale(1.03)';
                });
                
                tile.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });

            // Update progress indicators on tiles
            updateTileProgressIndicators();
            
            // Add debug buttons for testing (temporary)
            addDebugButtons();

            // Add click effects for buttons
            const buttons = document.querySelectorAll('.tile-btn, .btn');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });
        });

        // Placeholder functions for tile actions
        function showSection(section) {
            console.log('Showing section:', section);
            // This would show detailed content for each section
        }

        function startOverview() {
            console.log('Starting overview journey');
            // This would begin an interactive overview
        }



        function explainExceptions() {
            console.log('Explaining exceptions');
            // This would provide detailed exception explanations
        }

        function ionExamples() {
            console.log('Showing ion examples');
            // This would display ion formation examples
        }

        function showProblems() {
            console.log('Showing practice problems');
            // This would display practice problems
        }

        function startAssessment() {
            console.log('Starting assessment');
            // This would begin the quiz
        }

        // ======= Assessment Interactive Functions =======

        // Show detailed content when clicking on Assessment tile
        function showAssessmentContent() {
            document.getElementById('detailedContent').style.display = 'block';
            document.getElementById('assessmentContent').style.display = 'block';
            document.getElementById('overviewContent').style.display = 'none';
            document.getElementById('coreRulesContent').style.display = 'none';
            document.getElementById('exceptionsContent').style.display = 'none';
            document.getElementById('ionFormationContent').style.display = 'none';
            document.querySelector('.study-tiles').style.display = 'none';
            document.querySelector('.page-title').style.display = 'none';
        }

        // Paper 1 Functions
        function startPaper1() {
            console.log('Starting Paper 1: Core Principles & Rules');
            
            try {
                // Hide all other content sections
                document.getElementById('detailedContent').style.display = 'block';
                document.getElementById('paper1Content').style.display = 'block';
                document.getElementById('assessmentContent').style.display = 'none';
                document.getElementById('overviewContent').style.display = 'none';
                document.getElementById('coreRulesContent').style.display = 'none';
                document.getElementById('exceptionsContent').style.display = 'none';
                document.getElementById('ionFormationContent').style.display = 'none';
                
                // Hide study tiles and page title
                const studyTiles = document.querySelector('.study-tiles');
                const pageTitle = document.querySelector('.page-title');
                if (studyTiles) studyTiles.style.display = 'none';
                if (pageTitle) pageTitle.style.display = 'none';
                
                // Start timer
                startPaper1Timer();
                
                // Scroll to top of paper
                window.scrollTo(0, 0);
                
                console.log('Paper 1 started successfully');
            } catch (error) {
                console.error('Error starting Paper 1:', error);
                alert('Error starting Paper 1. Please check the console for details.');
            }
        }

        // Paper 1 Timer
        let paper1TimerInterval;
        let paper1TimeRemaining = 45 * 60; // 45 minutes in seconds

        function startPaper1Timer() {
            paper1TimerInterval = setInterval(() => {
                paper1TimeRemaining--;
                updatePaper1TimerDisplay();
                
                if (paper1TimeRemaining <= 0) {
                    clearInterval(paper1TimerInterval);
                    alert('Time\'s up! Paper 1 has been automatically submitted.');
                    submitPaper1();
                }
            }, 1000);
        }

        function updatePaper1TimerDisplay() {
            const minutes = Math.floor(paper1TimeRemaining / 60);
            const seconds = paper1TimeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('paper1TimeDisplay').textContent = display;
        }

        function viewPaper1MarkScheme() {
            console.log('Viewing Paper 1 Mark Scheme');
            // This would show the complete mark scheme for Paper 1
            alert('Paper 1 Mark Scheme: Core Principles & Rules\n\nThis would display the complete marking criteria and sample answers for all Paper 1 questions covering fundamental electron configuration principles.');
        }

        // Paper 1 Assessment Functions
        function showMarkScheme(questionId) {
            const scheme = document.getElementById(questionId + '-scheme');
            if (scheme.style.display === 'none') {
                scheme.style.display = 'block';
            } else {
                scheme.style.display = 'none';
            }
        }

        function submitPaper1() {
            clearInterval(paper1TimerInterval);
            
            // Collect all answers
            const answers = {
                q1a: document.getElementById('q1a').value,
                q1b: document.getElementById('q1b').value,
                q1c: document.getElementById('q1c').value,
                q2a: document.getElementById('q2a').value,
                q2b: document.getElementById('q2b').value,
                q3a: {
                    mg: document.getElementById('q3a-mg').value,
                    al: document.getElementById('q3a-al').value,
                    si: document.getElementById('q3a-si').value,
                    p: document.getElementById('q3a-p').value,
                    s: document.getElementById('q3a-s').value
                },
                q3b: document.getElementById('q3b').value,
                q4a: document.getElementById('q4a').value,
                q4b: document.getElementById('q4b').value,
                q5a: document.getElementById('q5a').value,
                q5b: document.getElementById('q5b').value
            };

            // Calculate score (simplified - in real implementation, this would be more sophisticated)
            let score = 0;
            let totalMarks = 50;
            
            // Basic scoring logic (simplified)
            Object.keys(answers).forEach(key => {
                if (typeof answers[key] === 'string' && answers[key].trim().length > 0) {
                    score += 2; // Give 2 marks for any non-empty answer
                } else if (typeof answers[key] === 'object') {
                    Object.keys(answers[key]).forEach(subKey => {
                        if (answers[key][subKey].trim().length > 0) {
                            score += 1;
                        }
                    });
                }
            });

            const percentage = Math.round((score / totalMarks) * 100);
            
            alert(`Paper 1 Submitted!\n\nScore: ${score}/${totalMarks} (${percentage}%)\n\nTime taken: ${Math.floor((45 * 60 - paper1TimeRemaining) / 60)}:${((45 * 60 - paper1TimeRemaining) % 60).toString().padStart(2, '0')}\n\nYour answers have been saved.`);
            
            // Reset timer
            paper1TimeRemaining = 45 * 60;
            updatePaper1TimerDisplay();
        }

        function savePaper1() {
            // Save progress to localStorage
            const answers = {
                q1a: document.getElementById('q1a').value,
                q1b: document.getElementById('q1b').value,
                q1c: document.getElementById('q1c').value,
                q2a: document.getElementById('q2a').value,
                q2b: document.getElementById('q2b').value,
                q3a: {
                    mg: document.getElementById('q3a-mg').value,
                    al: document.getElementById('q3a-al').value,
                    si: document.getElementById('q3a-si').value,
                    p: document.getElementById('q3a-p').value,
                    s: document.getElementById('q3a-s').value
                },
                q3b: document.getElementById('q3b').value,
                q4a: document.getElementById('q4a').value,
                q4b: document.getElementById('q4b').value,
                q5a: document.getElementById('q5a').value,
                q5b: document.getElementById('q5b').value
            };
            
            localStorage.setItem('paper1Answers', JSON.stringify(answers));
            localStorage.setItem('paper1TimeRemaining', paper1TimeRemaining.toString());
            
            alert('Paper 1 progress saved successfully!');
        }

        function resetPaper1() {
            if (confirm('Are you sure you want to reset Paper 1? All your answers will be lost.')) {
                // Clear all answers
                document.getElementById('q1a').value = '';
                document.getElementById('q1b').value = '';
                document.getElementById('q1c').value = '';
                document.getElementById('q2a').value = '';
                document.getElementById('q2b').value = '';
                document.getElementById('q3a-mg').value = '';
                document.getElementById('q3a-al').value = '';
                document.getElementById('q3a-si').value = '';
                document.getElementById('q3a-p').value = '';
                document.getElementById('q3a-s').value = '';
                document.getElementById('q3b').value = '';
                document.getElementById('q4a').value = '';
                document.getElementById('q4b').value = '';
                document.getElementById('q5a').value = '';
                document.getElementById('q5b').value = '';
                
                // Reset timer
                clearInterval(paper1TimerInterval);
                paper1TimeRemaining = 45 * 60;
                updatePaper1TimerDisplay();
                startPaper1Timer();
                
                // Hide all mark schemes
                document.querySelectorAll('[id$="-scheme"]').forEach(scheme => {
                    scheme.style.display = 'none';
                });
                
                alert('Paper 1 has been reset.');
            }
        }

        function hidePaperContent() {
            document.getElementById('paper1Content').style.display = 'none';
            document.getElementById('assessmentContent').style.display = 'block';
            clearInterval(paper1TimerInterval);
        }

        // Paper 2 Functions
        function startPaper2() {
            console.log('Starting Paper 2: Exceptions & Complex Cases');
            // This would begin Paper 2 with timer and question navigation
            alert('Paper 2: Exceptions & Complex Cases\n\nDuration: 45 minutes\nMarks: 50\n\nTopics: Transition metal exceptions (Cr, Cu, Mo, Ag), stability factors, d-block patterns\n\nThis would launch the full Paper 2 examination.');
        }

        function viewPaper2MarkScheme() {
            console.log('Viewing Paper 2 Mark Scheme');
            // This would show the complete mark scheme for Paper 2
            alert('Paper 2 Mark Scheme: Exceptions & Complex Cases\n\nThis would display the complete marking criteria and sample answers for all Paper 2 questions covering electron configuration exceptions.');
        }

        // Paper 3 Functions
        function startPaper3() {
            console.log('Starting Paper 3: Ion Formation & Applications');
            // This would begin Paper 3 with timer and question navigation
            alert('Paper 3: Ion Formation & Applications\n\nDuration: 60 minutes\nMarks: 60\n\nTopics: Cation/anion formation, noble gas configuration, isoelectronic species, magnetic properties\n\nThis would launch the full Paper 3 examination.');
        }

        function viewPaper3MarkScheme() {
            console.log('Viewing Paper 3 Mark Scheme');
            // This would show the complete mark scheme for Paper 3
            alert('Paper 3 Mark Scheme: Ion Formation & Applications\n\nThis would display the complete marking criteria and sample answers for all Paper 3 questions covering ion formation and applications.');
        }

        // ======= Overview Tab Interactive Functions =======

        // Show detailed content when clicking on Overview tile
        function showOverviewContent() {
            document.getElementById('detailedContent').style.display = 'block';
            document.getElementById('overviewContent').style.display = 'block';
            document.getElementById('coreRulesContent').style.display = 'none';
            document.querySelector('.study-tiles').style.display = 'none';
            document.querySelector('.page-title').style.display = 'none';
        }

        // ======= Core Rules Interactive Functions =======

        // Show detailed content when clicking on Core Rules tile
        function showCoreRulesContent() {
            document.getElementById('detailedContent').style.display = 'block';
            document.getElementById('overviewContent').style.display = 'none';
            document.getElementById('coreRulesContent').style.display = 'block';
            document.getElementById('exceptionsContent').style.display = 'none';
            document.querySelector('.study-tiles').style.display = 'none';
            document.querySelector('.page-title').style.display = 'none';
            
            // Track content engagement
            updateProgress('coreRules', 'contentEngagement', 0, 0, 1);
        }

        // Show detailed content when clicking on Exceptions tile
        function showExceptionsContent() {
            document.getElementById('detailedContent').style.display = 'block';
            document.getElementById('overviewContent').style.display = 'none';
            document.getElementById('coreRulesContent').style.display = 'none';
            document.getElementById('exceptionsContent').style.display = 'block';
            document.getElementById('ionFormationContent').style.display = 'none';
            document.querySelector('.study-tiles').style.display = 'none';
            document.querySelector('.page-title').style.display = 'none';
            
            // Track content engagement
            updateProgress('exceptions', 'contentEngagement', 0, 0, 1);
        }

        // Show detailed content when clicking on Ion Formation tile
        function showIonFormationContent() {
            document.getElementById('detailedContent').style.display = 'block';
            document.getElementById('overviewContent').style.display = 'none';
            document.getElementById('coreRulesContent').style.display = 'none';
            document.getElementById('exceptionsContent').style.display = 'none';
            document.getElementById('ionFormationContent').style.display = 'block';
            document.querySelector('.study-tiles').style.display = 'none';
            document.querySelector('.page-title').style.display = 'none';
            
            // Track content engagement
            updateProgress('ionFormation', 'contentEngagement', 0, 0, 1);
        }

        // Aufbau Sequence Demonstration
        function showFillingOrder() {
            // Complete Aufbau sequence from main app: 1s → 2s → 2p → 3s → 3p → 4s → 3d → 4p → 5s → 4d → 5p → 6s → 4f → 5d → 6p → 7s → 5f → 6d → 7p
            // This follows the main app's electron filling logic exactly
            
            // Reset all slots first
            resetAufbau();
            
            // Define the complete filling order based on main app ORDER constant
            const fillingSequence = [
                // 1s orbital (2 electrons)
                { slotId: '1s-1', spin: 'up' },
                { slotId: '1s-2', spin: 'down' },
                
                // 2s orbital (2 electrons)  
                { slotId: '2s-1', spin: 'up' },
                { slotId: '2s-2', spin: 'down' },
                
                // 2p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '2p-1', spin: 'up' },    // 2px first electron
                { slotId: '2p-3', spin: 'up' },    // 2py first electron  
                { slotId: '2p-5', spin: 'up' },    // 2pz first electron
                { slotId: '2p-2', spin: 'down' },  // 2px second electron
                { slotId: '2p-4', spin: 'down' },  // 2py second electron
                { slotId: '2p-6', spin: 'down' },  // 2pz second electron
                
                // 3s orbital (2 electrons)
                { slotId: '3s-1', spin: 'up' },
                { slotId: '3s-2', spin: 'down' },
                
                // 3p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '3p-1', spin: 'up' },    // 3px first electron
                { slotId: '3p-3', spin: 'up' },    // 3py first electron
                { slotId: '3p-5', spin: 'up' },    // 3pz first electron
                { slotId: '3p-2', spin: 'down' },  // 3px second electron
                { slotId: '3p-4', spin: 'down' },  // 3py second electron
                { slotId: '3p-6', spin: 'down' },  // 3pz second electron
                
                // 4s orbital (2 electrons)
                { slotId: '4s-1', spin: 'up' },
                { slotId: '4s-2', spin: 'down' },
                
                // 3d orbitals (10 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '3d-1', spin: 'up' },    // 3d₁ first electron
                { slotId: '3d-3', spin: 'up' },    // 3d₂ first electron
                { slotId: '3d-5', spin: 'up' },    // 3d₃ first electron
                { slotId: '3d-7', spin: 'up' },    // 3d₄ first electron
                { slotId: '3d-9', spin: 'up' },    // 3d₅ first electron
                { slotId: '3d-2', spin: 'down' },  // 3d₁ second electron
                { slotId: '3d-4', spin: 'down' },  // 3d₂ second electron
                { slotId: '3d-6', spin: 'down' },  // 3d₃ second electron
                { slotId: '3d-8', spin: 'down' },  // 3d₄ second electron
                { slotId: '3d-10', spin: 'down' }, // 3d₅ second electron
                
                // 4p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '4p-1', spin: 'up' },    // 4px first electron
                { slotId: '4p-3', spin: 'up' },    // 4py first electron
                { slotId: '4p-5', spin: 'up' },    // 4pz first electron
                { slotId: '4p-2', spin: 'down' },  // 4px second electron
                { slotId: '4p-4', spin: 'down' },  // 4py second electron
                { slotId: '4p-6', spin: 'down' },  // 4pz second electron
                
                // 5s orbital (2 electrons)
                { slotId: '5s-1', spin: 'up' },
                { slotId: '5s-2', spin: 'down' },
                
                // 4d orbitals (10 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '4d-1', spin: 'up' },    // 4d₁ first electron
                { slotId: '4d-3', spin: 'up' },    // 4d₂ first electron
                { slotId: '4d-5', spin: 'up' },    // 4d₃ first electron
                { slotId: '4d-7', spin: 'up' },    // 4d₄ first electron
                { slotId: '4d-9', spin: 'up' },    // 4d₅ first electron
                { slotId: '4d-2', spin: 'down' },  // 4d₁ second electron
                { slotId: '4d-4', spin: 'down' },  // 4d₂ second electron
                { slotId: '4d-6', spin: 'down' },  // 4d₃ second electron
                { slotId: '4d-8', spin: 'down' },  // 4d₄ second electron
                { slotId: '4d-10', spin: 'down' }, // 4d₅ second electron
                
                // 5p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '5p-1', spin: 'up' },    // 5px first electron
                { slotId: '5p-3', spin: 'up' },    // 5py first electron
                { slotId: '5p-5', spin: 'up' },    // 5pz first electron
                { slotId: '5p-2', spin: 'down' },  // 5px second electron
                { slotId: '5p-4', spin: 'down' },  // 5py second electron
                { slotId: '5p-6', spin: 'down' },  // 5pz second electron
                
                // 6s orbital (2 electrons)
                { slotId: '6s-1', spin: 'up' },
                { slotId: '6s-2', spin: 'down' },
                
                // 4f orbitals (14 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '4f-1', spin: 'up' },    // 4f₁ first electron
                { slotId: '4f-3', spin: 'up' },    // 4f₂ first electron
                { slotId: '4f-5', spin: 'up' },    // 4f₃ first electron
                { slotId: '4f-7', spin: 'up' },    // 4f₄ first electron
                { slotId: '4f-9', spin: 'up' },    // 4f₅ first electron
                { slotId: '4f-11', spin: 'up' },   // 4f₆ first electron
                { slotId: '4f-13', spin: 'up' },   // 4f₇ first electron
                { slotId: '4f-2', spin: 'down' },  // 4f₁ second electron
                { slotId: '4f-4', spin: 'down' },  // 4f₂ second electron
                { slotId: '4f-6', spin: 'down' },  // 4f₃ second electron
                { slotId: '4f-8', spin: 'down' },  // 4f₄ second electron
                { slotId: '4f-10', spin: 'down' }, // 4f₅ second electron
                { slotId: '4f-12', spin: 'down' }, // 4f₆ second electron
                { slotId: '4f-14', spin: 'down' }, // 4f₇ second electron
                
                // 5d orbitals (10 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '5d-1', spin: 'up' },    // 5d₁ first electron
                { slotId: '5d-3', spin: 'up' },    // 5d₂ first electron
                { slotId: '5d-5', spin: 'up' },    // 5d₃ first electron
                { slotId: '5d-7', spin: 'up' },    // 5d₄ first electron
                { slotId: '5d-9', spin: 'up' },    // 5d₅ first electron
                { slotId: '5d-2', spin: 'down' },  // 5d₁ second electron
                { slotId: '5d-4', spin: 'down' },  // 5d₂ second electron
                { slotId: '5d-6', spin: 'down' },  // 5d₃ second electron
                { slotId: '5d-8', spin: 'down' },  // 5d₄ second electron
                { slotId: '5d-10', spin: 'down' }, // 5d₅ second electron
                
                // 6p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '6p-1', spin: 'up' },    // 6px first electron
                { slotId: '6p-3', spin: 'up' },    // 6py first electron
                { slotId: '6p-5', spin: 'up' },    // 6pz first electron
                { slotId: '6p-2', spin: 'down' },  // 6px second electron
                { slotId: '6p-4', spin: 'down' },  // 6py second electron
                { slotId: '6p-6', spin: 'down' },  // 6pz second electron
                
                // 7s orbital (2 electrons)
                { slotId: '7s-1', spin: 'up' },
                { slotId: '7s-2', spin: 'down' },
                
                // 5f orbitals (14 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '5f-1', spin: 'up' },    // 5f₁ first electron
                { slotId: '5f-3', spin: 'up' },    // 5f₂ first electron
                { slotId: '5f-5', spin: 'up' },    // 5f₃ first electron
                { slotId: '5f-7', spin: 'up' },    // 5f₄ first electron
                { slotId: '5f-9', spin: 'up' },    // 5f₅ first electron
                { slotId: '5f-11', spin: 'up' },   // 5f₆ first electron
                { slotId: '5f-13', spin: 'up' },   // 5f₇ first electron
                { slotId: '5f-2', spin: 'down' },  // 5f₁ second electron
                { slotId: '5f-4', spin: 'down' },  // 5f₂ second electron
                { slotId: '5f-6', spin: 'down' },  // 5f₃ second electron
                { slotId: '5f-8', spin: 'down' },  // 5f₄ second electron
                { slotId: '5f-10', spin: 'down' }, // 5f₅ second electron
                { slotId: '5f-12', spin: 'down' }, // 5f₆ second electron
                { slotId: '5f-14', spin: 'down' }, // 5f₇ second electron
                
                // 6d orbitals (10 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '6d-1', spin: 'up' },    // 6d₁ first electron
                { slotId: '6d-3', spin: 'up' },    // 6d₂ first electron
                { slotId: '6d-5', spin: 'up' },    // 6d₃ first electron
                { slotId: '6d-7', spin: 'up' },    // 6d₄ first electron
                { slotId: '6d-9', spin: 'up' },    // 6d₅ first electron
                { slotId: '6d-2', spin: 'down' },  // 6d₁ second electron
                { slotId: '6d-4', spin: 'down' },  // 6d₂ second electron
                { slotId: '6d-6', spin: 'down' },  // 6d₃ second electron
                { slotId: '6d-8', spin: 'down' },  // 6d₄ second electron
                { slotId: '6d-10', spin: 'down' }, // 6d₅ second electron
                
                // 7p orbitals (6 electrons) - Hund's rule: one in each orbital first, then pair
                { slotId: '7p-1', spin: 'up' },    // 7px first electron
                { slotId: '7p-3', spin: 'up' },    // 7py first electron
                { slotId: '7p-5', spin: 'up' },    // 7pz first electron
                { slotId: '7p-2', spin: 'down' },  // 7px second electron
                { slotId: '7p-4', spin: 'down' },  // 7py second electron
                { slotId: '7p-6', spin: 'down' }   // 7pz second electron
            ];
            
            let currentIndex = 0;
            
            const fillNextElectron = () => {
                if (currentIndex >= fillingSequence.length) return;
                
                const { slotId, spin } = fillingSequence[currentIndex];
                const slot = document.querySelector(`[data-orbital="${slotId}"]`);
                
                if (slot) {
                    // Use same electron symbols as main app: "up" → "↑", "down" → "↓"
                    const electronSymbol = spin === 'up' ? '↑' : '↓';
                    
                    // Apply correct classes: 'filled' for up spins, 'paired' for down spins (red)
                    if (spin === 'up') {
                        slot.classList.add('filled');
                    } else {
                        slot.classList.add('paired'); // This makes down spins red
                    }
                    
                    slot.textContent = electronSymbol;
                    slot.style.animation = 'pulse 0.5s ease-in-out';
                    setTimeout(() => {
                        slot.style.animation = '';
                    }, 500);
                }
                
                currentIndex++;
                setTimeout(fillNextElectron, 300); // Faster animation for longer sequence
            };
            
            fillNextElectron();
        }

        function resetAufbau() {
            const slots = document.querySelectorAll('#aufbauBuilding .slot');
            slots.forEach(slot => {
                slot.classList.remove('filled', 'half-filled', 'paired');
                slot.textContent = '';
            });
        }

        // Hund's Rule Demonstration
        function toggleElectron(slot) {
            if (slot.classList.contains('filled')) {
                slot.classList.remove('filled');
                slot.textContent = '';
            } else {
                slot.classList.add('filled');
                slot.textContent = '↑'; // Use main app's "up" spin symbol
            }
        }

        function showElectronDistribution() {
            // Show the correct Hund's rule distribution matching main app logic exactly
            // Main app logic: "Spread out: single-occupy all orbitals first" with same spin, then pair
            
            // Reset first
            resetHund();
            
            // Define the exact Hund's rule filling sequence for p orbitals
            const hundSequence = [
                // Step 1: Spread out - place one electron in each orbital with same spin (up)
                { slotId: 'p1-1', spin: 'up', delay: 500 },   // 2px first electron (↑)
                { slotId: 'p1-3', spin: 'up', delay: 1000 },  // 2py first electron (↑)
                { slotId: 'p1-5', spin: 'up', delay: 1500 },  // 2pz first electron (↑)
                
                // Step 2: Now pair electrons with opposite spins (down)
                { slotId: 'p1-2', spin: 'down', delay: 2000 }, // 2px second electron (↓)
                { slotId: 'p1-4', spin: 'down', delay: 2500 }, // 2py second electron (↓)
                { slotId: 'p1-6', spin: 'down', delay: 3000 }  // 2pz second electron (↓)
            ];
            
            // Execute the sequence
            hundSequence.forEach(({ slotId, spin, delay }) => {
                setTimeout(() => {
                    const slot = document.querySelector(`[data-orbital="${slotId}"]`);
                    if (slot) {
                        // Use same electron symbols as main app: "up" → "↑", "down" → "↓"
                        const electronSymbol = spin === 'up' ? '↑' : '↓';
                        
                        if (spin === 'up') {
                            slot.classList.add('filled');
                        } else {
                            slot.classList.add('paired');
                        }
                        slot.textContent = electronSymbol;
                        slot.style.animation = 'pulse 0.5s ease-in-out';
                        setTimeout(() => {
                            slot.style.animation = '';
                        }, 500);
                    }
                }, delay);
            });
        }

        function resetHund() {
            const slots = document.querySelectorAll('#hundBuilding .slot');
            slots.forEach(slot => {
                slot.classList.remove('half-filled', 'paired', 'filled');
                slot.textContent = '';
            });
        }

        // Pauli Exclusion Principle
        let electronCount = 0;
        const maxElectrons = 2;

        function addElectron(slot) {
            if (electronCount < maxElectrons) {
                electronCount++;
                updateElectronDisplay();
                
                if (electronCount === 1) {
                    slot.classList.add('filled');
                    slot.textContent = '↑';
                } else if (electronCount === 2) {
                    slot.classList.add('paired');
                    slot.textContent = '↓';
                }
                
                showPauliFeedback();
            }
        }

        function updateElectronDisplay() {
            const countElement = document.getElementById('electronCount');
            if (countElement) {
                countElement.textContent = electronCount;
            }
        }

        function showPauliFeedback() {
            const feedbackElement = document.getElementById('pauliFeedback');
            if (feedbackElement) {
                if (electronCount === 1) {
                    feedbackElement.textContent = '✅ First electron added successfully!';
                    feedbackElement.className = 'pauli-feedback success';
                } else if (electronCount === 2) {
                    feedbackElement.textContent = '✅ Second electron added with opposite spin! Pauli principle satisfied.';
                    feedbackElement.className = 'pauli-feedback success';
                }
            }
        }

        function testPauli() {
            const feedbackElement = document.getElementById('pauliFeedback');
            if (feedbackElement) {
                if (electronCount === 0) {
                    feedbackElement.textContent = '❌ No electrons added yet. Try adding electrons to test the rule!';
                    feedbackElement.className = 'pauli-feedback error';
                } else if (electronCount === 1) {
                    feedbackElement.textContent = '✅ Good! One electron can occupy an orbital. Add another to test pairing!';
                    feedbackElement.className = 'pauli-feedback success';
                } else if (electronCount === 2) {
                    feedbackElement.textContent = '✅ Perfect! Two electrons with opposite spins can share an orbital. Pauli principle demonstrated!';
                    feedbackElement.className = 'pauli-feedback success';
                }
            }
        }

        function resetPauli() {
            electronCount = 0;
            updateElectronDisplay();
            const slots = document.querySelectorAll('#pauliBuilding .slot');
            slots.forEach(slot => {
                slot.classList.remove('filled', 'paired');
                slot.textContent = '';
            });
            const feedbackElement = document.getElementById('pauliFeedback');
            if (feedbackElement) {
                feedbackElement.textContent = '';
                feedbackElement.className = 'pauli-feedback';
            }
        }

        // Quiz Functions
        let quizAnswers = {};

        function checkAnswer(questionNum, selectedAnswer) {
            const correctAnswers = {
                1: 'a', // 1s → 2s → 2p → 3s → 3p → 4s → 3d
                2: 'b', // Spread out with parallel spins first
                3: 'b', // 2 electrons max per orbital
                4: 'c', // One electron in each orbital, then pair (px: ↑, py: ↑, pz: ↑↓)
                5: 'b', // They have opposite spins (one ↑ and one ↓)
                6: 'a', // Neon (Ne)
                7: 'b', // 2 unpaired electrons
                8: 'a', // 1s² 2s² 2p² (6 electrons total)
                9: 'b', // Hund's Rule
                10: 'b', // 5 orbitals
                11: 'b' // px: ↑, py: ↑, pz: ↑ (all unpaired)
            };

            quizAnswers[questionNum] = selectedAnswer;
            
            // Update button appearance
            const options = document.querySelectorAll(`.quiz-question:nth-child(${questionNum}) .quiz-option`);
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
                const optionLetter = option.textContent.charAt(0).toLowerCase();
                if (optionLetter === correctAnswers[questionNum]) {
                    option.classList.add('correct');
                } else if (optionLetter === selectedAnswer) {
                    option.classList.add('incorrect');
                }
            });

            // Check if all questions are answered
            if (Object.keys(quizAnswers).length === 11) {
                setTimeout(showQuizResults, 1000);
            }
        }

        function showQuizResults() {
            const correctAnswers = {
                1: 'a', // 1s → 2s → 2p → 3s → 3p → 4s → 3d
                2: 'b', // Spread out with parallel spins first
                3: 'b', // 2 electrons max per orbital
                4: 'c', // One electron in each orbital, then pair (px: ↑, py: ↑, pz: ↑↓)
                5: 'b', // They have opposite spins (one ↑ and one ↓)
                6: 'a', // Neon (Ne)
                7: 'b', // 2 unpaired electrons
                8: 'a', // 1s² 2s² 2p² (6 electrons total)
                9: 'b', // Hund's Rule
                10: 'b', // 5 orbitals
                11: 'b' // px: ↑, py: ↑, pz: ↑ (all unpaired)
            };

            let score = 0;
            for (let question in quizAnswers) {
                if (quizAnswers[question] === correctAnswers[question]) {
                    score++;
                }
            }

            const scoreElement = document.getElementById('quizScore');
            const feedbackElement = document.getElementById('quizFeedback');
            const resultsElement = document.getElementById('quizResults');

            if (scoreElement) scoreElement.textContent = score;
            if (feedbackElement) {
                if (score >= 9) {
                    feedbackElement.textContent = '🎉 Excellent! You have mastered the core rules and electron configurations!';
                } else if (score >= 7) {
                    feedbackElement.textContent = '👍 Good work! You understand most concepts. Review the incorrect answers to strengthen your understanding.';
                } else if (score >= 5) {
                    feedbackElement.textContent = '📚 Keep studying! You have a basic understanding but need more practice with the core rules.';
                } else {
                    feedbackElement.textContent = '🔄 Review the material! Focus on the three core rules and orbital notation.';
                }
            }
            if (resultsElement) resultsElement.style.display = 'block';

            // Track progress in localStorage
            updateProgress('coreRules', 'understandingCheck', score, 11);
        }

        // Hide detailed content and return to tiles
        function hideDetailedContent() {
            document.getElementById('detailedContent').style.display = 'none';
            document.querySelector('.study-tiles').style.display = 'grid';
            document.querySelector('.page-title').style.display = 'block';
        }

        // Progress tracking function
        function updateProgress(concept, activityType, score = 0, totalQuestions = 0, timeSpent = 0) {
            const savedProgress = localStorage.getItem('electronTowerProgress');
            const progress = savedProgress ? JSON.parse(savedProgress) : getDefaultProgress();
            
            if (!progress.concepts[concept]) {
                progress.concepts[concept] = { 
                    completed: false, 
                    score: 0, 
                    attempts: 0, 
                    timeSpent: 0,
                    activities: {
                        vocabularyQuiz: { completed: false, score: 0, attempts: 0 },
                        understandingCheck: { completed: false, score: 0, attempts: 0 },
                        interactiveDemos: { completed: 0, total: 0 },
                        contentEngagement: { completed: false, timeSpent: 0 }
                    }
                };
            }
            
            // Update specific activity
            if (activityType === 'vocabularyQuiz') {
                progress.concepts[concept].activities.vocabularyQuiz.score += score;
                progress.concepts[concept].activities.vocabularyQuiz.attempts++;
                progress.concepts[concept].activities.vocabularyQuiz.completed = (score / totalQuestions) >= 0.7;
            } else if (activityType === 'understandingCheck') {
                progress.concepts[concept].activities.understandingCheck.score += score;
                progress.concepts[concept].activities.understandingCheck.attempts++;
                progress.concepts[concept].activities.understandingCheck.completed = (score / totalQuestions) >= 0.7;
            } else if (activityType === 'interactiveDemo') {
                progress.concepts[concept].activities.interactiveDemos.completed++;
            } else if (activityType === 'contentEngagement') {
                progress.concepts[concept].activities.contentEngagement.completed = true;
                progress.concepts[concept].activities.contentEngagement.timeSpent += timeSpent;
            }
            
            // Update overall concept progress
            progress.concepts[concept].score += score;
            progress.concepts[concept].attempts++;
            progress.concepts[concept].timeSpent += timeSpent;
            
            // Calculate overall completion based on weighted activities
            const activities = progress.concepts[concept].activities;
            const vocabWeight = 0.2;
            const understandingWeight = 0.3;
            const interactiveWeight = 0.3;
            const engagementWeight = 0.2;
            
            let completionScore = 0;
            if (activities.vocabularyQuiz.completed) completionScore += vocabWeight;
            if (activities.understandingCheck.completed) completionScore += understandingWeight;
            if (activities.interactiveDemos.completed > 0) completionScore += interactiveWeight;
            if (activities.contentEngagement.completed) completionScore += engagementWeight;
            
            progress.concepts[concept].completed = completionScore >= 0.7; // 70% of activities completed
            
            // Update streak
            const today = new Date().toDateString();
            if (progress.lastStudyDate !== today) {
                progress.streak++;
                progress.lastStudyDate = today;
            }
            
            localStorage.setItem('electronTowerProgress', JSON.stringify(progress));
            
            // Update tile progress indicators
            updateTileProgressIndicators();
            
            // Check for achievements
            checkAchievements(progress);
        }

        function getDefaultProgress() {
            const defaultConcept = {
                completed: false, 
                score: 0, 
                attempts: 0, 
                timeSpent: 0,
                activities: {
                    vocabularyQuiz: { completed: false, score: 0, attempts: 0 },
                    understandingCheck: { completed: false, score: 0, attempts: 0 },
                    interactiveDemos: { completed: 0, total: 0 },
                    contentEngagement: { completed: false, timeSpent: 0 }
                }
            };
            
            return {
                concepts: {
                    overview: { ...defaultConcept },
                    coreRules: { ...defaultConcept },
                    sublevels: { ...defaultConcept },
                    exceptions: { ...defaultConcept },
                    applications: { ...defaultConcept },
                    practice: { ...defaultConcept }
                },
                achievements: [],
                streak: 0,
                lastStudyDate: null,
                totalQuizzes: 0,
                totalTimeSpent: 0
            };
        }

        // Test function to verify progress tracking
        function testProgressSystem() {
            console.log('🧪 Testing Progress System...');
            
            // Clear existing progress for clean test
            localStorage.removeItem('electronTowerProgress');
            
            // Test 1: Content Engagement
            console.log('Test 1: Content Engagement');
            updateProgress('coreRules', 'contentEngagement', 0, 0, 1);
            let progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            console.log('After content engagement:', progress.concepts.coreRules.activities.contentEngagement);
            
            // Test 2: Interactive Demo
            console.log('Test 2: Interactive Demo');
            updateProgress('exceptions', 'interactiveDemo');
            progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            console.log('After interactive demo:', progress.concepts.exceptions.activities.interactiveDemos);
            
            // Test 3: Vocabulary Quiz
            console.log('Test 3: Vocabulary Quiz');
            updateProgress('coreRules', 'vocabularyQuiz', 6, 8);
            progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            console.log('After vocab quiz:', progress.concepts.coreRules.activities.vocabularyQuiz);
            
            // Test 4: Understanding Check
            console.log('Test 4: Understanding Check');
            updateProgress('exceptions', 'understandingCheck', 4, 5);
            progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            console.log('After understanding check:', progress.concepts.exceptions.activities.understandingCheck);
            
            // Test 5: Progress Calculation
            console.log('Test 5: Progress Calculation');
            const coreRulesActivities = progress.concepts.coreRules.activities;
            const exceptionsActivities = progress.concepts.exceptions.activities;
            
            console.log('Core Rules Progress:', calculateConceptProgress(coreRulesActivities));
            console.log('Exceptions Progress:', calculateConceptProgress(exceptionsActivities));
            
            // Update tile indicators
            updateTileProgressIndicators();
            
            console.log('✅ Progress system test completed!');
        }
        
        // Comprehensive test simulating real user interactions
        function testRealUserFlow() {
            console.log('🎯 Testing Real User Flow...');
            
            // Clear existing progress
            localStorage.removeItem('electronTowerProgress');
            
            // Simulate user clicking "Learn More" on Core Rules
            console.log('Step 1: User clicks Learn More on Core Rules');
            showCoreRulesContent();
            
            // Simulate user taking vocabulary quiz (6/8 correct)
            console.log('Step 2: User takes vocabulary quiz (6/8 correct)');
            updateProgress('coreRules', 'vocabularyQuiz', 6, 8);
            
            // Simulate user taking understanding check (8/11 correct)
            console.log('Step 3: User takes understanding check (8/11 correct)');
            updateProgress('coreRules', 'understandingCheck', 8, 11);
            
            // Simulate user clicking "Learn More" on Exceptions
            console.log('Step 4: User clicks Learn More on Exceptions');
            showExceptionsContent();
            
            // Simulate user running Cr exception demo
            console.log('Step 5: User runs Chromium exception demo');
            updateProgress('exceptions', 'interactiveDemo');
            
            // Simulate user running Cu exception demo
            console.log('Step 6: User runs Copper exception demo');
            updateProgress('exceptions', 'interactiveDemo');
            
            // Simulate user taking exceptions vocabulary quiz (4/5 correct)
            console.log('Step 7: User takes exceptions vocabulary quiz (4/5 correct)');
            updateProgress('exceptions', 'vocabularyQuiz', 4, 5);
            
            // Simulate user taking exceptions understanding check (3/5 correct)
            console.log('Step 8: User takes exceptions understanding check (3/5 correct)');
            updateProgress('exceptions', 'understandingCheck', 3, 5);
            
            // Check final progress
            const progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            console.log('Final Progress State:', progress);
            
            // Calculate and display progress
            const coreRulesProgress = calculateConceptProgress(progress.concepts.coreRules.activities);
            const exceptionsProgress = calculateConceptProgress(progress.concepts.exceptions.activities);
            
            console.log('Core Rules Progress:', coreRulesProgress);
            console.log('Exceptions Progress:', exceptionsProgress);
            
            // Update tile indicators
            updateTileProgressIndicators();
            
            console.log('✅ Real user flow test completed!');
        }
        
        // Function to display current progress state
        function showProgressState() {
            const progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            if (!progress) {
                console.log('No progress data found');
                return;
            }
            
            console.log('📊 Current Progress State:');
            console.log('Overall Progress:', progress);
            
            Object.keys(progress.concepts).forEach(concept => {
                const conceptData = progress.concepts[concept];
                if (conceptData.activities) {
                    const progressData = calculateConceptProgress(conceptData.activities);
                    console.log(`${concept}:`, {
                        percentage: progressData.percentage + '%',
                        activities: `${progressData.activitiesCompleted}/${progressData.totalActivities}`,
                        completed: conceptData.completed,
                        activities: conceptData.activities
                    });
                }
            });
        }
        
        // Simple test to verify basic functionality
        function quickTest() {
            console.log('⚡ Quick Progress Test...');
            
            // Clear and test basic progress tracking
            localStorage.removeItem('electronTowerProgress');
            
            // Test basic progress update
            updateProgress('coreRules', 'contentEngagement', 0, 0, 1);
            const progress = JSON.parse(localStorage.getItem('electronTowerProgress'));
            
            console.log('✅ Basic progress tracking works:', progress.concepts.coreRules.activities.contentEngagement.completed);
            
            // Test progress calculation
            const progressData = calculateConceptProgress(progress.concepts.coreRules.activities);
            console.log('✅ Progress calculation works:', progressData);
            
            // Test tile indicator update
            updateTileProgressIndicators();
            console.log('✅ Tile indicators updated');
            
            console.log('🎉 All basic tests passed!');
        }
        
        // Manual test function to create progress and display it
        function testProgressDisplay() {
            console.log('🧪 Testing Progress Display...');
            
            // Create some test progress
            updateProgress('coreRules', 'contentEngagement', 0, 0, 1);
            updateProgress('coreRules', 'vocabularyQuiz', 6, 8);
            updateProgress('exceptions', 'contentEngagement', 0, 0, 1);
            updateProgress('exceptions', 'interactiveDemo');
            
            console.log('✅ Test progress created and displayed');
            console.log('Check the Core Rules and Exceptions tiles for progress bars!');
        }
        
        // Reset all progress function
        function resetAllProgress() {
            console.log('🔄 Resetting all progress...');
            localStorage.removeItem('electronTowerProgress');
            updateTileProgressIndicators();
            console.log('✅ All progress reset! Tiles should now show 0% progress.');
        }
        
        // Quick test function for browser console
        function testTileProgress() {
            console.log('🎯 Testing Tile Progress Indicators...');
            
            // Clear existing progress
            localStorage.removeItem('electronTowerProgress');
            
            // Test 1: No progress (should show 0%)
            updateTileProgressIndicators();
            console.log('✅ Test 1: No progress - should show 0%');
            
            // Test 2: Some progress
            updateProgress('coreRules', 'contentEngagement', 0, 0, 1);
            console.log('✅ Test 2: Content engagement - should show 20%');
            
            // Test 3: More progress
            updateProgress('coreRules', 'vocabularyQuiz', 6, 8);
            console.log('✅ Test 3: + Vocabulary quiz - should show 40%');
            
            // Test 4: Even more progress
            updateProgress('coreRules', 'understandingCheck', 8, 11);
            console.log('✅ Test 4: + Understanding check - should show 70%');
            
            // Test 5: Complete progress
            updateProgress('coreRules', 'interactiveDemo');
            console.log('✅ Test 5: + Interactive demo - should show 100%');
            
            console.log('🎉 All tests completed! Check the Core Rules tile for progress updates.');
        }
        
        // Debug function to check current progress state
        function debugProgress() {
            console.log('🔍 Debugging Progress State...');
            
            const savedProgress = localStorage.getItem('electronTowerProgress');
            console.log('localStorage data:', savedProgress);
            
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                console.log('Parsed progress:', progress);
                console.log('Core Rules activities:', progress.concepts?.coreRules?.activities);
                console.log('Exceptions activities:', progress.concepts?.exceptions?.activities);
            } else {
                console.log('No progress data found in localStorage');
            }
            
            // Check if tiles exist
            const coreRulesTile = document.querySelector('.study-tile.rules');
            const exceptionsTile = document.querySelector('.study-tile.exceptions');
            console.log('Core Rules tile found:', !!coreRulesTile);
            console.log('Exceptions tile found:', !!exceptionsTile);
            
            if (coreRulesTile) {
                const progressDiv = coreRulesTile.querySelector('.tile-progress');
                console.log('Core Rules progress div:', progressDiv?.innerHTML);
            }
            
            if (exceptionsTile) {
                const progressDiv = exceptionsTile.querySelector('.tile-progress');
                console.log('Exceptions progress div:', progressDiv?.innerHTML);
            }
        }
        
        // Add debug buttons for testing (temporary)
        function addDebugButtons() {
            // Create debug panel
            const debugPanel = document.createElement('div');
            debugPanel.id = 'debug-panel';
            debugPanel.style.cssText = `
                position: fixed;
                top: 10px;
                right: 10px;
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 10px;
                border-radius: 10px;
                z-index: 1000;
                font-size: 12px;
            `;
            
            debugPanel.innerHTML = `
                <div style="margin-bottom: 5px; font-weight: bold;">Debug Panel</div>
                <button onclick="resetAllProgress()" style="margin: 2px; padding: 5px; font-size: 10px;">Reset</button>
                <button onclick="debugProgress()" style="margin: 2px; padding: 5px; font-size: 10px;">Debug</button>
                <button onclick="testTileProgress()" style="margin: 2px; padding: 5px; font-size: 10px;">Test</button>
            `;
            
            document.body.appendChild(debugPanel);
        }
        
        function calculateConceptProgress(activities) {
            const vocabWeight = 0.2;
            const understandingWeight = 0.3;
            const interactiveWeight = 0.3;
            const engagementWeight = 0.2;
            
            let completionScore = 0;
            if (activities.vocabularyQuiz.completed) completionScore += vocabWeight;
            if (activities.understandingCheck.completed) completionScore += understandingWeight;
            if (activities.interactiveDemos.completed > 0) completionScore += interactiveWeight;
            if (activities.contentEngagement.completed) completionScore += engagementWeight;
            
            return {
                percentage: Math.round(completionScore * 100),
                activitiesCompleted: Math.round(completionScore * 4),
                totalActivities: 4
            };
        }

        function checkAchievements(progress) {
            const achievements = progress.achievements || [];
            
            // First quiz achievement
            const totalQuizzes = Object.values(progress.concepts).reduce((sum, c) => sum + c.attempts, 0);
            if (totalQuizzes >= 1 && !achievements.includes('first_quiz')) {
                achievements.push('first_quiz');
                showAchievementNotification('First Steps', 'Complete your first quiz!');
            }
            
            // Perfect score achievement
            const hasPerfectScore = Object.values(progress.concepts).some(c => c.score > 0 && c.score === c.attempts);
            if (hasPerfectScore && !achievements.includes('perfect_score')) {
                achievements.push('perfect_score');
                showAchievementNotification('Perfectionist', 'Get a perfect quiz score!');
            }
            
            // All concepts achievement
            const allCompleted = Object.values(progress.concepts).every(c => c.completed);
            if (allCompleted && !achievements.includes('all_concepts')) {
                achievements.push('all_concepts');
                showAchievementNotification('Electron Expert', 'Complete all concepts!');
            }
            
            progress.achievements = achievements;
            localStorage.setItem('electronTowerProgress', JSON.stringify(progress));
        }

        function showAchievementNotification(title, description) {
            // Create a simple notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--success);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">🏆 ${title}</div>
                <div style="font-size: 0.9rem;">${description}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        function updateTileProgressIndicators() {
            // Get progress data or use default
            const savedProgress = localStorage.getItem('electronTowerProgress');
            let progress;
            
            if (savedProgress) {
                progress = JSON.parse(savedProgress);
            } else {
                // Initialize with default progress structure
                progress = getDefaultProgress();
                localStorage.setItem('electronTowerProgress', JSON.stringify(progress));
            }
            
            // Update Core Rules tile
            const coreRulesProgress = progress.concepts.coreRules;
            if (coreRulesProgress && coreRulesProgress.activities) {
                const activities = coreRulesProgress.activities;
                const vocabWeight = 0.2;
                const understandingWeight = 0.3;
                const interactiveWeight = 0.3;
                const engagementWeight = 0.2;
                
                let completionScore = 0;
                if (activities.vocabularyQuiz.completed) completionScore += vocabWeight;
                if (activities.understandingCheck.completed) completionScore += understandingWeight;
                if (activities.interactiveDemos.completed > 0) completionScore += interactiveWeight;
                if (activities.contentEngagement.completed) completionScore += engagementWeight;
                
                const percentage = Math.round(completionScore * 100);
                const activitiesCompleted = Math.round(completionScore * 4);
                
                const tile = document.querySelector('.study-tile.rules');
                if (tile) {
                    // Remove existing progress div if it exists
                    const existingProgress = tile.querySelector('.tile-progress');
                    if (existingProgress) {
                        existingProgress.remove();
                    }
                    
                    // Create new progress div
                    const progressDiv = document.createElement('div');
                    progressDiv.className = 'tile-progress';
                    progressDiv.style.cssText = `
                        background: ${percentage > 0 ? 'var(--success)' : 'var(--neutral)'};
                        color: white;
                        padding: 5px 10px;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        margin-top: 10px;
                        text-align: center;
                    `;
                    progressDiv.innerHTML = `Progress: ${percentage}% (${activitiesCompleted}/4 activities)`;
                    tile.querySelector('.tile-header').appendChild(progressDiv);
                }
            }

            // Update Exceptions tile
            const exceptionsProgress = progress.concepts.exceptions;
            if (exceptionsProgress && exceptionsProgress.activities) {
                const activities = exceptionsProgress.activities;
                const vocabWeight = 0.2;
                const understandingWeight = 0.3;
                const interactiveWeight = 0.3;
                const engagementWeight = 0.2;
                
                let completionScore = 0;
                if (activities.vocabularyQuiz.completed) completionScore += vocabWeight;
                if (activities.understandingCheck.completed) completionScore += understandingWeight;
                if (activities.interactiveDemos.completed > 0) completionScore += interactiveWeight;
                if (activities.contentEngagement.completed) completionScore += engagementWeight;
                
                const percentage = Math.round(completionScore * 100);
                const activitiesCompleted = Math.round(completionScore * 4);
                
                const tile = document.querySelector('.study-tile.exceptions');
                if (tile) {
                    // Remove existing progress div if it exists
                    const existingProgress = tile.querySelector('.tile-progress');
                    if (existingProgress) {
                        existingProgress.remove();
                    }
                    
                    // Create new progress div
                    const progressDiv = document.createElement('div');
                    progressDiv.className = 'tile-progress';
                    progressDiv.style.cssText = `
                        background: ${percentage > 0 ? 'var(--success)' : 'var(--neutral)'};
                        color: white;
                        padding: 5px 10px;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        margin-top: 10px;
                        text-align: center;
                    `;
                    progressDiv.innerHTML = `Progress: ${percentage}% (${activitiesCompleted}/4 activities)`;
                    tile.querySelector('.tile-header').appendChild(progressDiv);
                }
            }

            // Update Ion Formation tile
            const ionFormationProgress = progress.concepts.ionFormation;
            if (ionFormationProgress && ionFormationProgress.activities) {
                const activities = ionFormationProgress.activities;
                const vocabWeight = 0.2;
                const understandingWeight = 0.3;
                const interactiveWeight = 0.3;
                const engagementWeight = 0.2;
                
                let completionScore = 0;
                if (activities.vocabularyQuiz.completed) completionScore += vocabWeight;
                if (activities.understandingCheck.completed) completionScore += understandingWeight;
                if (activities.interactiveDemos.completed > 0) completionScore += interactiveWeight;
                if (activities.contentEngagement.completed) completionScore += engagementWeight;
                
                const percentage = Math.round(completionScore * 100);
                const activitiesCompleted = Math.round(completionScore * 4);
                
                const tile = document.querySelector('.study-tile.ions');
                if (tile) {
                    // Remove existing progress div if it exists
                    const existingProgress = tile.querySelector('.tile-progress');
                    if (existingProgress) {
                        existingProgress.remove();
                    }
                    
                    // Create new progress div
                    const progressDiv = document.createElement('div');
                    progressDiv.className = 'tile-progress';
                    progressDiv.style.cssText = `
                        background: ${percentage > 0 ? 'var(--success)' : 'var(--neutral)'};
                        color: white;
                        padding: 5px 10px;
                        border-radius: 15px;
                        font-size: 0.8rem;
                        margin-top: 10px;
                        text-align: center;
                    `;
                    progressDiv.innerHTML = `Progress: ${percentage}% (${activitiesCompleted}/4 activities)`;
                    tile.querySelector('.tile-header').appendChild(progressDiv);
                }
            }
        }

        // ======= Exceptions Interactive Functions =======

        // Chromium Exception Demonstration
        function showChromiumException() {
            const building = document.getElementById('chromiumBuilding');
            const standardConfig = document.getElementById('chromiumStandard');
            const actualConfig = document.getElementById('chromiumActual');
            
            if (!building) return;

            // Clear all slots first
            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.className = 'slot';
            });

            // Reset configuration displays
            if (standardConfig) standardConfig.textContent = '4s² 3d⁴';
            if (actualConfig) actualConfig.textContent = '4s¹ 3d⁵';

            // Chromium (Z=24) filling sequence following ORDER: 4s comes before 3d
            // Standard: 4s² 3d⁴, Exception: 4s¹ 3d⁵
            const fillingSequence = [
                // Step 1: Fill 4s first (following ORDER array)
                { slotId: '4s1', spin: 'up', delay: 500 },
                { slotId: '4s2', spin: 'down', delay: 1000 },
                
                // Step 2: Fill 3d with 4 electrons (Hund's rule: spread out first)
                { slotId: '3d1', spin: 'up', delay: 1500 },
                { slotId: '3d3', spin: 'up', delay: 2000 },
                { slotId: '3d5', spin: 'up', delay: 2500 },
                { slotId: '3d7', spin: 'up', delay: 3000 }
            ];

            // Show standard configuration first (4s² 3d⁴)
            fillingSequence.forEach((electron) => {
                setTimeout(() => {
                    const slot = building.querySelector(`[data-orbital="${electron.slotId}"]`);
                    if (slot) {
                        slot.textContent = electron.spin === 'up' ? '↑' : '↓';
                        slot.classList.add(electron.spin === 'up' ? 'filled' : 'paired');
                    }
                }, electron.delay);
            });

            // Show exception configuration (4s¹ 3d⁵) after delay
            setTimeout(() => {
                // Move one electron from 4s to 3d
                const slot4s2 = building.querySelector('[data-orbital="4s2"]');
                if (slot4s2) {
                    slot4s2.textContent = '';
                    slot4s2.classList.remove('paired');
                }

                // Add electron to 3d (the 5th d electron)
                const slot3d9 = building.querySelector('[data-orbital="3d9"]');
                if (slot3d9) {
                    slot3d9.textContent = '↑';
                    slot3d9.classList.add('filled');
                }

                // Update configuration display to show the transition
                if (standardConfig) {
                    standardConfig.style.opacity = '0.5';
                    standardConfig.style.textDecoration = 'line-through';
                }
                if (actualConfig) {
                    actualConfig.style.opacity = '1';
                    actualConfig.style.fontWeight = 'bold';
                }
                
                // Track interactive demo completion
                updateProgress('exceptions', 'interactiveDemo');
            }, 4000);
        }

        function resetChromiumDemo() {
            const building = document.getElementById('chromiumBuilding');
            const standardConfig = document.getElementById('chromiumStandard');
            const actualConfig = document.getElementById('chromiumActual');
            
            if (!building) return;

            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.className = 'slot';
            });

            // Reset configuration displays
            if (standardConfig) {
                standardConfig.textContent = '4s² 3d⁴';
                standardConfig.style.opacity = '1';
                standardConfig.style.textDecoration = 'none';
            }
            if (actualConfig) {
                actualConfig.textContent = '4s¹ 3d⁵';
                actualConfig.style.opacity = '1';
                actualConfig.style.fontWeight = 'normal';
            }
        }

        // Copper Exception Demonstration
        function showCopperException() {
            const building = document.getElementById('copperBuilding');
            const standardConfig = document.getElementById('copperStandard');
            const actualConfig = document.getElementById('copperActual');
            
            if (!building) return;

            // Clear all slots first
            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.className = 'slot';
            });

            // Reset configuration displays
            if (standardConfig) standardConfig.textContent = '4s² 3d⁹';
            if (actualConfig) actualConfig.textContent = '4s¹ 3d¹⁰';

            // Copper (Z=29) filling sequence following ORDER: 4s comes before 3d
            // Standard: 4s² 3d⁹, Exception: 4s¹ 3d¹⁰
            const fillingSequence = [
                // Step 1: Fill 4s first (following ORDER array)
                { slotId: '4s1', spin: 'up', delay: 500 },
                { slotId: '4s2', spin: 'down', delay: 1000 },
                
                // Step 2: Fill 3d with 9 electrons (Hund's rule: spread out first, then pair)
                { slotId: '3d1', spin: 'up', delay: 1500 },
                { slotId: '3d3', spin: 'up', delay: 2000 },
                { slotId: '3d5', spin: 'up', delay: 2500 },
                { slotId: '3d7', spin: 'up', delay: 3000 },
                { slotId: '3d9', spin: 'up', delay: 3500 },
                { slotId: '3d2', spin: 'down', delay: 4000 },
                { slotId: '3d4', spin: 'down', delay: 4500 },
                { slotId: '3d6', spin: 'down', delay: 5000 },
                { slotId: '3d8', spin: 'down', delay: 5500 }
            ];

            // Show standard configuration first (4s² 3d⁹)
            fillingSequence.forEach((electron) => {
                setTimeout(() => {
                    const slot = building.querySelector(`[data-orbital="${electron.slotId}"]`);
                    if (slot) {
                        slot.textContent = electron.spin === 'up' ? '↑' : '↓';
                        slot.classList.add(electron.spin === 'up' ? 'filled' : 'paired');
                    }
                }, electron.delay);
            });

            // Show exception configuration (4s¹ 3d¹⁰) after delay
            setTimeout(() => {
                // Move one electron from 4s to 3d
                const slot4s2 = building.querySelector('[data-orbital="4s2"]');
                if (slot4s2) {
                    slot4s2.textContent = '';
                    slot4s2.classList.remove('paired');
                }

                // Add electron to 3d (fill the last orbital)
                const slot3d10 = building.querySelector('[data-orbital="3d10"]');
                if (slot3d10) {
                    slot3d10.textContent = '↓';
                    slot3d10.classList.add('paired');
                }

                // Update configuration display to show the transition
                if (standardConfig) {
                    standardConfig.style.opacity = '0.5';
                    standardConfig.style.textDecoration = 'line-through';
                }
                if (actualConfig) {
                    actualConfig.style.opacity = '1';
                    actualConfig.style.fontWeight = 'bold';
                }
                
                // Track interactive demo completion
                updateProgress('exceptions', 'interactiveDemo');
            }, 6500);
        }

        function resetCopperDemo() {
            const building = document.getElementById('copperBuilding');
            const standardConfig = document.getElementById('copperStandard');
            const actualConfig = document.getElementById('copperActual');
            
            if (!building) return;

            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.className = 'slot';
            });

            // Reset configuration displays
            if (standardConfig) {
                standardConfig.textContent = '4s² 3d⁹';
                standardConfig.style.opacity = '1';
                standardConfig.style.textDecoration = 'none';
            }
            if (actualConfig) {
                actualConfig.textContent = '4s¹ 3d¹⁰';
                actualConfig.style.opacity = '1';
                actualConfig.style.fontWeight = 'normal';
            }
        }

        // Exceptions Quiz Functions
        let exceptionQuizAnswers = {};

        function checkExceptionAnswer(questionNum, selectedAnswer) {
            const correctAnswers = {
                1: 'b', // Chromium (Cr)
                2: 'b', // Half-filled and filled subshells provide extra stability
                3: 'b', // [Kr] 5s¹ 4d¹⁰
                4: 'b', // 5 electrons
                5: 'c'  // Calcium (Ca)
            };

            exceptionQuizAnswers[questionNum] = selectedAnswer;
            
            // Update button appearance
            const options = document.querySelectorAll(`.understanding-quiz .quiz-question:nth-child(${questionNum}) .quiz-option`);
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
                const optionLetter = option.textContent.charAt(0).toLowerCase();
                if (optionLetter === correctAnswers[questionNum]) {
                    option.classList.add('correct');
                } else if (optionLetter === selectedAnswer) {
                    option.classList.add('incorrect');
                }
            });

            // Check if all questions are answered
            if (Object.keys(exceptionQuizAnswers).length === 5) {
                setTimeout(showExceptionQuizResults, 1000);
            }
        }

        function showExceptionQuizResults() {
            const correctAnswers = {
                1: 'b', // Chromium (Cr)
                2: 'b', // Half-filled and filled subshells provide extra stability
                3: 'b', // [Kr] 5s¹ 4d¹⁰
                4: 'b', // 5 electrons
                5: 'c'  // Calcium (Ca)
            };

            let score = 0;
            for (let question in exceptionQuizAnswers) {
                if (exceptionQuizAnswers[question] === correctAnswers[question]) {
                    score++;
                }
            }

            const scoreElement = document.getElementById('exceptionQuizScore');
            const feedbackElement = document.getElementById('exceptionQuizFeedback');
            const resultsElement = document.getElementById('exceptionQuizResults');

            if (scoreElement) scoreElement.textContent = score;
            if (feedbackElement) {
                if (score >= 4) {
                    feedbackElement.textContent = '🎉 Excellent! You understand electron configuration exceptions!';
                } else if (score >= 3) {
                    feedbackElement.textContent = '👍 Good work! Review the incorrect answers to strengthen your understanding.';
                } else {
                    feedbackElement.textContent = '📚 Keep studying! Review the exception elements and their configurations.';
                }
            }
            if (resultsElement) resultsElement.style.display = 'block';

            // Track progress in localStorage
            updateProgress('exceptions', 'understandingCheck', score, 5);
        }

        function resetExceptionQuiz() {
            exceptionQuizAnswers = {};
            const options = document.querySelectorAll('.understanding-quiz .quiz-option');
            options.forEach(option => {
                option.classList.remove('correct', 'incorrect');
            });
            document.getElementById('exceptionQuizResults').style.display = 'none';
        }

        // Exceptions Vocabulary Quiz
        function checkExceptionsQuiz() {
            const answers = {
                exceptions1: 'b', // An element that breaks standard rules for greater stability
                exceptions2: 'b', // Half-filled 3d subshell provides extra stability
                exceptions3: 'b', // [Ar] 4s¹ 3d¹⁰
                exceptions4: 'b'  // Half-filled and filled subshells
            };
            
            let correct = 0;
            let total = 4;
            
            // Check each question
            for (let i = 1; i <= total; i++) {
                const selected = document.querySelector(`input[name="exceptions${i}"]:checked`);
                if (selected && selected.value === answers[`exceptions${i}`]) {
                    correct++;
                }
            }
            
            const resultsDiv = document.getElementById('exceptionsResults');
            const percentage = Math.round((correct / total) * 100);
            
            let resultText = '';
            let resultClass = '';
            
            if (percentage >= 80) {
                resultText = `🎉 Excellent! You got ${correct}/${total} correct (${percentage}%). You have a strong understanding of electron configuration exceptions!`;
                resultClass = 'success';
            } else if (percentage >= 60) {
                resultText = `👍 Good job! You got ${correct}/${total} correct (${percentage}%). Review the exception elements to improve further.`;
                resultClass = 'warning';
            } else {
                resultText = `📚 Keep studying! You got ${correct}/${total} correct (${percentage}%). Review the exception section and try again.`;
                resultClass = 'error';
            }
            
            resultsDiv.innerHTML = resultText;
            resultsDiv.className = `pauli-feedback ${resultClass}`;
            resultsDiv.style.display = 'block';

            // Track progress for vocabulary quiz
            updateProgress('exceptions', 'vocabularyQuiz', correct, total);
        }

        function resetExceptionsQuiz() {
            // Clear all radio button selections
            const radioButtons = document.querySelectorAll('input[name^="exceptions"]');
            radioButtons.forEach(radio => {
                radio.checked = false;
            });
            
            // Hide results
            document.getElementById('exceptionsResults').style.display = 'none';
        }

        // Show objective details when clicked
        function showObjectiveDetails(objective) {
            const objectives = {
                aufbau: {
                    title: "Aufbau Principle",
                    description: "Electrons fill orbitals in order of increasing energy, following the diagonal pattern: 1s → 2s → 2p → 3s → 3p → 4s → 3d → 4p...",
                    examples: ["Hydrogen: 1s¹", "Helium: 1s²", "Carbon: 1s² 2s² 2p²", "Neon: 1s² 2s² 2p⁶"]
                },
                hund: {
                    title: "Hund's Rule",
                    description: "Electrons prefer to occupy separate degenerate orbitals with parallel spins before pairing. This maximizes total spin and follows the principle of maximum multiplicity. Degenerate orbitals have the same energy level.",
                    examples: ["Carbon p-subshell: ↑ ↑ (not ↑↓)", "Nitrogen p-subshell: ↑ ↑ ↑", "Oxygen p-subshell: ↑↓ ↑ ↑"]
                },
                pauli: {
                    title: "Pauli Exclusion Principle",
                    description: "No two electrons in an atom can have identical quantum numbers. Each orbital can hold at most 2 electrons, and they must have opposite spins (↑↓).",
                    examples: ["1s orbital: ↑↓ (2 electrons max, opposite spins)", "2p orbital: ↑↓ (2 electrons max, opposite spins)", "3d orbital: ↑↓ (2 electrons max, opposite spins)"]
                },
                exceptions: {
                    title: "Notable Exceptions",
                    description: "Some elements break the standard rules for stability, particularly transition metals seeking half-filled or filled d-subshells.",
                    examples: ["Chromium: [Ar] 4s¹ 3d⁵ (not 4s² 3d⁴)", "Copper: [Ar] 4s¹ 3d¹⁰ (not 4s² 3d⁹)"]
                },
                ions: {
                    title: "Ion Formation",
                    description: "Atoms gain or lose electrons to form ions. Cations lose electrons (positive charge), anions gain electrons (negative charge).",
                    examples: ["Na⁺: loses 1 electron", "Ca²⁺: loses 2 electrons", "Cl⁻: gains 1 electron", "O²⁻: gains 2 electrons"]
                },
                octet: {
                    title: "Octet Rule",
                    description: "Atoms tend to gain, lose, or share electrons to achieve 8 valence electrons, providing maximum stability.",
                    examples: ["Neon: 8 valence electrons (stable)", "Sodium: 1 valence electron (unstable)", "Chlorine: 7 valence electrons (unstable)"]
                }
            };

            const obj = objectives[objective];
            if (obj) {
                alert(`${obj.title}\n\n${obj.description}\n\nExamples:\n${obj.examples.join('\n')}`);
            }
        }



        // ======= Ion Formation Interactive Functions =======

        // Sodium Cation Formation Demonstration
        function showSodiumCation() {
            const building = document.getElementById('sodiumBuilding');
            const standardConfig = document.getElementById('sodiumStandard');
            const actualConfig = document.getElementById('sodiumActual');
            
            if (!building) return;

            // Reset configuration displays
            if (standardConfig) standardConfig.textContent = 'Na: 1s² 2s² 2p⁶ 3s¹';
            if (actualConfig) actualConfig.textContent = 'Na⁺: 1s² 2s² 2p⁶';

            // Animate electron loss from 3s orbital
            const slot3s1 = document.querySelector('[data-orbital="3s-1"]');
            if (slot3s1) {
                setTimeout(() => {
                    slot3s1.textContent = '';
                    slot3s1.style.opacity = '0.3';
                    
                    // Update configuration display
                    if (standardConfig) {
                        standardConfig.style.opacity = '0.5';
                        standardConfig.style.textDecoration = 'line-through';
                    }
                    if (actualConfig) {
                        actualConfig.style.fontWeight = 'bold';
                        actualConfig.style.color = 'var(--success)';
                    }
                }, 1000);
            }

            // Track interactive demo completion
            setTimeout(() => {
                updateProgress('ionFormation', 'interactiveDemo');
            }, 2000);
        }

        function resetSodiumDemo() {
            const building = document.getElementById('sodiumBuilding');
            const standardConfig = document.getElementById('sodiumStandard');
            const actualConfig = document.getElementById('sodiumActual');
            
            if (!building) return;

            // Reset all slots
            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.style.opacity = '1';
            });

            // Restore original electron configuration
            document.getElementById('1s1').textContent = '↑';
            document.getElementById('1s2').textContent = '↓';
            document.getElementById('2s1').textContent = '↑';
            document.getElementById('2s2').textContent = '↓';
            document.getElementById('2p1').textContent = '↑';
            document.getElementById('2p2').textContent = '↓';
            document.getElementById('2p3').textContent = '↑';
            document.getElementById('2p4').textContent = '↓';
            document.getElementById('2p5').textContent = '↑';
            document.getElementById('2p6').textContent = '↓';
            document.getElementById('3s1').textContent = '↑';

            // Reset configuration display styling
            if (standardConfig) {
                standardConfig.textContent = 'Na: 1s² 2s² 2p⁶ 3s¹';
                standardConfig.style.opacity = '1';
                standardConfig.style.textDecoration = 'none';
            }
            if (actualConfig) {
                actualConfig.textContent = 'Na⁺: 1s² 2s² 2p⁶';
                actualConfig.style.fontWeight = 'normal';
                actualConfig.style.color = 'inherit';
            }
        }

        // Chlorine Anion Formation Demonstration
        function showChlorineAnion() {
            const building = document.getElementById('chlorineBuilding');
            const standardConfig = document.getElementById('chlorineStandard');
            const actualConfig = document.getElementById('chlorineActual');
            
            if (!building) return;

            // Reset configuration displays
            if (standardConfig) standardConfig.textContent = 'Cl: [Ne] 3s² 3p⁵';
            if (actualConfig) actualConfig.textContent = 'Cl⁻: [Ne] 3s² 3p⁶';

            // Animate electron gain in 3p orbital
            const slot3p6 = document.getElementById('cl3p6');
            if (slot3p6) {
                setTimeout(() => {
                    slot3p6.textContent = '↓';
                    slot3p6.style.color = 'var(--success)';
                    slot3p6.style.fontWeight = 'bold';
                    
                    // Update configuration display
                    if (standardConfig) {
                        standardConfig.style.opacity = '0.5';
                        standardConfig.style.textDecoration = 'line-through';
                    }
                    if (actualConfig) {
                        actualConfig.style.fontWeight = 'bold';
                        actualConfig.style.color = 'var(--success)';
                    }
                }, 1000);
            }

            // Track interactive demo completion
            setTimeout(() => {
                updateProgress('ionFormation', 'interactiveDemo');
            }, 2000);
        }

        function resetChlorineDemo() {
            const building = document.getElementById('chlorineBuilding');
            const standardConfig = document.getElementById('chlorineStandard');
            const actualConfig = document.getElementById('chlorineActual');
            
            if (!building) return;

            // Reset all slots
            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.style.opacity = '1';
                slot.style.color = 'inherit';
                slot.style.fontWeight = 'normal';
            });

            // Restore original electron configuration
            document.getElementById('cl1s1').textContent = '↑';
            document.getElementById('cl1s2').textContent = '↓';
            document.getElementById('cl2s1').textContent = '↑';
            document.getElementById('cl2s2').textContent = '↓';
            document.getElementById('cl2p1').textContent = '↑';
            document.getElementById('cl2p2').textContent = '↓';
            document.getElementById('cl2p3').textContent = '↑';
            document.getElementById('cl2p4').textContent = '↓';
            document.getElementById('cl2p5').textContent = '↑';
            document.getElementById('cl2p6').textContent = '↓';
            document.getElementById('cl3s1').textContent = '↑';
            document.getElementById('cl3s2').textContent = '↓';
            document.getElementById('cl3p1').textContent = '↑';
            document.getElementById('cl3p2').textContent = '↓';
            document.getElementById('cl3p3').textContent = '↑';
            document.getElementById('cl3p4').textContent = '↓';
            document.getElementById('cl3p5').textContent = '↑';

            // Reset configuration display styling
            if (standardConfig) {
                standardConfig.textContent = 'Cl: [Ne] 3s² 3p⁵';
                standardConfig.style.opacity = '1';
                standardConfig.style.textDecoration = 'none';
            }
            if (actualConfig) {
                actualConfig.textContent = 'Cl⁻: [Ne] 3s² 3p⁶';
                actualConfig.style.fontWeight = 'normal';
                actualConfig.style.color = 'inherit';
            }
        }

        // Iron Cation Formation Demonstration
        function showIronCation() {
            const building = document.getElementById('ironBuilding');
            const standardConfig = document.getElementById('ironStandard');
            const actualConfig = document.getElementById('ironActual');
            
            if (!building) return;

            // Reset configuration displays
            if (standardConfig) standardConfig.textContent = 'Fe: [Ar] 4s² 3d⁶';
            if (actualConfig) actualConfig.textContent = 'Fe²⁺: [Ar] 3d⁶';

            // Animate electron loss from 4s orbital (transition metals lose s electrons first)
            const slot4s1 = document.getElementById('fe4s1');
            const slot4s2 = document.getElementById('fe4s2');
            
            if (slot4s1 && slot4s2) {
                setTimeout(() => {
                    slot4s1.textContent = '';
                    slot4s1.style.opacity = '0.3';
                }, 1000);
                
                setTimeout(() => {
                    slot4s2.textContent = '';
                    slot4s2.style.opacity = '0.3';
                    
                    // Update configuration display
                    if (standardConfig) {
                        standardConfig.style.opacity = '0.5';
                        standardConfig.style.textDecoration = 'line-through';
                    }
                    if (actualConfig) {
                        actualConfig.style.fontWeight = 'bold';
                        actualConfig.style.color = 'var(--success)';
                    }
                }, 1500);
            }

            // Track interactive demo completion
            setTimeout(() => {
                updateProgress('ionFormation', 'interactiveDemo');
            }, 3000);
        }

        function resetIronDemo() {
            const building = document.getElementById('ironBuilding');
            const standardConfig = document.getElementById('ironStandard');
            const actualConfig = document.getElementById('ironActual');
            
            if (!building) return;

            // Reset all slots
            const slots = building.querySelectorAll('.slot');
            slots.forEach(slot => {
                slot.textContent = '';
                slot.style.opacity = '1';
            });

            // Restore original electron configuration
            document.getElementById('fe1s1').textContent = '↑';
            document.getElementById('fe1s2').textContent = '↓';
            document.getElementById('fe2s1').textContent = '↑';
            document.getElementById('fe2s2').textContent = '↓';
            document.getElementById('fe2p1').textContent = '↑';
            document.getElementById('fe2p2').textContent = '↓';
            document.getElementById('fe2p3').textContent = '↑';
            document.getElementById('fe2p4').textContent = '↓';
            document.getElementById('fe2p5').textContent = '↑';
            document.getElementById('fe2p6').textContent = '↓';
            document.getElementById('fe3s1').textContent = '↑';
            document.getElementById('fe3s2').textContent = '↓';
            document.getElementById('fe3p1').textContent = '↑';
            document.getElementById('fe3p2').textContent = '↓';
            document.getElementById('fe3p3').textContent = '↑';
            document.getElementById('fe3p4').textContent = '↓';
            document.getElementById('fe3p5').textContent = '↑';
            document.getElementById('fe3p6').textContent = '↓';
            document.getElementById('fe3d1').textContent = '↑';
            document.getElementById('fe3d2').textContent = '↓';
            document.getElementById('fe3d3').textContent = '↑';
            document.getElementById('fe3d4').textContent = '↓';
            document.getElementById('fe3d5').textContent = '↑';
            document.getElementById('fe3d6').textContent = '↓';
            document.getElementById('fe4s1').textContent = '↑';
            document.getElementById('fe4s2').textContent = '↓';

            // Reset configuration display styling
            if (standardConfig) {
                standardConfig.textContent = 'Fe: [Ar] 4s² 3d⁶';
                standardConfig.style.opacity = '1';
                standardConfig.style.textDecoration = 'none';
            }
            if (actualConfig) {
                actualConfig.textContent = 'Fe²⁺: [Ar] 3d⁶';
                actualConfig.style.fontWeight = 'normal';
                actualConfig.style.color = 'inherit';
            }
        }

        // Ion Formation Vocabulary Quiz
        function checkIonVocabQuiz() {
            const answers = {
                q1: 'b', // Cation is positively charged
                q2: 'b', // Transition metals lose s electrons first, then d
                q3: 'b', // Ionic radius decreases for cations
                q4: 'b', // Oxygen forms -2 anion
                q5: 'b'  // Na⁺ has configuration 1s² 2s² 2p⁶
            };

            let correct = 0;
            let total = Object.keys(answers).length;

            Object.keys(answers).forEach(question => {
                const selected = document.querySelector(`input[name="${question}"]:checked`);
                if (selected && selected.value === answers[question]) {
                    correct++;
                }
            });

            const resultsDiv = document.getElementById('ionVocabResults');
            const percentage = Math.round((correct / total) * 100);
            
            resultsDiv.innerHTML = `
                <div class="quiz-score">
                    <h4>Quiz Results</h4>
                    <p>You scored ${correct}/${total} (${percentage}%)</p>
                    <p>${percentage >= 70 ? '🎉 Great job! You understand ion formation vocabulary!' : '📚 Review the vocabulary section and try again.'}</p>
                </div>
            `;
            resultsDiv.style.display = 'block';

            // Track progress
            updateProgress('ionFormation', 'vocabularyQuiz', correct, total);
        }

        function resetIonVocabQuiz() {
            const inputs = document.querySelectorAll('#ionVocabQuiz input[type="radio"]');
            inputs.forEach(input => input.checked = false);
            document.getElementById('ionVocabResults').style.display = 'none';
        }

        // Ion Formation Understanding Check
        function checkIonUnderstanding() {
            const answers = {
                uq1: 'b', // Mg²⁺ (loses 2 electrons)
                uq2: 'c', // Both Cl⁻ and K⁺ are isoelectronic with Ar
                uq3: 'b'  // Fe³⁺: [Ar] 3d⁵ (loses 2 from 4s, 1 from 3d)
            };

            let correct = 0;
            let total = Object.keys(answers).length;

            Object.keys(answers).forEach(question => {
                const selected = document.querySelector(`input[name="${question}"]:checked`);
                if (selected && selected.value === answers[question]) {
                    correct++;
                }
            });

            const resultsDiv = document.getElementById('ionUnderstandingResults');
            const percentage = Math.round((correct / total) * 100);
            
            resultsDiv.innerHTML = `
                <div class="understanding-score">
                    <h4>Understanding Check Results</h4>
                    <p>You scored ${correct}/${total} (${percentage}%)</p>
                    <p>${percentage >= 70 ? '🎉 Excellent! You understand ion formation concepts!' : '📚 Review the concepts and try again.'}</p>
                </div>
            `;
            resultsDiv.style.display = 'block';

            // Track progress
            updateProgress('ionFormation', 'understandingCheck', correct, total);
        }

        function resetIonUnderstanding() {
            const inputs = document.querySelectorAll('#ionUnderstandingCheck input[type="radio"]');
            inputs.forEach(input => input.checked = false);
            document.getElementById('ionUnderstandingResults').style.display = 'none';
        }

        // Update tile click handlers to show detailed content
        document.addEventListener('DOMContentLoaded', function() {
            // Update the Overview tile to show detailed content
            const overviewTile = document.querySelector('.study-tile.overview');
            if (overviewTile) {
                const learnMoreBtn = overviewTile.querySelector('.tile-btn');
                if (learnMoreBtn) {
                    learnMoreBtn.onclick = showOverviewContent;
                }
            }

            // Initialize learning progress from localStorage
            initializeLearningProgress();
        });

        // ======= Learning Progress Functions =======

        function initializeLearningProgress() {
            const savedProgress = localStorage.getItem('learningProgress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                updateLearningProgress(progress.conceptsMastered || 0, progress.streak || 0);
            }
        }

        function updateLearningProgress(conceptsMastered, streak) {
            const percentage = Math.round((conceptsMastered / 6) * 100);
            
            // Update nucleus
            const nucleus = document.getElementById('nucleusProgress');
            if (nucleus) {
                nucleus.querySelector('.nucleus-text').textContent = percentage + '%';
                
                // Add celebration animation for milestones
                if (conceptsMastered > 0 && conceptsMastered % 2 === 0) {
                    nucleus.classList.add('celebrating');
                    setTimeout(() => {
                        nucleus.classList.remove('celebrating');
                    }, 600);
                }
            }

            // Update electron shells with animation
            const shells = [
                document.getElementById('shell1'),
                document.getElementById('shell2'),
                document.getElementById('shell3')
            ];

            shells.forEach((shell, index) => {
                if (shell) {
                    if (conceptsMastered > index * 2) {
                        if (!shell.classList.contains('active')) {
                            shell.classList.add('active');
                            // Add entrance animation
                            shell.style.transform = 'scale(0.8)';
                            setTimeout(() => {
                                shell.style.transform = 'scale(1)';
                            }, 100);
                        }
                    } else {
                        shell.classList.remove('active');
                    }
                }
            });

            // Update stats with animation
            const conceptsElement = document.getElementById('conceptsMastered');
            const streakElement = document.getElementById('currentStreak');
            const levelElement = document.getElementById('achievementLevel');

            if (conceptsElement) {
                conceptsElement.style.transform = 'scale(1.1)';
                conceptsElement.textContent = conceptsMastered + '/6';
                setTimeout(() => {
                    conceptsElement.style.transform = 'scale(1)';
                }, 200);
            }
            
            if (streakElement) streakElement.textContent = streak + ' days';
            
            if (levelElement) {
                const oldLevel = levelElement.textContent;
                if (conceptsMastered === 0) levelElement.textContent = 'Beginner';
                else if (conceptsMastered <= 2) levelElement.textContent = 'Novice';
                else if (conceptsMastered <= 4) levelElement.textContent = 'Intermediate';
                else if (conceptsMastered <= 5) levelElement.textContent = 'Advanced';
                else levelElement.textContent = 'Master';
                
                // Animate level change
                if (oldLevel !== levelElement.textContent) {
                    levelElement.style.transform = 'scale(1.2)';
                    levelElement.style.color = '#10b981';
                    setTimeout(() => {
                        levelElement.style.transform = 'scale(1)';
                        levelElement.style.color = '';
                    }, 300);
                }
            }

            // Update achievements
            updateAchievements(conceptsMastered);
        }

        function updateAchievements(conceptsMastered) {
            const achievements = document.querySelectorAll('.achievement-item');
            
            if (conceptsMastered >= 1) {
                achievements[0].classList.remove('locked');
                achievements[0].classList.add('unlocked');
                achievements[0].querySelector('.achievement-icon').textContent = '🎯';
            }
            
            if (conceptsMastered >= 3) {
                achievements[1].classList.remove('locked');
                achievements[1].classList.add('unlocked');
                achievements[1].querySelector('.achievement-icon').textContent = '⭐';
            }
            
            if (conceptsMastered >= 6) {
                achievements[2].classList.remove('locked');
                achievements[2].classList.add('unlocked');
                achievements[2].querySelector('.achievement-icon').textContent = '🏆';
            }
        }

        function showConceptDetails(concept) {
            const concepts = {
                aufbau: {
                    title: "Aufbau principle",
                    description: "Electrons occupy the lowest-energy available subshells first.",
                    examples: ["Hydrogen: 1s¹", "Helium: 1s²", "Carbon: 1s² 2s² 2p²", "Neon: 1s² 2s² 2p⁶"]
                },
                hund: {
                    title: "Hund's rule",
                    description: "In a set of degenerate orbitals (p, d, f), place one electron in each with the same spin before pairing.",
                    examples: ["Carbon p-subshell: ↑ ↑ (not ↑↓)", "Nitrogen p-subshell: ↑ ↑ ↑", "Oxygen p-subshell: ↑↓ ↑ ↑"]
                },
                pauli: {
                    title: "Pauli exclusion principle",
                    description: "Each orbital holds at most two electrons and they must have opposite spins (↑↓).",
                    examples: ["1s orbital: ↑↓ (2 electrons max, opposite spins)", "2p orbital: ↑↓ (2 electrons max, opposite spins)", "3d orbital: ↑↓ (2 electrons max, opposite spins)"]
                },
                exceptions: {
                    title: "Notable Exceptions",
                    description: "Some elements break the standard rules for stability, particularly transition metals seeking half-filled or filled d-subshells.",
                    examples: ["Chromium: [Ar] 4s¹ 3d⁵ (not 4s² 3d⁴)", "Copper: [Ar] 4s¹ 3d¹⁰ (not 4s² 3d⁹)"]
                },
                ions: {
                    title: "Ion Formation",
                    description: "Atoms gain or lose electrons to form ions. Cations lose electrons (positive charge), anions gain electrons (negative charge).",
                    examples: ["Na⁺: loses 1 electron", "Ca²⁺: loses 2 electrons", "Cl⁻: gains 1 electron", "O²⁻: gains 2 electrons"]
                },
                octet: {
                    title: "Octet Rule",
                    description: "Atoms tend to gain, lose, or share electrons to achieve 8 valence electrons, providing maximum stability.",
                    examples: ["Neon: 8 valence electrons (stable)", "Sodium: 1 valence electron (unstable)", "Chlorine: 7 valence electrons (unstable)"]
                }
            };

            const conceptInfo = concepts[concept];
            if (conceptInfo) {
                alert(`${conceptInfo.title}\n\n${conceptInfo.description}\n\nExamples:\n${conceptInfo.examples.join('\n')}`);
                
                // Mark concept as learned
                markConceptAsLearned(concept);
            }
        }

        function markConceptAsLearned(concept) {
            const savedProgress = localStorage.getItem('learningProgress') || '{}';
            const progress = JSON.parse(savedProgress);
            
            if (!progress.conceptsLearned) progress.conceptsLearned = [];
            if (!progress.conceptsLearned.includes(concept)) {
                progress.conceptsLearned.push(concept);
                progress.conceptsMastered = progress.conceptsLearned.length;
                
                // Update streak
                const today = new Date().toDateString();
                if (!progress.lastStudyDate || progress.lastStudyDate !== today) {
                    progress.streak = (progress.streak || 0) + 1;
                    progress.lastStudyDate = today;
                }
                
                localStorage.setItem('learningProgress', JSON.stringify(progress));
                updateLearningProgress(progress.conceptsMastered, progress.streak);
            }
        }

        function resetLearningProgress() {
            if (confirm('Are you sure you want to reset all learning progress? This cannot be undone.')) {
                localStorage.removeItem('learningProgress');
                updateLearningProgress(0, 0);
                
                // Reset achievements
                const achievements = document.querySelectorAll('.achievement-item');
                achievements.forEach(achievement => {
                    achievement.classList.remove('unlocked');
                    achievement.classList.add('locked');
                    achievement.querySelector('.achievement-icon').textContent = '🔒';
                });
            }
        }

        function exportLearningReport() {
            const savedProgress = localStorage.getItem('learningProgress') || '{}';
            const progress = JSON.parse(savedProgress);
            
            let report = 'Electron Configuration Learning Report\n';
            report += 'Generated on: ' + new Date().toLocaleDateString() + '\n\n';
            
            report += `Concepts Mastered: ${progress.conceptsMastered || 0}/6\n`;
            report += `Current Streak: ${progress.streak || 0} days\n`;
            report += `Achievement Level: ${getAchievementLevel(progress.conceptsMastered || 0)}\n\n`;
            
            if (progress.conceptsLearned && progress.conceptsLearned.length > 0) {
                report += 'Concepts Learned:\n';
                progress.conceptsLearned.forEach(concept => {
                    report += `  ✓ ${concept.charAt(0).toUpperCase() + concept.slice(1)}\n`;
                });
            }
            
            // Create and download the report
            const blob = new Blob([report], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'learning-progress-report.txt';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function getAchievementLevel(conceptsMastered) {
            if (conceptsMastered === 0) return 'Beginner';
            if (conceptsMastered <= 2) return 'Novice';
            if (conceptsMastered <= 4) return 'Intermediate';
            if (conceptsMastered <= 5) return 'Advanced';
            return 'Master';
        }

        // ======= Journey Functions =======
        function startLearningJourney() {
            // Animate the journey path
            const steps = document.querySelectorAll('.path-step');
            steps.forEach((step, index) => {
                setTimeout(() => {
                    step.classList.add('active');
                    if (index < steps.length - 1) {
                        step.nextElementSibling.classList.add('active');
                    }
                }, index * 500);
            });
            
            // Show a motivational message
            setTimeout(() => {
                alert('🎉 Welcome to your electron configuration learning journey!\n\nClick on the concept tiles above to start learning. Each concept you master will unlock achievements and track your progress.\n\nGood luck on your journey to becoming an electron configuration expert!');
            }, 2500);
        }

        // ======= Vocabulary Functions =======
        function showVocabDefinition(term) {
            const definitions = {
                aufbau: {
                    title: "Aufbau Principle",
                    definition: "Electrons fill orbitals in order of increasing energy, following the diagonal pattern: 1s → 2s → 2p → 3s → 3p → 4s → 3d → 4p...",
                    examples: ["Hydrogen: 1s¹", "Helium: 1s²", "Carbon: 1s² 2s² 2p²", "Neon: 1s² 2s² 2p⁶"]
                },
                hund: {
                    title: "Hund's Rule",
                    definition: "Electrons prefer to occupy separate degenerate orbitals with parallel spins before pairing. This maximizes total spin and follows the principle of maximum multiplicity.",
                    examples: ["Carbon p-subshell: ↑ ↑ (not ↑↓)", "Nitrogen p-subshell: ↑ ↑ ↑", "Oxygen p-subshell: ↑↓ ↑ ↑"]
                },
                pauli: {
                    title: "Pauli Exclusion Principle",
                    definition: "No two electrons in an atom can have identical quantum numbers. Each orbital can hold at most 2 electrons, and they must have opposite spins (↑↓).",
                    examples: ["1s orbital: ↑↓ (2 electrons max, opposite spins)", "2p orbital: ↑↓ (2 electrons max, opposite spins)", "3d orbital: ↑↓ (2 electrons max, opposite spins)"]
                },
                degenerate: {
                    title: "Degenerate Orbitals",
                    definition: "Orbitals that have the same energy level. For example, the three 2p orbitals (2px, 2py, 2pz) are degenerate.",
                    examples: ["2p orbitals: 2px, 2py, 2pz", "3d orbitals: 3dxy, 3dxz, 3dyz, 3dx²-y², 3dz²"]
                },
                valence: {
                    title: "Valence Electrons",
                    definition: "Electrons in the outermost shell of an atom. These electrons are involved in chemical bonding and determine the element's chemical properties.",
                    examples: ["Carbon: 4 valence electrons (2s² 2p²)", "Oxygen: 6 valence electrons (2s² 2p⁴)", "Sodium: 1 valence electron (3s¹)"]
                },
                octet: {
                    title: "Octet Rule",
                    definition: "Atoms tend to gain, lose, or share electrons to achieve 8 valence electrons, providing maximum stability similar to noble gases.",
                    examples: ["Neon: 8 valence electrons (stable)", "Sodium: 1 valence electron (unstable)", "Chlorine: 7 valence electrons (unstable)"]
                }
            };

            const vocab = definitions[term];
            if (vocab) {
                alert(`${vocab.title}\n\nDefinition: ${vocab.definition}\n\nExamples:\n${vocab.examples.join('\n')}`);
            }
        }

        // Vocabulary Quiz Functions
        function checkVocabQuiz() {
            const answers = {
                vocab1: 'b', // Hund's Rule: electrons spread out before pairing
                vocab2: 'b', // Degenerate orbitals have same energy
                vocab3: 'b', // Pauli Exclusion: max 2 electrons with opposite spins
                vocab4: 'b', // Unpaired electrons: single electrons with same spin
                vocab5: 'b', // Lone pair: pair of electrons not involved in bonding
                vocab6: 'b', // Aufbau Principle: electrons fill lowest energy first
                vocab7: 'b', // p subshell: 3 orbitals
                vocab8: 'b'  // Ground state: lowest energy configuration
            };
            
            let correct = 0;
            let total = 8;
            
            // Check each question
            for (let i = 1; i <= total; i++) {
                const selected = document.querySelector(`input[name="vocab${i}"]:checked`);
                if (selected && selected.value === answers[`vocab${i}`]) {
                    correct++;
                }
            }
            
            const resultsDiv = document.getElementById('vocabResults');
            const percentage = Math.round((correct / total) * 100);
            
            let resultText = '';
            let resultClass = '';
            
            if (percentage >= 80) {
                resultText = `🎉 Excellent! You got ${correct}/${total} correct (${percentage}%). You have a strong understanding of chemistry vocabulary!`;
                resultClass = 'success';
            } else if (percentage >= 60) {
                resultText = `👍 Good job! You got ${correct}/${total} correct (${percentage}%). Review the vocabulary cards to improve further.`;
                resultClass = 'warning';
            } else {
                resultText = `📚 Keep studying! You got ${correct}/${total} correct (${percentage}%). Review the vocabulary section and try again.`;
                resultClass = 'error';
            }
            
            resultsDiv.innerHTML = resultText;
            resultsDiv.className = `pauli-feedback ${resultClass}`;
            resultsDiv.style.display = 'block';

            // Track progress for vocabulary quiz
            updateProgress('coreRules', 'vocabularyQuiz', correct, total);
        }

        function resetVocabQuiz() {
            // Clear all radio button selections
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.checked = false;
            });
            
            // Hide results
            const resultsDiv = document.getElementById('vocabResults');
            resultsDiv.style.display = 'none';
        }
    </script>
</body>
</html>